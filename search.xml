<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å·¥ä½œå¹´é‰´]]></title>
    <url>%2F2020%2F03%2F28%2F%E5%B7%A5%E4%BD%9C%E5%B9%B4%E9%89%B4%2F</url>
    <content type="text"><![CDATA[å·¥ä½œå¹´é‰´ æ—¶é—´äºæ¯ä¸ªäººè€Œè¨€éƒ½æ˜¯å…¬å¹³çš„ï¼Œä¸ä¼šä¸ºä»»ä½•äººåœç•™ï¼Œä¸å…¶åœ¨å·²ç»æ— èƒ½ä¸ºåŠ›çš„æ—¶å€™æ‚²å¹æ—¶ä¸å¾…æˆ‘ï¼Œä¸å¦‚è®°å½•ä¸‹ä»ç°åœ¨å¼€å§‹çš„æ¯ä¸€ç§’è‡ªå·±æ˜¯æ€ä¹ˆè¿‡çš„ï¼Œæ´»å¾—æ˜æ˜ç™½ç™½ å‰è¨€åˆ°ç°åœ¨ä¸ºæ­¢å·¥ä½œå·²ç»å¿«4å¹´äº†ï¼ŒæœŸé—´ä¹Ÿç»å†è¿‡å¾ˆå¤šäº‹æƒ…ï¼Œç°åœ¨æƒ³æ¥ï¼Œæ— è®ºæ˜¯åˆšæ¯•ä¸šæ—¶çš„é¢è¯•ï¼Œè¿˜æ˜¯åé¢çš„ç¬¬ä¸€æ¬¡åˆ°å…¬å¸æŠ¥é“ï¼Œç¬¬ä¸€æ¬¡å®é™…å‚åŠ å·¥ä½œï¼Œä»¥åŠåé¢çš„ç»©æ•ˆè€ƒæ ¸ï¼Œæ™‹å‡ï¼Œç¦»èŒç­‰ç­‰ï¼Œè¿™äº›äº‹æƒ…è‡³ä»Šè¿˜åƒæ˜¯å‘ç”Ÿåœ¨æ˜¨å¤©ä¸€æ ·ï¼Œå›å¿†èµ·æ¥æœ‰è‹¦æœ‰ç”œï¼Œç™¾å‘³æ‚é™ˆï¼Œéƒ½è¯´ä»¥å²ä¸ºé‰´å¯ä»¥æ˜å¾—å¤±ï¼Œç°åœ¨è‡ªå·±ä¹Ÿåˆ°äº†äººä»¬å¸¸è¯´çš„å·¥ä½œä¸­çš„ç¬¬ä¸€ä¸ªåˆ†æ°´å²­ 3~5 å¹´ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå›é¡¾ä¸€ä¸‹è¿‡å»è¿™å‡ å¹´çš„å·¥ä½œç»å†æ€»ç»“ä¸€ä¸‹è‡ªå·±è¿™å‡ å¹´çš„å¾—å¤±ï¼ŒåŒ…æ‹¬ä¸€äº›æˆé•¿ï¼Œä¸€äº›é—æ†¾ï¼Œä¸€äº›æ„Ÿå—ï¼Œä¸è¿‡è¿™ä¹Ÿä¸ç®—æ˜¯å¾ˆæ­£å¼è§„åˆ’æ€»ç»“ä»€ä¹ˆçš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæ¯”è¾ƒä¹±ï¼Œæµæ°´è´¦å½¢å¼ï¼Œæƒ³åˆ°å“ªé‡Œå°±å†™åˆ°å“ªé‡Œã€‚ å·¥ä½œç»å†æ‰¾å·¥ä½œ(2015)åˆšå¼€å§‹æ‰¾å·¥ä½œåº”è¯¥æ˜¯åœ¨å¤§å››ä¸Šå­¦æœŸ15å¹´åº•ï¼Œç°åœ¨æƒ³æ¥é‚£ä¸ªæ—¶å€™çš„è‡ªå·±çœŸçš„æ˜¯åªå„ç§æ„ä¹‰ä¸Šçš„èœé¸¡ï¼Œç”±äºè‡ªå·±å¤§å­¦æœŸé—´å…¨åœ¨æICPCï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å†™å†™consoleä»£ç ï¼Œæ ¹æœ¬æ²¡æœ‰å†™è¿‡å·¥ç¨‹ä»£ç ï¼Œæ›´å¥½ç¬‘çš„æ˜¯å› ä¸ºé‚£ä¸ªæ—¶å€™éƒ½åªå†™c/c++,ç»“æœåé¢æ‰¾å·¥ä½œçš„æ—¶å€™å‘ç°åªæ‰¾cæ‰¾å·¥ä½œä¸æ€ä¹ˆå¥½æ‰¾(å› ä¸ºcæˆ‘ä¹Ÿæ˜¯èœé¸¡)ï¼Œæ‰€ä»¥èŠ±äº†å‡ å¤©å­¦äº†ä¸€ä¸‹javaè¯­æ³•ï¼ŒèƒŒäº†å‡ ä¸ªç»å…¸é¢è¯•é¢˜ï¼Œç„¶åæŠ•ç®€å†å°±å¼€å§‹æŠ•Cå’ŒJavaä¸¤ä¸ªå²—ä½äº†ï¼ŒçœŸä¸çŸ¥é“å“ªæ¥çš„è‡ªä¿¡ï¼Œä¸è¿‡æœ€åè¿æ°”è¿˜æ˜¯æŒºå¥½çš„ï¼Œåœ¨æˆéƒ½å‚åŠ äº†å„ç§é¢è¯•è¢«æ‹’ä¹‹ååœ¨æœ€åä¸€å¤©çš„é¢è¯•é‡Œé¢è¢«ç‚¹è¯„ç»™æ¡èµ°äº†æˆ‘è¿™ä¸ªèœé¸¡ï¼Œå½“åˆåœ¨æˆéƒ½é¢è¯•çš„ç»å†ç°åœ¨æƒ³æ¥ä¹Ÿæ˜¯å†å†åœ¨ç›®ï¼Œå°è±¡æœ€æ·±çš„ä¸€å¤©å°±æ˜¯å’Œfufuä¸€èµ·ä¸Šåˆé¢ç¾å›¢ä¸‹åˆé¢è…¾è®¯ï¼Œé‚£æ˜¯çœŸçš„é¢äº†ä¸€å¤©ï¼ŒæœŸé—´è¾—è½¬å„å¤§é…’åº—ï¼Œé¥­éƒ½å·®ç‚¹åƒä¸ä¸Šï¼Œåé¢è¿˜æœ‰ä¸€äº›æœ‰æ„æ€çš„äº‹æ¯”å¦‚ç§‹å“¥ä¸€èµ·å»ä¸€ä¸ªå°ä½œåŠé¢è¯•ï¼Œé‚£å®¶æ‰€è°“çš„å…¬å¸å±…ç„¶åœ¨å±…æ°‘æ¥¼é‡Œï¼Œæ‰¾äº†åŠå¤©éƒ½æ‰¾ä¸åˆ°ï¼Œè¿˜æœ‰å’Œfufuç§‹å“¥ä¸€èµ·åœ¨é…’åº—æŒ¤ä¸€å¼ åºŠï¼Œç»“æœåŠå¤œéš”å£ä¼ æ¥å¥‡æ€ªåŠ¨é™çš„é­”å¹»ç»å†ğŸ˜‚ ç¬¬ä¸€å¹´(2016.7 ~ 2017.7)ç¬¬ä¸€å¹´åº”è¯¥ç®—æ˜¯æˆé•¿æœ€å¿«åŒæ—¶ä¹Ÿæ˜¯è¿‡å¾—æœ€å¼€å¿ƒçš„ä¸€å¹´ï¼Œé‚£ä¸ªæ—¶å€™åˆšå…¥èŒï¼Œå•¥éƒ½ä¸æ‡‚ï¼Œå·¥ç¨‹ä»£ç æ²¡å†™è¿‡ä¸€è¡Œï¼Œæ…Œå¾—ä¸€æ‰¹ï¼Œå°±æ€•è¯•ç”¨æœŸè¢«å¹²æ‰äº†ï¼Œä¸è¿‡å¥½åœ¨é‚£ä¸ªæ—¶å€™çš„åŒäº‹ä»¬éƒ½å¾ˆniceï¼Œå¾ˆæœ‰è€å¿ƒåœ°å¸¦æˆ‘è¿™åªèœé¸¡å…¥é—¨ï¼Œå¸®æˆ‘èå…¥å›¢é˜Ÿç­‰ç­‰ã€‚ ç¬¬ä¸€å¹´ä¸»è¦çš„å·¥ä½œå°±æ˜¯ç†Ÿæ‚‰å·¥ä½œä¸­ä½¿ç”¨çš„æŠ€æœ¯æ ˆï¼Œç„¶åå°±æ˜¯ç†Ÿæ‚‰å›¢é˜Ÿä¸šåŠ¡èƒ½å¤Ÿè‡ªå·±ç‹¬ç«‹å®Œæˆéœ€æ±‚ï¼Œé‚£ä¸ªæ—¶å€™å›¢é˜Ÿè™½ç„¶å°ä½†æ˜¯ç»´æŠ¤çš„åº”ç”¨å’Œæ¶‰åŠåˆ°çš„æŠ€æœ¯éƒ½æŒºå¤šçš„ï¼Œæœ‰æœ€åŸºç¡€çš„Webé¡¹ç›®ï¼Œæä¾›RPCçš„serviceé¡¹ç›®ï¼Œä»¥åŠä¾é åˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡ï¼Œè¿˜æœ‰ä¸€äº›å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ç­‰ç­‰ï¼Œè¶³å¤Ÿä¸€ä¸ªåº”å±Šç”Ÿå»äº†è§£å’Œæˆé•¿çš„äº†ï¼Œä»”ç»†æƒ³äº†ä¸€ä¸‹ï¼Œè‡ªå·±åœ¨è¿™ä¸€å¹´çš„æŠ€èƒ½æˆé•¿é¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š å…¥é—¨çš„æ—¶å€™å­¦ä¼šäº†ä½¿ç”¨mavenå’Œgitï¼Œè¿™æ˜¯é¡¹ç›®æ­å»ºå’Œå›¢é˜Ÿåä½œå¿…è¦çš„ä¸¤ä¸ªä¸œè¥¿ï¼Œè¿˜æœ‰ç†Ÿæ‚‰äº†intellijè¿™ä¸ªide åšwebé¡¹ç›®å’Œä¸€äº›å‰åç«¯åˆ†ç¦»é¡¹ç›®çš„æ—¶å€™å­¦ä¼šäº†MVCæ¶æ„ï¼Œä»¥åŠSSM(Spring + SpringMvc/Struts2 + mybatis)è¿™äº›æ¡†æ¶,äº†è§£äº†Tomcatè¿™ä¸ªå®¹å™¨ï¼Œè¿˜æœ‰ä¸€äº›å‰ç«¯çš„é›¶ç¢çŸ¥è¯†ç‚¹å§ï¼ŒåŒ…æ‹¬jså’Œajaxè¿™äº›ï¼Œä¸è¿‡ä¸Šé¢è¯´çš„è¿™äº›éƒ½ä»…é™äºä½¿ç”¨å±‚é¢ï¼ŒåŸç†éƒ½ä¸ç”šäº†è§£ åšserviceé¡¹ç›®çš„æ—¶å€™ç¬¬ä¸€æ¬¡æ¥è§¦äº†RPCçš„æ¦‚å¿µï¼ŒåŒæ—¶è¿˜æ¥è§¦äº†mysqlï¼Œåˆ†å¸ƒå¼æ•°æ®åº“é“¾æ¥ï¼Œåˆ†åº“åˆ†è¡¨ï¼Œä¸»ä»åŒæ­¥è¿™äº› åŒæ—¶è¿˜æœ‰äº†è§£åˆ°ä¸€äº›åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒçš„æ¦‚å¿µï¼ŒçŸ¥é“äº†zookeeperè¿™ä¸ªåè¯ åé¢é™†é™†ç»­ç»­è¡¥äº†ä¸€äº›javaç›¸å…³çš„åŸºç¡€ï¼Œä¾‹å¦‚IOå•Šï¼Œå¹¶å‘å•Šä¹‹ç±»çš„ åé¢å°±æ˜¯ä¸€äº›ä¸šåŠ¡ç†Ÿæ‚‰äº†ï¼Œé™¤äº†ä¸šåŠ¡çŸ¥è¯†ä¹‹å¤–è¿˜å› ä¸ºåœ¨æ—¥å¸¸å·¥ä½œä¸­é‡‡ç”¨çš„æ˜¯æ•æ·å¼€å‘ï¼Œæ‰€ä»¥ä¹Ÿæ¥è§¦åˆ°äº†ä¸€äº›scrumç›¸å…³çš„çŸ¥è¯†ï¼Œå½“æ—¶ç”¨çš„å·¥å…·åº”è¯¥æ˜¯è…¾è®¯çš„tapdï¼Œè®²é“ç†æŒºå¥½ç”¨çš„ ç¬¬äºŒå¹´(2017.7 ~ 2018.7)åˆ°äº†ç¬¬äºŒå¹´åŸºæœ¬ä¸Šä¸šåŠ¡ç†Ÿæ‚‰å¾—å·®ä¸å¤šäº†ï¼Œè´Ÿè´£çš„åº”ç”¨å’Œæ—¥å¸¸éœ€æ±‚ä¹Ÿå¼€å§‹å¤šèµ·æ¥äº†ï¼ŒåŒæ—¶è¿™ä¸€å¹´é‡Œé¢è‡ªå·±ä¹Ÿæ¥åˆ°äº†å¼€å‘ä¸€ä¸ªé«˜å¹¶å‘æœåŠ¡çš„ä»»åŠ¡ï¼Œå°†å¹³æ—¶ä½¿ç”¨åˆ°çš„æ¡†æ¶ä¹‹ç±»çš„å·¥å…·è¿›è¡Œäº†ä¸€äº›æ·±å…¥çš„å­¦ä¹ ï¼Œåœ¨åŠ ä¸Šå½“æ—¶çš„å›¢é˜Ÿæœ‰æ¯å‘¨åšæŠ€æœ¯åˆ†äº«çš„ä¹ æƒ¯ï¼ŒæŠ€æœ¯æ°›å›´æŒºæµ“çš„ï¼Œå¤§å®¶éƒ½ä¼šä»”ç»†å»ä¸“ç ”ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å¹´é‡Œé¢ä¸»è¦æˆé•¿æ˜¯æŠ€æœ¯æ·±åº¦çš„ä¸€ä¸ªæå‡ï¼Œå…·ä½“çš„å†…å®¹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š é¦–å…ˆæ˜¯å­¦äº†ä¸€æ³¢Tomcatçš„æ¶æ„ï¼Œçœ‹äº†ä¸€æœ¬ä¹¦å«åšã€Šæ·±å…¥å‰–æTomcatã€‹è¿˜æ˜¯ä»€ä¹ˆçš„ï¼Œè®°å¾—è®²çš„æ˜¯tomcat 5.0çš„å†…å®¹ï¼Œåé¢è‡ªå·±ä¹Ÿæ‰¾äº†ä¸ª7.0ç‰ˆæœ¬çš„æºç çœ‹äº†ä¸€éƒ¨åˆ†ï¼Œä¸è¿‡å…·ä½“çš„ä»£ç ç°åœ¨å·²ç»è®°ä¸æ¸…æ¥šäº†ï¼Œæœ€å¤§çš„æ”¶è·åº”è¯¥æ˜¯å­¦åˆ°äº†Tomcatçš„å¤šå®¹å™¨åˆ’åˆ†å’Œç»Ÿä¸€ç”Ÿå‘½å‘¨æœŸç®¡ç†è¿™æ ·çš„æ¶æ„ï¼Œè¿™ä¸ªåœ¨åé¢çš„å·¥ä½œä¸­ä¹Ÿæœ‰ä½¿ç”¨åˆ°ï¼Œå’Œwebç›¸å…³çš„è¿˜æœ‰ä¸€äº›è´Ÿè½½å‡è¡¡ç›¸å…³çš„ä¸œè¥¿ï¼Œä¾‹å¦‚4/7å±‚ä»£ç†ï¼Œåå‘ä»£ç†è¿™äº›æ¦‚å¿µï¼Œä»¥åŠnginxç­‰ï¼Œä¸è¿‡éƒ½åªæ˜¯äº†è§£æ¦‚å¿µï¼Œæ²¡æ€ä¹ˆæ·±å…¥ éšåçš„è¯åº”è¯¥æ˜¯springçš„å­¦ä¹ ï¼ŒæŠŠspring ç”¨äºå®ç°DIï¼ˆdependency injectionï¼‰çš„Ioc å®¹å™¨éƒ¨åˆ†çœ‹äº†ä¸€éï¼Œå½“ç„¶çœ‹äº†IOCè¿˜å¾—çœ‹AOPï¼Œäºæ˜¯æŠŠproxyæ–¹å¼å’Œcglibæ–¹å¼çš„AOPä»£ç ä¹Ÿçœ‹äº†ä¸€éï¼Œåé¢è¿˜çœ‹äº†springmvcçš„éƒ¨åˆ†ä»£ç ã€‚ çœ‹äº†springä¹‹åssmä¸‰ä»¶å¥—ä¸­çš„mybatiså½“ç„¶ä¹Ÿä¸èƒ½æ¼æ‰ï¼Œé¡ºä¾¿å°±ç ”ç©¶äº†ä¸€ä¸‹mybatiså’Œspringæ˜¯æ€ä¹ˆé›†æˆçš„ï¼ˆå°±æ˜¯aopï¼‰ï¼Œä»¥åŠmybatisæ˜¯æ€ä¹ˆå°è£…jdbcçš„ï¼Œä¸è¿‡ç°åœ¨æƒ³æ¥è²Œä¼¼æºç éƒ½å¿˜å¾—å·®ä¸å¤šäº†ğŸ˜‚ åé¢çš„è¯å°±æ˜¯mysqlç›¸å…³çš„å­¦ä¹ äº†ï¼Œå…¶å®ä¸»è¦å°±æ˜¯innodbçš„å­¦ä¹ å§ï¼Œäº†è§£äº†ä¸€æ³¢ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼ˆå…¶å®éƒ½åªæ˜¯æ¦‚å¿µäº†è§£ï¼‰ç†è§£è¯¸å¦‚æœ€å·¦åŒ¹é…åŸåˆ™è¿™äº›ä¸œè¥¿ï¼Œå½“ç„¶ä¹Ÿåœ¨çº¿ä¸Šsqlè°ƒä¼˜çš„è¿‡ç¨‹ä¸­å­¦ä¼šäº†ä½¿ç”¨explainè¿™ç±»å·¥å…·ï¼Œç„¶åå°±æ˜¯ä¸€äº›å¸¸è§„çš„ä¸œè¥¿ï¼Œä¾‹å¦‚innodbçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒACIDçš„ç‰¹æ€§ï¼Œä»¥åŠmvccï¼Œæ—¥å¿—å…ˆè¡Œï¼Œundo redoï¼Œbinlogè¿™äº›æ¦‚å¿µï¼Œä¸è¿‡éƒ½åªæ˜¯æ¦‚å¿µæ€§çš„å­¦ä¹ ï¼Œæ²¡æœ‰çœŸæ­£å»ç¿»è¿‡æºç ä»€ä¹ˆ æœ€åçš„è¯å°±æ˜¯é«˜å¹¶å‘æœåŠ¡é‚£ä¸€å¥—äº†ï¼Œå…ˆæ˜¯çœ‹äº†ç‚¹è¯„å½“æ—¶çš„RPCæ¡†æ¶pigeonçš„æºç ï¼Œäº†è§£äº†åŒ…æ‹¬RPCåè®®å®šä¹‰å’Œåºåˆ—åŒ–ï¼ŒæœåŠ¡æ³¨å†Œå‘ç°ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥è¿™äº›ä¸œè¥¿ï¼Œç„¶åæ˜¯ç¼“å­˜éƒ¨åˆ†ï¼Œå½“æ—¶ç”¨çš„æ˜¯å°è£…ä¹‹åçš„redisï¼Œä¸è¿‡ä¸ºäº†å®¹ç¾ä¹Ÿå¼•å…¥äº†tair çš„ldbï¼ˆå…¶å®å°±æ˜¯level dbï¼‰ï¼Œåœ¨ç¼“å­˜ä¹‹åä¸ºäº†ä¿éšœç¨³å®šæ€§ä¹Ÿç”¨äº†å¾ˆå¤šæ‰‹æ®µï¼ŒåŒ…æ‹¬ç‰©ç†å±‚é¢çš„å¼‚åœ°åŒä¸­å¿ƒéƒ¨ç½²ï¼Œä»£ç å±‚é¢çš„ç†”æ–­é™çº§ä¿æŠ¤(ç”¨çš„ç‚¹è¯„è‡ªç ”çš„rhinoï¼Œæºç æ²¡æœ‰å»çœ‹ä¸è¿‡ç”¨èµ·æ¥å’Œnetflixçš„HystrixæŒºåƒçš„ï¼ŒåŸç†åº”è¯¥ä¹Ÿå·®ä¸å¤š)ï¼Œdb å±‚é¢çš„åˆ†åº“åˆ†è¡¨ç­‰ å½“ç„¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜é™†é™†ç»­ç»­è¡¥äº†ä¸€äº›javaåŸºç¡€ï¼Œçœ‹äº†äº›jvmç›¸å…³çš„ä¹¦ç±ï¼Œç®€å•å­¦äº†ä¸€ä¸‹gcï¼Œç±»åŠ è½½ï¼Œjvmå†…å­˜æ¨¡å‹ï¼Œjmmæ¨¡å‹ä»¥åŠjdkçš„éƒ¨åˆ†ç±»çš„æºç ï¼Œåƒé›†åˆç±»ç›¸å…³çš„hashmapï¼Œconcurrenthashmapï¼Œå¤šçº¿ç¨‹ç›¸å…³çš„ThreadPoolï¼ŒThreadLoadï¼Œå¹¶å‘ç›¸å…³çš„Atomç±»ï¼ŒReentrantLock ç­‰ è¿™ä¸€å¹´æ–°çš„ä¸œè¥¿æ²¡æœ‰å­¦å¤ªå¤šï¼Œä¸è¿‡åŸºæœ¬ä¸ŠæŠŠè‡ªå·±å¹³æ—¶ç”¨çš„ä¸œè¥¿çš„åŸç†éƒ½å¼„æ‡‚äº†ï¼Œè™½ç„¶æ²¡æœ‰éƒ½çœŸæ­£å»çœ‹è¿‡æºç ï¼Œè‡³å°‘ç†è®ºçŸ¥è¯†è¿˜æ˜¯éƒ½äº†è§£äº†ä¸€äºŒã€‚ ç¬¬ä¸‰å¹´(2018.7 ~ 2019.7)è¿™ä¸€å¹´å…¶å®å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†æ¥è¯´ï¼Œå› ä¸ºç§ç§åŸå› ï¼Œæœ¬æ¥æ‰“ç®—è½¬å²—å›æˆéƒ½çš„ï¼Œç»“æœåé¢é˜´å·®é˜³é”™å°±è·‘åˆ°äº†æ­å·ï¼Œå»äº†é˜¿é‡Œï¼Œä½“éªŒäº†äººç”Ÿä¸­ç¬¬ä¸€æ¬¡è·³æ§½ï¼Œæ­£ç¡®ä¸å¦è‡³ä»Šä¸çŸ¥é“ï¼Œåªèƒ½è¯´è‡ªå·±çš„é€‰æ‹©è‡ªå·±è´Ÿè´£å§ã€‚ è·³æ§½æ˜¯åœ¨9æœˆä»½çš„æ—¶å€™ï¼Œæ‰€ä»¥è¿™ä¸€å¹´åœ¨ç‚¹è¯„çš„æ—¥å­åªæœ‰2ä¸ªå¤šæœˆå§ï¼Œè¿™æ®µæ—¶é—´å…¶å®ä¹Ÿæ²¡æ€ä¹ˆå­¦æ–°ä¸œè¥¿ï¼Œå°±å¬äº†å‡ ä¸ªåŒäº‹ä»¬çš„åˆ†äº«ï¼Œåƒpythonçˆ¬è™«ï¼Œæœç´¢å¼•æ“ï¼Œä»¥åŠguavaç›¸å…³çš„ä¸€äº›å·¥å…·ç±»ï¼Œè‡ªå·±ä¹Ÿå‡†å¤‡äº†ä¸€ä¸‹é¢è¯•çš„ä¸œè¥¿ã€‚ 9æœˆä¹‹åå°±å…¥èŒé˜¿é‡Œäº†ï¼Œåˆ°äº†é˜¿é‡Œä¹‹åæœ€å¼€å§‹æ„Ÿå—åˆ°çš„å°±æ˜¯æ‰€è°“çš„ä»·å€¼è§‚å§ï¼Œä»·å€¼è§‚è¿™ä¸ªä¸œè¥¿äººäººéƒ½åœ¨æï¼Œæˆ‘ä¹Ÿè§‰å¾—æ¯ä¸€æ¡éƒ½æŒºæœ‰é“ç†çš„ï¼Œä½†å°±æ˜¯ä¸çŸ¥é“åˆ°åº•æœ‰å¤šå°‘äººçœŸæ­£æŒ‰ç…§è¿™ä¸ªä»·å€¼è§‚åœ¨åšäº‹ï¼Œè‡³å°‘æˆ‘çœ‹åˆ°çš„æåˆ°ä»·å€¼è§‚çš„æ—¶å€™å¤§å¤šæ•°æ˜¯åœ¨æŠŠä»·å€¼è§‚å½“åšç®¡ç†å·¥å…·åœ¨ä½¿ç”¨ï¼ˆè¿™é‡Œæƒ³æ’ä¸€å¥æˆ‘å¯¹äºä¼ä¸šæ–‡åŒ–çš„æ€è€ƒï¼Œæˆ‘ä¸€ç›´è®¤ä¸ºä¼ä¸šæ–‡åŒ–ä¸æ˜¯å–Šä¸€äº›å£å·ï¼Œåšä¸€äº›æ¨ªå¹…å°±èƒ½æœ‰çš„ï¼ŒçœŸæ­£çš„æ–‡åŒ–åº”å½“æ˜¯å‘˜å·¥çš„æ—¥å¸¸çš„è¡Œä¸ºæ–¹å¼ï¼Œå› ä¸ºå‘˜å·¥ç»„æˆäº†å…¬å¸ï¼Œå‘˜å·¥çš„è¡Œä¸ºç»„æˆäº†å…¬å¸çš„è¡Œä¸ºï¼Œå…¬å¸çš„è¡Œä¸ºä¸­ä½“ç°å‡ºæ¥çš„æ‰æ˜¯çœŸæ­£çš„ä¼ä¸šæ–‡åŒ–ï¼‰ï¼Œéšåæ„Ÿå—åˆ°çš„å¯èƒ½å°±æ˜¯ç°åœ¨å¤§å®¶è€³ç†Ÿèƒ½è¯¦çš„â€ç¦æŠ¥â€ï¼Œä¸è¿‡å¯¹æˆ‘è€Œè¨€è¿˜å¥½ï¼Œä¹‹å‰åœ¨ç‚¹è¯„çš„æ—¶å€™åŸºæœ¬ä¸Šæ˜¯1065ï¼Œå¶å°”å¾…åˆ°8ç‚¹ç­‰ä¸€ä¸ªé¤è¡¥åœ¨èµ°ï¼Œåœ¨é˜¿é‡Œè¿™è¾¹é€šå¸¸æ˜¯1095ï¼Œå‘¨äº”é€šå¸¸6ç‚¹æˆ–è€…7ç‚¹å°±èµ°äº†ï¼Œæ‰€ä»¥å®é™…ä¸Šç­æ—¶é—´å·®ä¸å¤šï¼Œå”¯ä¸€æ¯”è¾ƒå‘çš„å°±æ˜¯æˆ‘ä»¬è¿™ä¸ªå›¢é˜Ÿç»å¸¸åŠå¤œå€¼ç­æˆ–è€…å¤§ä¿ƒå€¼ç­ï¼ŒåŠå¤œå€¼ç­å¯èƒ½å°±æ˜¯åˆ°æ™šä¸Š3ç‚¹å·¦å³ï¼Œå¤§ä¿ƒå€¼ç­å°±ç›´æ¥é€šå®µäº†ï¼Œå®å±æ‰›ä¸ä½ã€‚ åœ¨é˜¿é‡Œè¿™è¾¹åšäº‹æƒ…çš„æ–¹å¼å’Œåšçš„äº‹æƒ…ä¸ç‚¹è¯„éƒ½æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œæ¯”èµ·äº’è”ç½‘å…¬å¸æ¥è¯´ï¼Œæˆ‘ä»¬å›¢é˜Ÿè¿™è¾¹åšçš„äº‹æƒ…æ›´åƒæ˜¯ä¼ ç»ŸITä¼ä¸šï¼Œæˆ‘ä»¬å›¢é˜Ÿåœ¨æŠ€æœ¯æ–¹é¢åšçš„äº‹æƒ…ä¸»è¦å°±æ˜¯ç»´æŠ¤ä¸€ä¸ªç¦»çº¿æ•°æ®æ–‡ä»¶ï¼Œç„¶åæ¯å¤©å¯¹å…¨ç½‘å‡ ç™¾ä¸ªåº”ç”¨è¿›è¡Œæ¨é€ï¼Œè¿™ä¸ªç¦»çº¿æ–‡ä»¶å¯ä»¥çœ‹åšä¸€ä¸ªå°å‹åªè¯»æ•°æ®åº“ï¼ŒæŠ€æœ¯æ ˆçš„è¯å…¶å®æ²¡æœ‰å¤ªå¤šæ¢³ç†äº†ä¸€ä¸‹å¤§æ¦‚æœ‰ä¸€ä¸‹å‡ ä¸ªå§ï¼š nettyï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡ä»¥åŠæ–‡ä»¶ä¼ è¾“æ˜¯é€šè¿‡nettyæ¥åšçš„ï¼Œæ‰€ä»¥é¡ºä¾¿å­¦ä¹ äº†ä¸€ä¸‹nettyï¼Œå› ä¸ºNioè¿™ä¸ªæ¦‚å¿µå…¶å®ä¹‹å‰å°±å·²ç»äº†è§£äº†ï¼Œæ‰€ä»¥å­¦ä¹ nettyæ›´å¤§çš„æ”¶è·åº”è¯¥æ˜¯å…¶ä½¿ç”¨çš„SEDA(Staged Event-Driven Architecture)æ¶æ„,è¿™æ˜¯ä¹‹å‰æ²¡äº†è§£åˆ°çš„ä¸€ä¸ªç‚¹ java å†…å­˜æ˜ å°„ï¼Œå› ä¸ºç¦»çº¿æ–‡ä»¶çš„åŠ è½½æœ‰éƒ¨åˆ†æ•°æ®æ˜¯é‡‡ç”¨å†…å­˜æ˜ å°„çš„æ–¹å¼è¿›è¡ŒåŠ è½½çš„ï¼Œè¿™éƒ¨åˆ†æ˜¯ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡å¾—ä¸œè¥¿ï¼Œä¸è¿‡ç°åœ¨äº†è§£ä¹Ÿä¸æ˜¯å¾ˆæ·±ï¼ŒåªçŸ¥å…¶ç†è®ºåŸºç¡€æ˜¯åŸºäºzero copy sqliteï¼Œå› ä¸ºæœ‰éƒ¨åˆ†æ–‡ä»¶çš„å­˜å‚¨å½¢å¼æ˜¯sqliteï¼Œæ‰€ä»¥åˆå»äº†è§£äº†ä¸€ä¸‹sqliteçš„ä½¿ç”¨ï¼Œçœ‹äº†ä¸€ä¸‹sqlite-jdbcçš„æºç ï¼Œå› ä¸ºsqliteçš„æºç æ˜¯cå†™çš„æ‰€ä»¥æ²¡æ€ä¹ˆå»çœ‹ é™¤æ¬¡ä¹‹å¤–å°±æ˜¯å¯¹é˜¿é‡Œçš„ä¸­é—´ä»¶å­¦ä¹ ï¼Œå› ä¸ºä¹‹å‰åœ¨ç‚¹è¯„çš„æ—¶å€™å°±å·²ç»äº†è§£è¿‡æŒºå¤šä¸­é—´ä»¶çš„åŸç†äº†ï¼Œæ‰€ä»¥ä¸€äº›é‡å¤åŠŸèƒ½çš„ä¸­é—´ä»¶å°±æ²¡æœ‰å»çœ‹è¿‡äº†ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯çœ‹æ–°çš„ä¸­é—´ä»¶ï¼Œä¸è¿‡è¯´çœŸçš„ï¼Œåœ¨é˜¿é‡Œæœ€å¤§çš„å¤±æœ›å¯èƒ½å°±æ˜¯å®ƒçš„ä¸­é—´ä»¶å»ºè®¾äº†ï¼ŒæŠ€æœ¯å«é‡å› ä¸ºæ²¡æœ‰å»çœ‹è¿‡æºç æ‰€ä»¥ä¸è¯„ä»·ï¼Œä½†æ˜¯å°±ç”¨æˆ·ä½¿ç”¨ä½“éªŒæ¥è¯´ï¼Œæ„Ÿè§‰å·®äº†ç‚¹è¯„å‡ æ¡è¡—æŠŠï¼Œå§‹ç»ˆæœ‰ä¸€ç§å¤è€çš„æ„Ÿè§‰ï¼Œæ²¡æœ‰è·Ÿä¸Šæ—¶ä»£çš„å‘å±•ï¼Œå°±åƒæ˜¯åœ¨ä½¿ç”¨ä¸Šå¤ä»£ç ç¼–ç¨‹ï¼Œè€Œä¸”å†…éƒ¨çš„ä¸­é—´ä»¶å¤šä¸”æ‚ï¼ŒåŠŸèƒ½é‡å¤çš„å¤šï¼Œæ²¡äººç»´æŠ¤çš„ä¹ŸæŒºå¤šï¼ŒåŠæˆå“ä¸­é—´ä»¶ç”¨èµ·æ¥æœ‰å¤šç³Ÿå¿ƒæ‡‚çš„äººéƒ½æ‡‚ï¼Œå°±ä¸ç»†è¯´äº†ï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›æ„Ÿè§‰å¾ˆå¥½ç”¨çš„ä¸œè¥¿ï¼Œæ¯”å¦‚åœ¨å¤–é¢æ²¡æœ‰å¬è¯´è¿‡çš„ï¼š Pandoraï¼Œè¿™æ˜¯ä¸€ä¸ªç±»éš”ç¦»å®¹å™¨ï¼Œé€šå¸¸ä¸tomcatæˆ–è€…spring-bootæ­é…ä½¿ç”¨ï¼Œèƒ½å¤Ÿåšåˆ°äºŒæ–¹åŒ…çº§åˆ«çš„ç±»éš”ç¦»ï¼Œè¯¦ç»†ä¸€ç‚¹è¯´å°±æ˜¯é€šè¿‡ä¿®æ”¹ä¸åŒäºŒæ–¹åŒ…çš„ç±»åŠ è½½å™¨ä»è€Œå®ç°ï¼Œå½“ä¸åŒäºŒæ–¹åŒ…ä¸­åŒ…å«ç›¸åŒç±»çš„æ—¶å€™ï¼Œèƒ½å¤Ÿåšåˆ°è‡ªå·±å¼•ç”¨è‡ªå·±éœ€è¦çš„ç‰ˆæœ¬çš„ç±»ï¼Œä¸ä¼šä¸å…¶ä»–äºŒæ–¹åŒ…äº§ç”Ÿå†²çª å¦å¤–åœ¨é˜¿é‡Œè¿˜å­¦ä¼šäº†ä¸€äº›è½¯æŠ€èƒ½ï¼Œä¾‹å¦‚ï¼š ä¹‹å‰ä¸æ€ä¹ˆä¼šçš„ppt xmindä»¥åŠmarkdownä»¥åŠä¸€äº›ç”»å›¾å·¥å…· ç”šè‡³è¿˜å› ä¸ºå¹´ä¼šéœ€è¦å‰ªè§†é¢‘å­¦äº†ä¸€æ³¢pr ç¬¬å››å¹´(2019.7 ~ 2020.7)ä¹Ÿå°±æ˜¯ä»Šå¹´ï¼Œè¿™ä¸€å¹´åˆšå¥½ä¹Ÿæ˜¯è‡ªå·±25å²çš„ä¸€å¹´ï¼Œè‡ªå·±ä¹Ÿæƒ³äº†å¾ˆå¤šä¸œè¥¿ï¼ŒåŒ…æ‹¬æœªæ¥çš„äººç”Ÿè§„åˆ’å’Œå·¥ä½œæ–¹å‘è¿™äº›ï¼ŒåŒ…æ‹¬åˆ›ä¸šï¼Œå‡ºå›½ç•™å­¦ç­‰ï¼Œæ€»å¾—æ¥è¯´æ€è€ƒåœ°æ¯”è¾ƒå¤šã€‚ è¿™ä¸€å¹´çš„æŠ€æœ¯å­¦ä¹ åŸºæœ¬ä¸Šè½¬æ¢äº†æ–¹å‘ï¼Œå¤§ä½“ä¸Šåˆ†ä¸ºäº†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯åŸºç¡€å­¦ä¹ ï¼Œä¸€éƒ¨åˆ†æ˜¯æœªçŸ¥é¢†åŸŸæ¢ç´¢ åŸºç¡€å­¦ä¹ éƒ¨åˆ†ä¸»è¦æ˜¯ä¸€äº›åº•å±‚æŠ€æœ¯ï¼Œä¾‹å¦‚ï¼š ç¼–è¯‘åŸç† OSï¼Œlinux ç½‘ç»œï¼Œtcp/ip Jvm ç®—æ³• æœªçŸ¥é¢†åŸŸçš„å­¦ä¹ å°±æ¯”è¾ƒå¤šäº†ï¼Œç°åœ¨æ¯”è¾ƒç«ä½†æ˜¯è‡ªå·±åˆæ²¡æ€ä¹ˆäº†è§£çš„ä¸œè¥¿åŸºæœ¬ä¸Šéƒ½å»ç²—æµ…åœ°çœ‹äº†ä¸€éï¼Œä¾‹å¦‚ï¼š äº‘åŸç”Ÿ åŒºå—é“¾ dockerç›¸å…³çš„ è™šæ‹ŸæœºæŠ€æœ¯ï¼Œk8sç­‰ åŒserviceless ç›¸å…³çš„ service meshç­‰ï¼Œä¸è¿‡æ„Ÿè§‰service meshå¯¹äºå°å…¬å¸è€Œè¨€æ²¡å•¥ç”¨ï¼Œå¯¹å¤§å…¬å¸çš„ä½œç”¨è¿˜æœ‰å¾…æ—¶é—´éªŒè¯ spring ç›¸å…³çš„ï¼Œspring-bootï¼Œspring-cloudç­‰ go åç»­è¿˜æ‰“ç®—å­¦ä¹ ä¸€ä¸‹AIæ–¹é¢çš„çŸ¥è¯† é™¤äº†æŠ€æœ¯ä¹‹å¤–ï¼Œä»Šå¹´ä¸»è¦çš„å­¦ä¹ é‡å¿ƒæ˜¯åœ¨ä¸šåŠ¡é€»è¾‘å­¦ä¹ ä¸Šï¼Œä»Šå¹´çš„è®¡åˆ’æ˜¯æ‰“ç®—æŠŠä»å–å®¶ä¸Šæ¶å•†å“ï¼Œåˆ°ç”¨æˆ·è´­ä¹°å•†å“ï¼Œåœ¨åˆ°å•†å®¶å‘è´§ï¼Œç”¨æˆ·æ”¶è´§ï¼Œæ ¸é”€ç­‰æ•´ä¸ªé“¾è·¯çš„ä¸šåŠ¡æµç¨‹éƒ½äº†è§£ä¸€éï¼Œå¹¶ä¸”è¯¦ç»†äº†è§£å•†å®¶å‘å“é“¾è·¯ï¼ŒæŠŠåé¢å¯¹åº”çš„å•†å“æ¨¡å‹ï¼Œäº§å“æ¨¡å‹ï¼Œç±»ç›®æ¨¡å‹éƒ½æé€å½» å…¬å¸ç»å†ç¾å›¢ç‚¹è¯„(2016 ~ 2018)åœ¨ç¾å›¢ç‚¹è¯„çš„å·¥ä½œæ–¹å¼æ˜¯é‡‡ç”¨çš„æ•æ·å¼€å‘ï¼Œé€šå¸¸æ˜¯ä¸€å‘¨ä¸€ä¸ªè¿­ä»£ï¼Œå…·ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š åœ¨ç‚¹è¯„ä¸€ä¸ªå‚ç›´ä¸šåŠ¡ä¸­å¯èƒ½ä¼šæ¶‰åŠåˆ°7ä¸ªä»¥ä¸Šå›¢é˜Ÿï¼Œåˆ†åˆ«ä¸ºé”€å”®å›¢é˜Ÿï¼Œè¿è¥å›¢é˜Ÿï¼Œäº§å“å›¢é˜Ÿï¼Œè§†è§‰å›¢é˜Ÿï¼Œåç«¯å¼€å‘å›¢é˜Ÿï¼Œå‰ç«¯å¼€å‘å›¢é˜Ÿï¼Œæµ‹è¯•å›¢é˜Ÿç­‰ï¼Œæ¯ä¸ªå›¢é˜Ÿåœ¨ç»„ç»‡æ¶æ„ä¸Šéƒ½æ˜¯åˆ†å¼€çš„ï¼Œåˆ†åˆ«ç”±å„è‡ªå›¢é˜Ÿçš„ä¸Šçº§ç®¡ç†ï¼Œä½†åœ¨è¿™ä¸ªå‚ç›´ä¸šåŠ¡ä¸­æ˜¯å¯ä»¥çœ‹åšä¸€ä¸ªæ•´ä½“çš„ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šæœ‰å˜åŠ¨ï¼Œé€šå¸¸çš„å·¥ä½œæ–¹å¼æ˜¯é”€å”®ç­¾å•æ¨å¹¿ï¼Œè¿è¥è¿è¥ï¼Œäº§å“ç»ç†åšå¸‚åœºè°ƒç ”ä»å¸‚åœºæˆ–è€…é”€å”®å’Œè¿è¥å¤„æ”¶é›†éœ€æ±‚ç„¶ååŒå¼€å‘å›¢é˜Ÿè¿›è¡Œæ²Ÿé€šï¼Œç¡®å®šåŠŸèƒ½ç»†èŠ‚å’Œä¸Šçº¿æ—¶é—´ã€‚ æ¯å‘¨äº”äº§å“ç»ç†ä¼šçº¦ä¼šåŒæŠ€æœ¯äººå‘˜(å‰åç«¯å¼€å‘ + æµ‹è¯•)åšéœ€æ±‚è¯„å®¡ï¼Œäº§å“å±•ç¤ºprdï¼ŒæŠ€æœ¯åŒå­¦è¯„ä¼°æŠ€æœ¯å¯è¡Œæ€§ï¼Œå¹¶å°†éœ€æ±‚è¿›è¡Œæ‹†åˆ†ï¼Œç»™å‡ºæ¯ä¸ªä»»åŠ¡æ‰€éœ€å…·ä½“å·¥æ—¶ æ¯å‘¨ä¸€æŠ€æœ¯åŒå­¦ä¼šå¼€ä¼šè®¤é¢†ä¸Šé¢éœ€æ±‚ï¼Œæ¯ä¸ªäººçš„å·¥æ—¶æŒ‰ç…§ä¸€å¤©6å°æ—¶ï¼Œä¸€å‘¨4å¤©è®¡ç®—ï¼Œæ¯ä¸ªäººä¼šè®¤é¢†å·®ä¸å¤š24ä¸ªå·¥æ—¶çš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å°±æ˜¯æœ¬å‘¨çš„ä¸»è¦å·¥ä½œã€‚ æ¯å¤©æ—©ä¸Š10ç‚¹å·¦å³ä¼šå¼€ä¸€ä¸ªç«™ç«‹ä¼šï¼Œæ¯ä¸ªäººç”¨å‡ åˆ†é’Ÿæ—¶é—´åŒæ­¥è‡ªå·±æ˜¨å¤©çš„è¿›åº¦æˆ–æ˜¯é‡åˆ°çš„å›°éš¾ï¼Œä»¥åŠä»Šå¤©è¦åšçš„ä»»åŠ¡ åœ¨å¼€å‘å¼€å‘å®Œä¹‹åï¼Œå°±æ˜¯å‰åç«¯åŒå­¦è”è°ƒï¼Œè”è°ƒé€šè¿‡åè‡ªæµ‹ï¼Œè‡ªæµ‹å®Œæˆåæäº¤ç»™æµ‹è¯•åŒå­¦æµ‹è¯•ï¼Œæµ‹è¯•åŒå­¦æµ‹è¯•æ— è¯¯ä¹‹åï¼Œç”±äº§å“å’Œè§†è§‰åŒå­¦è¿›è¡Œuatï¼Œuaté€šè¿‡åå°±ä¸Šçº¿ é™¤æ­¤ä¹‹å¤–ï¼Œä¹‹å‰æ‰€åœ¨çš„teamè¿˜æœ‰ä¸€ä¸ªä¼ ç»Ÿå°±æ˜¯æŠ€æœ¯åˆ†äº«ï¼Œæ¯å‘¨ä¼šé€‰æ‹©ä¸€ä¸ªå¤§å®¶éƒ½æœ‰ç©ºçš„æ—¶é—´æ®µ(å¤§å¤šæ•°æƒ…å†µæ˜¯ä¸‹åˆ14ç‚¹ä¹‹åçš„æŸä¸ªæ—¶é—´ç‚¹)å¤§å®¶ä¸€èµ·æ”¾ä¸‹æ‰‹ä¸Šçš„æ´»å»å‚åŠ ä¸€ä¸ªæŠ€æœ¯åˆ†äº«ï¼Œåˆ†äº«æ˜¯é€šè¿‡è‡ªæ„¿æŠ¥åçš„æ–¹å¼ï¼Œé€šå¸¸éœ€è¦æå‰ä¸€å‘¨æŠ¥åï¼Œç„¶åå‘ŠçŸ¥å¤§å®¶ä¸‹å‘¨è¦åˆ†äº«çš„å†…å®¹ï¼Œç„¶åå¤§å®¶ä¼šå…ˆå»äº†è§£ä¸€ä¸‹ç›¸å…³å†…å®¹çš„å‰ç½®çŸ¥è¯†ç‚¹ï¼Œåˆ†äº«å†…å®¹ä¸å®šï¼Œå¯ä»¥æ˜¯ä»»ä½•è‡ªå·±ä¼šçš„ä¸œè¥¿ã€‚ åœ¨ç‚¹è¯„çš„æ—¥å­è¿‡å¾—æ¯”è¾ƒè½»æ¾ï¼Œè€Œä¸”åŒäº‹ä»¬ä¹‹é—´çš„æ°›å›´ä¹Ÿéƒ½å¾ˆå¥½ï¼Œç°åœ¨æƒ³æ¥å¯èƒ½è¿™æ®µç»å†æœ€å¤§çš„æ”¶è·é™¤äº†å…¥é—¨äº†ç å†œè¿™ä¸ªèŒä¸šä¹‹å¤–ï¼Œå°±æ˜¯è®¤è¯†äº†ä¸€ç¾¤å·¥ä½œä¸Šçš„åŒäº‹ï¼Œç”Ÿæ´»ä¸Šçš„æœ‹å‹å§ï¼Œä¸å¾—ä¸è¯´ç‚¹è¯„çš„åŒäº‹ä»¬æé«˜äº†æˆ‘å¯¹åŒäº‹å…³ç³»çš„æœŸæœ›å€¼ï¼Œé™ä½äº†æˆ‘å¯¹åŒäº‹çš„å®¹å¿åº¦ã€‚ é˜¿é‡Œå·´å·´(2018 ~ 2020)åœ¨é˜¿é‡Œçš„å·¥ä½œæ–¹å¼ï¼Œæ›´å¤šåœ°æ˜¯ç±»ä¼¼ä¼ ç»Ÿä¼ä¸šï¼Œç±»ä¼¼ç€‘å¸ƒæµé‚£æ ·ï¼Œè€Œä¸”ç°åœ¨åšçš„æ˜¯ä¸­å°æ‰€ä»¥æ¥è§¦çš„å›¢é˜Ÿä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šäº†ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯è‡ªå·±å›¢é˜Ÿé‡Œé¢åœ¨ç©ã€‚ é˜¿é‡Œè¿™è¾¹kpiæ¯”è¾ƒé‡ï¼Œæ‰€ä»¥æ¯ä¸ªäººçš„å·¥ä½œåŸºæœ¬ä¸Šæ˜¯å›´ç»•ç€KPIå±•å¼€çš„ï¼Œåœ¨æ¯ä¸ªSå¼€å§‹çš„æ—¶å€™ï¼Œæ¯ä¸ªäººéƒ½è¦åŒleaderå®šä¸‹è‡ªå·±çš„KPIè€ƒæ ¸é¡¹å’Œç›®æ ‡å®Œæˆåº¦ï¼Œç„¶åæ¥ä¸‹æ¥çš„åŠå¹´ï¼Œå°±å›´ç»•ç€è¿™äº›kpié¡¹å¼€å§‹åšäº‹æƒ…ã€‚ é€šå¸¸ä¸€ä¸ªé¡¹ç›®ä¸Šçº¿çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼Œå›¢é˜Ÿå†…éƒ¨è‡ªå·±æå‡ºéœ€æ±‚æˆ–è€…å¤–éƒ¨å›¢é˜Ÿéœ€è¦æ”¯æŒæå‡ºéœ€æ±‚(ç°åœ¨å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯å›¢é˜Ÿå†…éƒ¨è‡ªå·±æƒ³çš„éœ€æ±‚),éšåé€‰å‡ºä¸€ä¸ªäººåšé¡¹ç›®pmï¼Œå†é€‰å‡ ä¸ªäººä½œä¸ºå¼€å‘èµ„æºï¼Œéšåpmåˆ†è§£é¡¹ç›®ï¼ŒæŠŠä»»åŠ¡åˆ†é…ç»™æ¯ä¸ªäººï¼Œç„¶åå®šå¥½é˜¶æ®µé‡Œç¨‹ç¢‘ï¼Œéšåå°±æ˜¯å¼€å‘äººå‘˜å¼€å‘ï¼Œåˆ°é¡¹ç›®èŠ‚ç‚¹çš„æ—¶å€™è¿›è¡ŒéªŒæ”¶ï¼Œå¼€å‘å®Œæˆä¹‹åå°±æ˜¯è‡ªæµ‹(å› ä¸ºé˜¿é‡Œè¿™è¾¹çš„æµ‹è¯•äººå‘˜å«åšæµ‹è¯•å¼€å‘ï¼Œè‡ªå·±ä¹Ÿè¦å¼€å‘ä¸œè¥¿å®Œæˆkpiï¼Œæ‰€ä»¥å¾ˆå°‘ä¼šæ¥å¸®æˆ‘ä»¬æµ‹è¯•)ï¼Œä¸Šçº¿ï¼Œè¿™ä¸ªè¿‡ç¨‹é€šå¸¸ä¼šæŒç»­å‡ ä¸ªæœˆã€‚ è¿™ä¸­é—´æœ‰ä¸ªä¸çŸ¥é“æ˜¯ä¸æ˜¯é˜¿é‡Œç‰¹è‰²çš„ä¸œè¥¿ï¼Œå°±æ˜¯åœ¨é¡¹ç›®å¼€å§‹ä¹‹å‰çº¦ä¸Šå„ä¸ªä¸šåŠ¡æ–¹çš„è€æ¿æä¸€ä¸ªç››å¤§çš„kick offï¼Œä¸€ç›´æ²¡èƒ½æ˜ç™½æ„ä¹‰ä½•åœ¨ã€‚]]></content>
      <categories>
        <category>å·¥ä½œ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è°ˆè°ˆB-Tree å’Œ B+Tree]]></title>
    <url>%2F2020%2F02%2F22%2FBTree%2F</url>
    <content type="text"><![CDATA[è°ˆè°ˆB-Tree å’Œ B+Treeå‰è¨€å‘¨æœ«åœ¨çœ‹ã€ŠHigh Performance Mysqlã€‹ï¼ˆä¸­æ–‡è¯‘ä¸ºã€Šé«˜æ€§èƒ½Mysqlã€‹ï¼‰ä¸€ä¹¦çš„æ—¶å€™ï¼Œåœ¨indexéƒ¨åˆ†çœ‹åˆ°äº†B-Treeçš„æ¦‚å¿µï¼Œå®é™…ä¸Šè¿™ä¸ªåè¯äºæˆ‘è€Œè¨€å¹¶ä¸é™Œç”Ÿï¼Œæ¯•ç«Ÿä¹‹å‰ä¸ºäº†åº”ä»˜é¢è¯•çš„æ—¶å€™ç¿»è¿‡å¾ˆå¤šåšå®¢ï¼Œä½†ä»Šå¤©å†æ¬¡çœ‹åˆ°è¿™ä¸ªåè¯æ—¶çªç„¶å›å¿†ä¸èµ·æ¥B-Treeåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿äº†ï¼Œäºæ˜¯ç”¨åº¦å¨˜å»æœäº†ä¸€ä¸‹ï¼Œç»“æœæœå‡ºæ¥çš„å®šä¹‰åƒå¥‡ç™¾æ€ªï¼ˆä¸­æ–‡ç¤¾åŒºé‡Œé¢çœŸçš„æ˜¯ä¸€å †é”™è¯¯æ–‡ç« æŠ„æ¥æŠ„å»ï¼Œç”šè‡³æœ‰äººè¯´B-Treeæ˜¯Balance Binary Treeï¼Œè¿˜å‡è£…å¾ˆæ‡‚çš„è¯´ä½œè€…æ˜¯Adelson-Velskiiå’ŒLandisï¼Œçœ‹å¾—æˆ‘ä¸€è„¸æ‡µé€¼ï¼Œä½ è¿™æ ·è®©AVL-Treeæƒ…ä½•ä»¥å ªï¼Ÿï¼‰ï¼Œåé¢åˆå»å¤–ç½‘æœäº†ä¸€ä¸‹ï¼Œä¹Ÿå‘ç°æŒºå¤šä¸ä¸€æ ·çš„å®šä¹‰çš„ï¼ŒçœŸçš„æ˜¯è¶Šçœ‹è¶Šä¸æ‡‚äº†ï¼Œåé¢æ²¡åŠæ³•äº†å°±ç›´æ¥æ‰¾åˆ°äº†åŸä½œè€…R. BAYER and E. MCCREIGHT1971å¹´å‘å¸ƒçš„è®ºæ–‡çœ‹äº†ä¸€éï¼Œç®—æ˜¯çœŸçš„å»äº†è§£äº†ä¸€ä¸‹è¿™ä¸ªæ•°æ®ç»“æ„ã€‚ ä»€ä¹ˆæ˜¯B-Treeå…³äºB-Treeè¿™ä¸ªåè¯çš„è¯´æ˜é¦–å…ˆB-Treeè¿™ä¸ªåè¯æ˜¯åœ¨R. BAYER and E. MCCREIGHT 1971å¹´å‘å¸ƒçš„ä¸€ç¯‡æ–‡ç« ã€ŠOrganization and Maintenance of Large Ordered Indexesã€‹ä¸­æåˆ°çš„,åŸæ–‡å¦‚ä¸‹ï¼š The pages of the index are organized in a special datastructure, so-called B-trees. çœ‹åˆ°äº†å§ï¼Œè™½ç„¶B-Treeç¡®å®æ˜¯ä¸€é¢—è‡ªå¹³è¡¡çš„æ ‘ä½†æ˜¯B-Treeçš„å…¨åå°±æ˜¯â€B-Treeâ€,è€Œä¸æ˜¯ä»€ä¹ˆBalanced Treeä¹‹ç±»çš„ç¼©å†™ï¼Œå¯ä»¥è¯´Balanced TreeåŒ…å«B-treeä½†ä¸ä»…ä»…åªæœ‰b-tree ps:å…¶å®æˆ‘æ›´è§‰å¾—è¿™ä¸ªBæ˜¯ä½œè€… R. BAYER çš„ç¼©å†™ B-Tree çš„å®šä¹‰åœ¨æ–‡ç« ä¸­ï¼ŒB-treeçš„å®šä¹‰å¦‚ä¸‹ï¼š å‡å®šhä¸ºå¤§äºç­‰äº0çš„æ•´æ•°ï¼Œkä¸ºä¸€ä¸ªè‡ªç„¶æ•°ï¼Œé‚£ä¹ˆæ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ‰å‘æ ‘T (T âˆˆ Ï„(k,h) )å°±è¢«ç§°ä¸ºB-Treeï¼š æ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦éƒ½ç›¸åŒï¼Œä¸”è¯¥è·¯å¾„èŠ‚ç‚¹æ•°ä¸ºh é™¤æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ä¹‹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è‡³å°‘åŒ…å«k+1ä¸ªå­èŠ‚ç‚¹ï¼›å¯¹äºæ ¹èŠ‚ç‚¹è€Œè¨€è¦ä¹ˆå®ƒåŒæ—¶ä¹Ÿæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆè‡³å°‘åŒ…å«2ä¸ªå­èŠ‚ç‚¹ æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«2k + 1ä¸ªå­èŠ‚ç‚¹ æ˜¯çš„ä½ æ²¡çœ‹é”™ï¼Œä»¥ä¸Šå°±æ˜¯B-Treeçš„å®Œæ•´åŸå§‹å®šä¹‰ï¼Œå°±æ˜¯è¿™ä¹ˆç®€æ´ï¼Œæ²¡æœ‰ä»€ä¹ˆèŠ±é‡Œèƒ¡å“¨çš„mé˜¶cell(m/2)ä¹‹ç±»çš„ä¸œè¥¿ B-Treeåœ¨ç´¢å¼•å­˜å‚¨ä¸Šçš„ä½¿ç”¨åœ¨ä¸Šè¿°å®šä¹‰çš„åŸºç¡€ä¸Šï¼Œå½“ä½¿ç”¨B-Treeçš„èŠ‚ç‚¹ä½œä¸ºç´¢å¼•å‚¨å­˜çš„é¡µçš„æ—¶å€™ï¼ŒB-treeè¿˜ä¼šæœ‰ä»¥ä¸‹æ€§è´¨ï¼š é™¤äº†æ ¹é¡µèŠ‚ç‚¹èƒ½ä¿å­˜çš„keyçš„ä¸ªæ•°èŒƒå›´ä¸º1~2kä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰é¡µèŠ‚ç‚¹èƒ½ä¿å­˜çš„keyçš„ä¸ªæ•°çš„èŒƒå›´ä¸ºk~2k å‡å®šä¸€ä¸ªéå¶å­é¡µèŠ‚ç‚¹ä¸ºPï¼Œå¹¶ä¸”è¯¥èŠ‚ç‚¹ä¸Šä¿å­˜çš„keyçš„ä¸ªæ•°ä¸ºlï¼Œé‚£ä¹ˆæ­¤èŠ‚ç‚¹ä¸Šä¼šæœ‰l+1ä¸ªå­èŠ‚ç‚¹ åœ¨é¡µèŠ‚ç‚¹P ä¸­çš„æ‰€æœ‰keyéƒ½æ˜¯å•è°ƒé€’å¢çš„ï¼Œå½¢å¦‚:x0,x1,x2,â€¦â€¦,xl;k &lt;= l &lt;= 2k,è‹¥Pä¸ºæ ¹èŠ‚ç‚¹çš„è¯åˆ™ï¼š1 &lt;= l &lt;= 2kï¼Œæ­¤å¤–åœ¨Pä¸­è¿˜ä¼šåŒ…å«l + 1ä¸ªæŒ‡é’ˆç”¨äºæŒ‡å‘Pçš„å­èŠ‚ç‚¹ï¼Œè¿™äº›æŒ‡é’ˆç”¨p0,p1,â€¦â€¦,plè¡¨ç¤ºã€‚ ç”¨äºå­˜å‚¨ç´¢å¼•çš„ä¸€é¡µï¼ŒåŒæ—¶ä¹Ÿæ˜¯B-Treeçš„ä¸€ä¸ªèŠ‚ç‚¹Pçš„å†…éƒ¨ç»“æ„å¤§æ¦‚é•¿å¾—åƒä¸‹é¢è¿™æ ·ï¼š å¼•ç”¨ä¸€ä¸‹è®ºæ–‡ä¸­çš„å›¾ p0,(x1,p1),(x2,p2),â€¦..(xl,pl) å›¾ä¸­çš„p0æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ‰€æœ‰keyéƒ½å°äºx1çš„èŠ‚ç‚¹ï¼Œéšåå°±æ˜¯ç´¢å¼•é‡Œé¢åŒ…å«çš„å€¼x1ï¼Œç„¶åæ˜¯x1é™„å¸¦çš„ä¸€äº›é™„åŠ ä¿¡æ¯Î±1ï¼Œéšåæ˜¯æŒ‡é’ˆp1æŒ‡å‘æ‰€æœ‰keyéƒ½å¤§äºç­‰äºx1ï¼Œä½†å°äºç­‰äºx2çš„èŠ‚ç‚¹â€¦â€¦,æœ€åæ˜¯ä¸ªæŒ‡é’ˆplï¼ŒæŒ‡å‘æ‰€æœ‰keyéƒ½å¤§äºxlçš„èŠ‚ç‚¹ï¼Œäº†è§£äº†è¿™ç§ç»“æ„ä¹‹åå°±èƒ½çŸ¥é“ä¸ºä»€ä¹ˆä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šåªèƒ½ä¿å­˜2kä¸ªkey:å› ä¸ºæŒ‡é’ˆæ•°ä¼šç­‰äºå­èŠ‚ç‚¹æ•°ç­‰äº2k+1ï¼Œè€Œkeyçš„ä¸ªæ•°ä¼šæ˜¯æŒ‡é’ˆæ•°-1 B-Treeæ”¯æŒçš„åŸºæœ¬æ“ä½œæŸ¥æ‰¾å¯¹äºB-Treeæ¥è¯´æŸ¥æ‰¾æ˜¯æ¯”è¾ƒç®€å•çš„ä¸€ä¸ªæ“ä½œï¼Œæˆ‘ä»¬å‡å®šè¦æŸ¥çš„key ä¸º yï¼Œå½“å‰é¡µä¸ºP æŸ¥è¯¢è¿‡ç¨‹ç”¨è¯­è¨€æ¥æè¿°å°±æ˜¯ï¼š äºŒåˆ†æŸ¥æ‰¾yåœ¨ Pä¸­æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨åˆ™ç›´æ¥è¿”å› è‹¥yåœ¨Pä¸å­˜åœ¨ï¼Œå¹¶ä¸”Pä¸ºå¶å­èŠ‚ç‚¹ï¼Œåˆ™è¿”å›ä¸å­˜åœ¨ è‹¥yåœ¨Pä¸å­˜åœ¨ï¼Œå¹¶ä¸”Pä¸ä¸ºå¶å­èŠ‚ç‚¹ï¼Œåˆ™è¿›å…¥Pçš„å­èŠ‚ç‚¹ï¼Œè¯¥å­èŠ‚ç‚¹çš„æŒ‡é’ˆä¸ºpiï¼Œæ»¡è¶³xi-1 &lt; y &lt; xi+1 æ’å…¥æ’å…¥æ“ä½œçš„é€»è¾‘å…¶å®å¾ˆè‡ªç„¶è€Œç„¶å°±èƒ½æƒ³åˆ°ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å‡è®¾éœ€è¦æ’å…¥çš„å…ƒç´ ä¸ºeï¼Œé‚£ä¹ˆåœ¨ä¸è€ƒè™‘å¹³è¡¡æ€§çš„æƒ…å†µä¸‹ï¼Œæ’å…¥é€»è¾‘åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š åˆ©ç”¨ä¸Šé¢æŸ¥æ‰¾çš„é€»è¾‘ï¼ŒæŸ¥æ‰¾å½“å‰Btreeä¸­æœ‰æ— å·²å­˜åœ¨çš„e è‹¥æœ‰ï¼Œç›´æ¥è¿”å›æ’å…¥æˆåŠŸ è‹¥æ— ï¼Œåˆ™åœ¨æœç´¢åˆ°æœ€åä¸€æ­¥çš„å¶å­é¡µä¸­æ’å…¥e é‚£ä¹ˆä¸Šé¢çš„é€»è¾‘æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¶å­é¡µçš„å…ƒç´ ä¸ªæ•°æœ‰å¯èƒ½è¶…è¿‡2kï¼Œè¿™åœ¨Btreeçš„å®šä¹‰ä¸­æ˜¯ä¸è¢«å…è®¸çš„ï¼Œé‚£ä¹ˆä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±è¿˜éœ€è¦åšä¸€æ­¥æ“ä½œï¼šé¡µåˆ†è£‚ é¡µåˆ†è£‚æ‰€è°“çš„é¡µåˆ†è£‚å°±æ˜¯æŠŠä¸€ä¸ªæ‹¥æœ‰2k + 1ä¸ªå…ƒç´ çš„é¡µè¿›è¡Œåˆ†è£‚ï¼Œäº§å‡ºä¸€ä¸ªå¸¦çˆ¶èŠ‚ç‚¹çš„æ–°é¡µï¼Œåˆ†è£‚ä¹‹ååŸæ¥çš„é¡µä¸­ä¿ç•™å‰kä¸ªå…ƒç´ ï¼Œåˆ†è£‚å‡ºæ¥çš„é¡µä¸­ä¿ç•™åkä¸ªå…ƒç´ ï¼ŒåŒæ—¶åˆ†è£‚å‰åŸé¡µä¸­çš„ç¬¬k+1ä¸ªå…ƒç´ ä¼šä½œä¸ºåˆ†è£‚å‡ºæ¥çš„é¡µçš„çˆ¶èŠ‚ç‚¹ã€‚ å°±ä¸Šè¿°é€»è¾‘ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾åŸæ¥çš„å¶å­èŠ‚ç‚¹ä¸ºP,Pä¸­æœ‰2kä¸ªæ•°æ®ï¼ŒPçš„çˆ¶é¡µä¸ºQï¼Œé‚£ä¹ˆè¯¥Pä¸­çš„æ•°æ®å­˜å‚¨æƒ…å†µåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š p0,(x1,p1),(x2,p2),â€¦..(x2k,p2k) å½“æ’å…¥äº†eä¹‹åï¼Œç°åœ¨çš„Pä¼šé•¿è¿™æ ·ï¼š p0,(x1,p1),(x2,p2),â€¦..,(xk+1,pk+1),â€¦â€¦(x2k+1,p2k+1) è¿›è¡Œé¡µåˆ†è£‚æ“ä½œä¹‹åï¼ŒPä¼šé•¿è¿™æ ·ï¼š p0,(x1,p1),(x2,p2),â€¦..,(xk,pk) äº§ç”Ÿçš„æ–°é¡µæˆ‘ä»¬å‡è®¾ä¸ºPâ€™ï¼ŒPâ€™é•¿è¿™æ ·ï¼š pk+1,(xk+2,pk+2),(xk+3,pk+3),â€¦..,(x2k,p2k) åŒæ—¶Pâ€™çš„çˆ¶èŠ‚ç‚¹ä¸ºï¼š (xk+1,pâ€™) å…¶ä¸­pâ€˜æŒ‡å‘çš„é¡µå°±æ˜¯äº§ç”Ÿçš„æ–°é¡µPâ€™ï¼ŒéšåæŠŠæ­¤èŠ‚ç‚¹å†æ’å…¥Pçš„çˆ¶é¡µQä¸­ï¼Œè¿™æ ·ä¸€æ¬¡å®Œæ•´çš„é¡µåˆ†è£‚æ“ä½œå°±åšå®Œäº†ã€‚ æ‰€ä»¥ï¼Œå®Œæ•´ç‰ˆçš„æ’å…¥é€»è¾‘å¦‚ä¸‹ï¼š åˆ©ç”¨ä¸Šé¢æŸ¥æ‰¾çš„é€»è¾‘ï¼ŒæŸ¥æ‰¾å½“å‰Btreeä¸­æœ‰æ— å·²å­˜åœ¨çš„e è‹¥æœ‰ï¼Œç›´æ¥è¿”å›æ’å…¥æˆåŠŸ è‹¥æ— ï¼Œåˆ™åœ¨æœç´¢åˆ°æœ€åä¸€æ­¥çš„å¶å­é¡µä¸­æ’å…¥e æ’å…¥eåå¶å­é¡µå…ƒç´ ä¸ªæ•°æ²¡æœ‰è¶…è¿‡2kï¼Œæ’å…¥ç»“æŸ æ’å…¥eåå¶å­é¡µå…ƒç´ ä¸ªæ•°è¶…è¿‡2kï¼Œæ‰§è¡Œé¡µåˆ†è£‚ï¼Œå¹¶å‘ä¸Šé€’å½’ åˆ é™¤å…³äºåˆ é™¤ï¼Œä¸è€ƒè™‘å¹³è¡¡æ€§çš„è¯åŒæ ·å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ä¸€ä¸ªæœ´ç´ çš„æ“ä½œåŠæ³•ï¼Œæµç¨‹å¦‚ä¸‹ï¼š åˆ©ç”¨ä¸Šé¢æŸ¥æ‰¾çš„é€»è¾‘ï¼ŒæŸ¥æ‰¾å½“å‰Btreeä¸­æœ‰æ— å·²å­˜åœ¨çš„e è‹¥æ— ï¼Œç›´æ¥è¿”å›åˆ é™¤æˆåŠŸ è‹¥æœ‰ï¼Œç›´æ¥åˆ é™¤è¯¥å…ƒç´  é‚£ä¹ˆè¿™ä¸ªæ“ä½œæµç¨‹è‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼Œé—®é¢˜å°±å‡ºåœ¨åˆ é™¤å…ƒç´ ä¸Šï¼Œä¸€å…±æœ‰ä¸¤ä¸ªé—®é¢˜: è‹¥è¯¥å…ƒç´ ä¸åœ¨å¶å­é¡µä¸Šï¼Œé‚£ä¸€æ—¦è¯¥å…ƒç´ è¢«åˆ é™¤äº†ï¼Œé‚£è¯¥å…ƒç´ æŒ‡å‘çš„å­é¡µæ€ä¹ˆåŠï¼Ÿ è‹¥è¯¥å…ƒç´ åœ¨å¶å­é¡µä¸Šï¼Œé‚£ä¹ˆä¸€æ—¦å¶å­é¡µä¸­çš„å…ƒç´ ä¸ªæ•°è¢«åˆ è‡³ä½äºkä¸ªäº†ï¼Œæ€ä¹ˆåŠï¼Ÿ ç¬¬ä¸€ä¸ªé—®é¢˜æ¯”è¾ƒå¥½è§£å†³ï¼Œå¦‚æœè¯¥å…ƒç´ ä¸åœ¨å¶å­èŠ‚ç‚¹ä¸Šçš„è¯ï¼Œå°±å°†è¯¥å…ƒç´ ä¸å®ƒçš„å³å­èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œç›´åˆ°äº¤æ¢è‡³å¶å­èŠ‚ç‚¹ã€‚ è¦è§£å†³ç¬¬äºŒä¸ªé—®é¢˜çš„è¯å°±éœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„æ“ä½œï¼šé¡µåˆå¹¶ é¡µåˆå¹¶é¡µåˆå¹¶å°±æ˜¯æŒ‡æŠŠä¸¤ä¸ªå…„å¼Ÿé¡µåˆå¹¶ä¸ºä¸€ä¸ªé¡µçš„æ“ä½œï¼Œå…·ä½“æ€ä¹ˆæ“ä½œï¼Œæˆ‘ä»¬ç­‰ä¼šç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼Œç°åœ¨å…ˆçº¦å®šä¸€äº›åè¯ï¼Œå‡è®¾é¡µQä¸­çš„å…ƒç´ eçš„å·¦æŒ‡é’ˆæŒ‡å‘é¡µPï¼Œå³æŒ‡é’ˆæŒ‡å‘é¡µPâ€™,é‚£ä¹ˆPå’ŒPâ€™å°±è¢«ç§°ä¸ºå…„å¼Ÿé¡µï¼Œé¡µåˆå¹¶æ“ä½œéƒ½æ˜¯åœ¨å…„å¼Ÿé¡µä¹‹é—´è¿›è¡Œçš„ï¼ŒåŒæ—¶é¡µåˆå¹¶ä¹Ÿæœ‰ä¸¤ç§æ“ä½œï¼Œåˆ†åˆ«è¢«ç§°ä¸ºCatenationå’ŒUnderflow CatenationCatenationå‘ç”Ÿåœ¨ä¸¤ä¸ªå…„å¼Ÿé¡µä¸­çš„å…ƒç´ ä¹‹å’Œå°äº2Kçš„æƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µåªéœ€è¦æŠŠçˆ¶é¡µä¸­çš„å…ƒç´ eç»™åˆ æ‰ï¼Œç„¶åç”¨eä½œä¸ºè¿æ¥å…ƒç´ å°†Pâ€™ä¸­çš„æ‰€æœ‰å…ƒç´ åˆå¹¶è‡³Pä¸­ï¼Œéšååˆ é™¤æ‰é¡µPâ€™,ç”¨å›¾è¡¨ç¤ºå¦‚ä¸‹ï¼š åˆå¹¶å‰ï¼š åˆå¹¶åï¼š å½“ç„¶çˆ¶èŠ‚ç‚¹ä¸­çš„å…ƒç´ è¢«åˆ æ‰ä¹‹åä¹Ÿå¯èƒ½å‡ºç°å…ƒç´ ä¸ªæ•°å°äºkçš„æƒ…å†µï¼Œæ‰€ä»¥ä¸€æ—¦æ‰§è¡Œäº†Catenationæ“ä½œï¼Œå¿…é¡»è¦å‘ä¸Šé€’å½’æ‰§è¡Œé¡µåˆå¹¶æ“ä½œ UnderflowUnderflowå‘ç”Ÿåœ¨ä¸¤ä¸ªå…„å¼Ÿé¡µä¸­çš„å…ƒç´ ä¹‹å’Œå¤§äºç­‰äº2kçš„æƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆè¿˜æ˜¯å…ˆå¯¹è¿™ä¸¤ä¸ªé¡µåšä¸€éCatenationæ“ä½œï¼Œç°åœ¨Pä¸­çš„å…ƒç´ ä¸ªæ•°å°±ä¸€å®šæ˜¯å¤§äºç­‰äº2k + 1äº†ï¼Œéšåæˆ‘ä»¬å†å¯¹Pæ‰§è¡Œä¸€éé¡µåˆ†è£‚æ“ä½œå³å¯ã€‚ è™½ç„¶é¡µåˆ†è£‚æ“ä½œä¼šå‘çˆ¶é¡µä¸­æ’å…¥ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯ç”±äºåœ¨æ‰§è¡Œé¡µåˆ†è£‚æ“ä½œå‰æˆ‘ä»¬å°±ä»çˆ¶é¡µä¸­åˆ é™¤äº†ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥çˆ¶é¡µä¸­çš„å…ƒç´ ä¸ªæ•°æ˜¯ä¸ä¼šå˜çš„ï¼Œå› æ­¤Underflowæ‰§è¡Œä¸€æ¬¡å³å¯ï¼Œæ— éœ€é€’å½’æ‰§è¡Œ B-Tree javaä»£ç å®ç°public class BTree { private int k; private Page root; public BTree(int k) { this.k = k; root = new Page(); } public Page getRoot() { return root; } /** * b-treeçš„èŠ‚ç‚¹ */ private class Page { private Element parent; private Element[] elements = new Element[(k + 1) * 2]; private int elementsSize = 1; Page() { elements[0] = new Element(null); elements[0].setIndex(0); elements[0].setPage(this); } public int getElementsSize() { return elementsSize; } public void setElementsSize(int elementsSize) { this.elementsSize = elementsSize; } public Element getParent() { return parent; } public void setParent(Element parent) { this.parent = parent; } public void setElements(Element[] elements) { this.elements = elements; } public Element[] getElements() { return elements; } public boolean addElement(Element value) { int index = bsSearch(elements, 0, elementsSize - 1, value.getV()); return addElement(index + 1, value); } public boolean addElement(int index, Element value) { value.setPage(this); for (int i = elementsSize; i &gt; index; i--) { elements[i] = elements[i - 1]; elements[i].setIndex(i); } value.setIndex(index); elements[index] = value; elementsSize++; return true; } /** * è¿”å›å°äºç­‰äºvçš„ç¬¬ä¸€ä¸ªå…ƒç´  * * @param v * @return */ public Element search(int v) { int index = bsSearch(elements, 0, elementsSize - 1, v); return elements[index]; } public Element getElement(int index) { return elements[index]; } public boolean delete(int index) { for (int i = index; i &lt; elementsSize; i++) { elements[i] = elements[i + 1]; if (elements[i] != null) { elements[i].setIndex(i); } } elementsSize--; return true; } /** * è¿”å›å°äºç­‰äºå½“å‰vçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æ ‡.è‹¥ä¸å­˜åœ¨åˆ™è¿”å›-1 * * @param elements * @param v * @return */ private int bsSearch(Element[] elements, int l, int r, int v) { for (; l &lt; r; ) { int mid = (l + r + 1) / 2; if (elements[mid].getV() != null &amp;&amp; elements[mid].getV() &gt; v) { r = mid - 1; } else { l = mid; } } return l; } } /** * èŠ‚ç‚¹ä¸­çš„å…ƒç´  */ private class Element { private Page rightIndex; private Page page; private int index; private Integer v; public Element(Integer v) { this.v = v; } public Page getRightIndex() { return rightIndex; } public void setRightIndex(Page rightIndex) { this.rightIndex = rightIndex; if (rightIndex != null) { rightIndex.setParent(this); } } public Integer getV() { return v; } public void setV(Integer v) { this.v = v; } public Page getPage() { return page; } public void setPage(Page page) { this.page = page; } public int getIndex() { return index; } public void setIndex(int index) { this.index = index; } } public Element search(int v) { return search(root, v); } public boolean insert(int v) { return insert(root, v); } public boolean delete(int v) { Element vEle = search(v); if (vEle == null) { return false; } // å¶å­èŠ‚ç‚¹ if (vEle.getRightIndex() == null) { Page currentPage = vEle.getPage(); currentPage.delete(vEle.getIndex()); adjust(currentPage); } else { Page tmpPage = vEle.getRightIndex(); for (; ; ) { Element element = tmpPage.getElement(0); if (element.getRightIndex() != null) { tmpPage = element.getRightIndex(); continue; } element = tmpPage.getElement(1); vEle.setV(element.getV()); tmpPage.delete(element.getIndex()); adjust(tmpPage); break; } } return true; } private Element search(Page node, int v) { if (node == null) { return null; } Element element = node.search(v); if (element.getV() != null &amp;&amp; element.getV() == v) { return element; } return search(element.getRightIndex(), v); } private boolean insert(Page node, int v) { Element vEle = node.search(v); if (vEle.getRightIndex() == null) { node.addElement(new Element(v)); pageSplit(node); return true; } if (vEle.getV() != null &amp;&amp; vEle.getV() == v) { return true; } return insert(vEle.getRightIndex(), v); } /** * 0. åˆ¤æ–­å½“å‰é¡µæ˜¯å¦éœ€è¦è¿›è¡Œé¡µåˆ†è£‚ï¼Œä¸éœ€è¦ç›´æ¥è¿”å› * 1. å°†å½“å‰é¡µèŠ‚ç‚¹ P ä¸­é—´ç¬¬kä¸ªå…ƒç´  E(k) å–å‡º * 2. æ–°å»ºä¸€ä¸ªé¡µèŠ‚ç‚¹ Pn å°† E(k) çš„å³æŒ‡é’ˆæŒ‡å‘ Pn * 3. å°† P ä¸­çš„ç¬¬k+1 ~ 2k + 1ä¸ªå…ƒç´ ç§»è‡³ Pn ä¸­ * 4. è‹¥ P ä¸ºrootï¼Œåˆ™å°†E(k) çš„å·¦æŒ‡é’ˆæŒ‡å‘ P ï¼Œå¹¶æ–°å»ºä¸€ä¸ªé¡µèŠ‚ç‚¹ Pr ï¼Œå°† Eï¼ˆkï¼‰æ”¾å…¥ Pr å¹¶å°†Prç½®ä¸ºä¸ºroot * 5. å¦åˆ™ å°†E(k) æ’å…¥Pçš„çˆ¶é¡µä¸­ï¼Œé€’å½’ä¸Šè¿°æ“ä½œ * * @param currentPage */ private void pageSplit(Page currentPage) { if (currentPage.getElementsSize() - 1 &lt;= k &lt;&lt; 1) { return; } Element midElement = currentPage.getElement(k + 1); currentPage.getElements()[k + 1] = null; Page pn = new Page(); for (int i = k + 2; i &lt; currentPage.getElementsSize(); i++) { pn.addElement(i - k - 1, currentPage.getElement(i)); currentPage.getElements()[i] = null; } pn.getElement(0).setRightIndex(midElement.getRightIndex()); midElement.setRightIndex(pn); currentPage.setElementsSize(currentPage.getElementsSize() - k - 1); if (currentPage.getParent() == null) { Page pr = new Page(); pr.getElement(0).setRightIndex(currentPage); pr.addElement(midElement); root = pr; return; } Page parentPage = currentPage.getParent().getPage(); parentPage.addElement(midElement); pageSplit(parentPage); } private void adjust(Page currentPage) { Element parentElement = currentPage.getParent(); // root å°±ä¸ç”¨ç®¡äº† if (parentElement == null) { return; } //å…ƒç´ ä¸ªæ•°å¤§äºç­‰äºkï¼Œä¹Ÿä¸ç”¨ç®¡ if (currentPage.getElementsSize() &gt;= k + 1) { return; } Page parentPage = parentElement.getPage(); int left = parentElement.getIndex() - 1 &lt; 0 ? parentElement.getIndex() + 1 : parentElement.getIndex(); int right = parentElement.getIndex() + 1 &gt;= parentPage.getElementsSize() ? parentElement.getIndex() : parentElement.getIndex() + 1; for (int i = left; i &lt;= right; i++) { int leftSize = parentPage.getElement(i - 1).getRightIndex().getElementsSize(); int rightSize = parentPage.getElement(i).getRightIndex().getElementsSize(); if (leftSize + rightSize - 2 &lt; k &lt;&lt; 1) { catenated(parentPage.getElement(i)); adjust(parentPage); return; } if (leftSize + rightSize - 2 &gt;= k &lt;&lt; 1) { underflow(parentPage.getElement(i)); return; } } } private void catenated(Element element) { Page leftPage = element.getPage().getElement(element.getIndex() - 1).getRightIndex(); Page rightPage = element.getRightIndex(); //åˆ é™¤çˆ¶é¡µä¸­çš„å…ƒç´  element.getPage().delete(element.getIndex()); //å°†åˆ é™¤çš„å…ƒç´ æ·»åŠ è‡³å³é¡µä¸­ rightPage.getElement(0).setV(element.getV()); for (int i = 0; i &lt; rightPage.getElementsSize(); i++) { leftPage.addElement(rightPage.getElement(i)); } } private void underflow(Element element) { Page leftPage = element.getPage().getElement(element.getIndex() - 1).getRightIndex(); Page rightPage = element.getRightIndex(); List&lt;Element&gt; tmp = new ArrayList&lt;Element&gt;(); for (int i = 0; i &lt; leftPage.getElementsSize(); i++) { tmp.add(leftPage.getElement(i)); } rightPage.getElement(0).setV(element.getV()); for (int i = 0; i &lt; rightPage.getElementsSize(); i++) { tmp.add(rightPage.getElement(i)); } //è®¡ç®—å‡ºä¸­å€¼ç´¢å¼• int midIndex = tmp.size() / 2; //æ›¿æ¢å…ƒç´ å€¼ element.setV(tmp.get(midIndex).getV()); tmp.get(midIndex).setV(null); //æ›´æ–°å·¦é¡µ for (int i = 1; i &lt; leftPage.getElementsSize(); i++) { leftPage.getElements()[i] = null; } leftPage.setElementsSize(1); for (int i = 1; i &lt; midIndex; i++) { leftPage.addElement(i, tmp.get(i)); } //æ›´æ–°å³é¡µ for (int i = 0; i &lt; rightPage.getElementsSize(); i++) { rightPage.getElements()[i] = null; } rightPage.setElementsSize(0); for (int i = midIndex; i &lt; tmp.size(); i++) { rightPage.addElement(i - midIndex, tmp.get(i)); } } public static void dfs(Page tmp) { if (tmp == null) { return; } for (int i = 0; i &lt; tmp.getElementsSize(); i++) { if (tmp.getElement(i).getV() != null) { System.out.print(&quot; &quot; + tmp.getElement(i).getV()); } dfs(tmp.getElement(i).getRightIndex()); } } public static void main(String[] args) { BTree bTree = new BTree(2); for (int i = 100; i &gt;= 1; i--) { bTree.insert(i); dfs(bTree.getRoot()); System.out.println(); } for (int i = 1; i &lt;= 25; i++) { System.out.println(bTree.search(i).getV()); } for (int i = 1; i &lt;= 25; i++) { Random random = new Random(); int x = random.nextInt(100) % 100; System.out.print(&quot;delete:&quot; + x + &quot; &quot;); System.out.println(bTree.delete(x)); dfs(bTree.getRoot()); System.out.println(); } } } B+Treeè°ˆå®Œäº†Btreeæˆ‘ä»¬å†æ¥è°ˆè°ˆB+Treeï¼Œæ‰€è°“çš„B+Treeä¸€ç›´æ²¡æœ‰æ‰¾åˆ°æ˜ç¡®çš„å‡ºå¤„å’Œå®šä¹‰ï¼Œæ‰€ä»¥è¿™é‡Œè°ˆçš„B+TreeæŒ‡çš„æ˜¯ä½¿ç”¨æœ€å¤šçš„å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯mysqlä¸­innodbå¼•æ“è¢«ä½¿ç”¨å¾—æœ€å¤šçš„ç´¢å¼•ç»“æ„ å®šä¹‰B+Tree çš„å®šä¹‰ä¸BTreeå¤§ä½“ä¸Šä¸€è‡´ï¼Œåªæœ‰ä¸€ä¸ªå”¯ä¸€çš„ä¸åŒç‚¹ï¼Œé‚£å°±æ˜¯æ‰€æœ‰çš„æ•°æ®éƒ½ä¿å­˜åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œéå¶å­èŠ‚ç‚¹ä¸­åªä¿ç•™ç´¢å¼•ä¿¡æ¯ æŸ¥è¯¢ï¼Œæ’å…¥ï¼Œåˆ é™¤è¿™äº›æ“ä½œéƒ½åŒBTreeä¿æŒä¸€è‡´ innodbç´¢å¼•çš„é¡µåˆ†è£‚å’Œé¡µåˆå¹¶æƒ³äº†è§£åœ¨å®é™…ä½¿ç”¨ä¸­innodbæ˜¯å¦‚ä½•ç®¡ç†ç´¢å¼•æ ‘çš„åˆå¹¶å’Œåˆ†è£‚çš„ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ]]></content>
      <categories>
        <category>ç®—æ³•å’Œæ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>B-Tree</tag>
        <tag>B+Tree</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‚è°ˆä¹‹ä»€ä¹ˆæ˜¯FullGC]]></title>
    <url>%2F2019%2F11%2F14%2Ffullgc%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡åŸºäºJDK 1.8ï¼Œä½¿ç”¨çš„æ”¶é›†å™¨ä¸ºParNew + CMS å‰è¨€è¿™ç¯‡æ–‡ç« çš„èµ·å› æ˜¯è¿™æ ·çš„ï¼Œåœ¨ä¸Šå‘¨äº”å‡Œæ™¨å¾ˆè‹¦é€¼å¾—å‚åŠ åŒåä¸€å‹æµ‹å€¼ç­çš„æ—¶å€™ï¼Œæœ‰ä¸ªä¸šåŠ¡æ–¹çªç„¶æ‰“ç”µè¯æ¥è¯´æˆ‘ä»¬æä¾›çš„å®¢æˆ·ç«¯å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜å¯¼è‡´çº¿ä¸Šåº”ç”¨æŒç»­full gc,æœ¬æ¥å·²ç»å¿«è¦ç¡ç€çš„æˆ‘ç«‹é©¬å°±ç²¾ç¥èµ·æ¥äº†ï¼Œä¸€é€šæ’æŸ¥ï¼Œæœ€ç»ˆå®šä½åˆ°äº†ç¡®å®æ˜¯å®¢æˆ·ç«¯æœ‰ä¸ªbugä¼šå¯¼è‡´éƒ¨åˆ†æ•°æ®ä¼šè¢«ä¸€ç›´æŒæœ‰è¿›å…¥è€å¹´ä»£ä¹‹ågcä¸æ‰ï¼Œä»è€Œå°±å¯¼è‡´äº†è€å¹´ä»£çš„é¢‘ç¹gcï¼Œå…·ä½“bugæš‚ä¸”ä¸è¡¨ï¼Œæœ‰ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„ç°è±¡å¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼Œé‚£å°±æ˜¯ä»ç›‘æ§ç³»ç»Ÿä¸Šæ¥çœ‹ï¼Œè¿™ä¸ªåº”ç”¨å¹³å‡ä¸€åˆ†é’Ÿfull gcæ¬¡æ•°é«˜è¾¾åå¤šæ¬¡ï¼ŒæŒ‰ç…§æˆ‘ä¹‹å‰çš„ç†è§£full gcæ—¶æ˜¯ä¼šstop the worldçš„ï¼Œstop the worldçš„é¢‘ç‡è¿™ä¹ˆé«˜ï¼Œé‚£ä¹ˆåº”ç”¨è‡ªèº«çš„æœåŠ¡å·²ç»è·ªæ‰äº†å•Šï¼Œä½†æ˜¯çœ‹è¿™ä¸ªåº”ç”¨çš„ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§ï¼Œå±…ç„¶ä¸€åˆ‡æ­£å¸¸ï¼Œè¿™å°±æœ‰ç‚¹è¶…å‡ºæˆ‘çš„ç†è§£èƒ½åŠ›äº†ï¼Œåé¢ä¸ºäº†è§£å†³è¿™ä¸ªç–‘é—®ï¼Œé’ˆå¯¹ä»€ä¹ˆæ˜¯full gcï¼Œä»¥åŠå¦‚ä½•æŸ¥çœ‹full gcçš„æ¬¡æ•°ç­‰æŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™ï¼Œæ€»ç®—ææ‡‚äº†full gcè¿™ä¸ªæ¦‚å¿µï¼Œåœ¨æŸ¥èµ„æ–™çš„è¿‡ç¨‹ä¸­å‘ç°ä¸­æ–‡ç¤¾åŒºé‡Œé¢åŒ…å«å¤ªå¤šé”™è¯¯çš„ä¿¡æ¯äº†ï¼Œè€Œä¸”å¤§å¤šéƒ½æ˜¯æŠ„æ¥æŠ„å»çš„ï¼Œéå¸¸è¯¯å¯¼äººï¼Œå› æ­¤æ‰“ç®—å†™ä¸€ç¯‡æ–‡ç« ï¼Œå¯¹ä¸€äº›é”™è¯¯è§‚ç‚¹è¿›è¡Œçº æ­£ã€‚ æ­£æ–‡å‰ç½®çŸ¥è¯†ç‚¹åœ¨çœŸæ­£å¼€å§‹æ¢ç´¢Full GCä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä»‹ç»å‡ ä¸ªæ¦‚å¿µ GCGC å…¨ç§°ä¸ºgarbage collection,ä¸­æ–‡å«ä¹‰ä¸ºåƒåœ¾å›æ”¶ï¼Œåœ¨jvmä¸­çš„å«ä¹‰ä¸ºå›æ”¶æ— ç”¨å†…å­˜ç©ºé—´ Young spaceä¸­æ–‡åä¸ºå¹´è½»ä»£æˆ–è€…æ–°ç”Ÿä»£ï¼Œä¸ºJVM å †çš„ä¸€éƒ¨åˆ†ï¼Œç”±åˆ†ä»£GCæ¦‚å¿µåˆ’åˆ†è€Œæ¥ï¼Œä¿å­˜ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„å¯¹è±¡ Tenured spaceä¸­æ–‡åä¸ºè€å¹´ä»£æˆ–å¹´è€ä»£ï¼Œä¸ºJVM å †çš„ä¸€éƒ¨åˆ†ï¼Œç”±åˆ†ä»£GCæ¦‚å¿µåˆ’åˆ†è€Œæ¥ï¼Œä¿å­˜ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ Minor GCminor gcæŒ‡çš„æ˜¯å‘ç”Ÿåœ¨å¹´è½»ä»£æˆ–è€…è¯´æ–°ç”Ÿä»£ï¼ˆYoung spaceï¼‰ä¸­çš„gcï¼Œä¹Ÿæœ‰äººç§°å…¶ä¸ºyoung gcæˆ–è€…ygc,åœ¨ä¸‹æ–‡ä¸­æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨minor gcè¡¨ç¤º Major GCmajor gcæŒ‡çš„æ˜¯å‘ç”Ÿåœ¨è€å¹´ä»£ï¼ˆTenured spaceï¼‰ä¸­çš„gcï¼Œä¹Ÿæœ‰äººç§°ä¸ºold gc,o gc,cms gcç­‰ï¼Œåœ¨ä¸‹æ–‡æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨major gcè¡¨ç¤º stop the worldæŒ‡çš„æ˜¯ç”¨æˆ·çº¿ç¨‹åœ¨è¿è¡Œè‡³å®‰å…¨ç‚¹ï¼ˆsafe pointï¼‰æˆ–å®‰å…¨åŒºåŸŸï¼ˆsafe regionï¼‰ä¹‹åï¼Œå°±è‡ªè¡ŒæŒ‚èµ·ï¼Œè¿›å…¥æš‚åœçŠ¶æ€ï¼Œå¯¹å¤–çš„è¡¨ç°çœ‹èµ·æ¥å°±åƒæ˜¯å…¨ä¸–ç•Œéƒ½åœæ­¢è¿è½¬äº†ä¸€æ ·,è€Œä¸è®ºä½•ç§gcç®—æ³•ï¼Œä¸è®ºæ˜¯minor gcè¿˜æ˜¯major gcéƒ½ä¼šstop the worldï¼ŒåŒºåˆ«åªåœ¨äºstop the worldçš„æ—¶é—´é•¿çŸ­ã€‚ ä»€ä¹ˆæ˜¯Full GCå…ˆè¯´ä¸€ä¸‹ç»“è®ºï¼ŒFull GCè¿™ä¸ªæ¦‚å¿µæ˜¯æ²¡æœ‰å®˜æ–¹å®šä¹‰çš„ï¼Œè€Œä¸”å«ä¹‰è¿˜ç‰¹åˆ«æ··ä¹±ï¼Œåœ¨ä¸åŒåœ°æ–¹è¡¨è¾¾çš„å«ä¹‰æ˜¯ä¸åŒçš„ï¼Œéœ€è¦å°±ä¸åŒçš„åœºæ™¯åˆ†åˆ«è¿›è¡Œè®¨è®ºã€‚ å¤§ä¼—è®¤çŸ¥ä¸Šåœ¨é€šå¸¸æ„ä¹‰ä¸Šäººä»¬å£ä¸­è¯´çš„Full GCä¸ºä¸€æ¬¡ç‰¹æ®ŠGCè¡Œä¸ºçš„æè¿°ï¼Œè¿™æ¬¡GCä¼šå›æ”¶æ•´ä¸ªå †çš„å†…å­˜ï¼ŒåŒ…å«è€å¹´ä»£ï¼Œæ–°ç”Ÿä»£ï¼Œmetaspaceç­‰ï¼Œè¿™ä¸ªæ˜¯æœ€å¸¸è§çš„ä¸€ç§è®¤çŸ¥ï¼Œå¾ˆå¤šäººä¹Ÿå°±äº†è§£åˆ°è¿™ä¸ªç¨‹åº¦ï¼Œå› æ­¤åœ¨é‡åˆ°ä¸€äº›ç‰¹æ®Šåœºæ™¯çš„æ—¶å€™å°±ä¼šå‘ç°å®é™…æƒ…å†µå’Œè‡ªå·±çš„è®¤çŸ¥ä¼šå‘ç”Ÿå†²çª ä»GCæ—¥å¿—ä¸Šåœ¨gc.logä¸­ä¼šå‘ç°åœ¨éƒ¨åˆ†gcæ—¥å¿—å¤´ä¸­ä¹Ÿæœ‰Full GCè¿™æ ·çš„å­—çœ¼ï¼Œè¿™é‡Œè¡¨ç¤ºçš„å«ä¹‰æ˜¯åœ¨è¿™æ¬¡GCçš„å…¨è¿‡ç¨‹ä¸­ï¼Œéƒ½æ˜¯Stop The worldçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™æ¬¡GCçš„å…¨è¿‡ç¨‹ä¸­æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½æ˜¯å¤„äºæš‚åœçš„çŠ¶æ€ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œè¦å–·ä¸€ä¸‹ä¸­æ–‡jvmç¥ä¹¦ã€Šæ·±å…¥ç†è§£JVMã€‹äº†ï¼Œåœ¨ç¬¬äºŒç‰ˆç¬¬89é¡µæœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼š GC æ—¥å¿—å¼€å¤´çš„â€œ[GCâ€å’Œâ€œ[Full GCâ€è¯´æ˜äº†è¿™æ¬¡åƒåœ¾æ”¶é›†çš„åœé¡¿ç±»å‹ï¼Œè€Œä¸æ˜¯ç”¨æ¥åŒºåˆ†æ–°ç”Ÿä»£GCè¿˜æ˜¯è€å¹´ä»£GCçš„ã€‚å¦‚æœæœ‰â€œFullâ€ï¼Œè¯´æ˜è¿™æ¬¡GCæ˜¯å‘ç”Ÿäº†Stop-The-Worldçš„ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ®µæ–°ç”Ÿä»£æ”¶é›†å™¨ParNewçš„æ—¥å¿—ä¹Ÿä¼šå‡ºç°â€œ[Full GCâ€ï¼ˆè¿™ä¸€èˆ¬æ˜¯å› ä¸ºå‡ºç°äº†åˆ†é… æ‹…ä¿å¤±è´¥ä¹‹ç±»çš„é—®é¢˜ .æ‰€ä»¥æ‰å¯¼è‡´STW)ã€‚å¦‚æœæ˜¯è°ƒç”¨System.gc()æ–¹æ³•æ‰€è§¦å‘çš„æ”¶é›†ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œå°†æ˜¾ç¤ºâ€œ[Full GC (System)â€ã€‚ è¿™æ®µè¯çš„æè¿°æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºåœ¨å‰é¢è¯´è¿‡ï¼Œä¸è®ºä½•ç§gcç®—æ³•ï¼Œä¸è®ºæ–°ç”Ÿä»£æˆ–æ˜¯è€å¹´ä»£ï¼Œå…¶gcéƒ½ä¼šå‘ç”Ÿstop the worldï¼Œè¿™é‡Œæ­£ç¡®çš„æè¿°æ˜¯è¿™æ¬¡GCçš„å…¨è¿‡ç¨‹éƒ½æ˜¯Stop-The-Worldçš„ ä»JDKè‡ªå¸¦çš„å·¥å…·ä¸Šä½¿ç”¨jstat -gcå‘½ä»¤èƒ½å¤ŸæŸ¥çœ‹åˆ°åˆ¶å®šjava çº¿ç¨‹çš„gcæ¬¡æ•°ï¼Œé‚£ä¹ˆåœ¨ç»è¿‡æˆ‘çš„å¤šæ¬¡å°è¯•ä»¥åŠå¯¹æ¯”ä¹‹åï¼Œæˆ‘å‘ç°äº†ä½¿ç”¨jstat æŸ¥å‡ºæ¥çš„FGC æ¬¡æ•°å’Œæ—¶é—´ï¼Œå®é™…ä¸ŠæŒ‡çš„æ˜¯è€å¹´ä»£çš„æ”¶é›†å™¨å‘ç”ŸStop the world çš„æ¬¡æ•°å’ŒæŒç»­æ—¶é—´ï¼Œå¯¹åº”æœ¬æ–‡è€Œè¨€ï¼Œå°±æ˜¯CMSæ”¶é›†å™¨çš„Stop the worldæ¬¡æ•°å’Œæ—¶é—´ å…¶ä»–å«ä¹‰ï¼ˆå‘çˆ¹ç‰ˆï¼‰å‰é¢ä¸æ˜¯è¯´åˆ°æˆ‘åœ¨ç›‘æ§å¤§ç›˜ä¸Šçœ‹åˆ°è¿™ä¸ªåº”ç”¨å¹³å‡ä¸€åˆ†é’Ÿå‘ç”Ÿäº†åå¤šæ¬¡â€Full GCâ€ä¹ˆï¼Œåœ¨æˆ‘å¼„æ˜ç™½äº†å‰é¢ä¸¤ä¸ªFull GCçš„å«ä¹‰ä¹‹åæŸ¥çœ‹äº†gc.logæ–‡ä»¶ï¼Œéšåå‘ç°è¯¥åº”ç”¨å®é™…ä¸Šä¸€æ¬¡Full GCéƒ½æ²¡æœ‰å‡ºç°ï¼Œç„¶åå’¨è¯¢äº†ä¸€ä¸‹æä¾›ç›‘æ§æ•°æ®çš„åŒå­¦ï¼Œç»“æœä»–è¯´æ˜¯é€šè¿‡JMXè·å–çš„ï¼Œä»£ç ä¸ºï¼š ManagementFactory.getGarbageCollectorMXBeans() ç„¶åä¼—æ‰€å‘¨çŸ¥ï¼Œä½¿ç”¨MXBeanè·å–åˆ°çš„åªæ˜¯æ”¶é›†å™¨çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå’ŒFull GCåŠæ¯›é’±å…³ç³»éƒ½æ²¡æœ‰å•Šï¼Œéšååœ¨è¿½é—®äº†ä¸€ä¸‹ï¼Œå‘ç°åšç›‘æ§ç³»ç»Ÿçš„åŒå­¦ç›´æ¥æŠŠCMSæ”¶é›†å™¨çš„æ”¶é›†æ¬¡æ•°å½“åšäº†Full GCçš„æ¬¡æ•°æ¥ç»Ÿè®¡ï¼Œwhat the fuckï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Œåªèƒ½è¯´å¯¹äºFUll GCçš„æ¦‚å¿µçœŸçš„æœ‰å¾ˆå¤šäººæ˜¯ä¸€ç›´æ²¡å¼„æ‡‚è¿‡çš„ ç»“æŸè¯­åœ¨è¿™ç¯‡æ–‡ç« å¿«å†™å®Œçš„æ—¶å€™ï¼Œç”¨googleéšä¾¿æœäº†ä¸€ä¸‹å°±åœ¨é¦–é¡µæ‰¾åˆ°ä¸€ç¯‡å¯¹äºå„ç±»gcæ¦‚å¿µä»‹ç»å¾—æ¯”è¾ƒé€å½»çš„æ–‡ç« ï¼Œå’Œä½¿ç”¨åº¦å¨˜ä¸€æœé¦–é¡µå…¨æ˜¯å„ç§æŠ„æ¥æŠ„å»çš„é”™è¯¯æ–‡ç« ç›¸æ¯”ï¼Œå¯¹æ¯”ç®€ç›´æ˜¯å¤ªå¼ºçƒˆäº†ï¼Œç”±æ­¤å¾—å‡ºç»“è®ºï¼ŒæŠ€æœ¯ç±»çš„èµ„æ–™èƒ½åœ¨å¤–ç½‘æŸ¥å°±åœ¨å¤–ç½‘æŸ¥å§ï¼Œçœæ—¶åˆçœåŠ›ï¼Œæœ€åé™„ä¸Šæˆ‘æ‰¾åˆ°çš„è¿™ç¯‡æ–‡ç« è²Œä¼¼è¿˜æ˜¯plumbrçš„è”åˆåˆ›å§‹äººå†™çš„ï¼Œä¸å¾—ä¸è¯´å¾ˆç»™åŠ›äº†]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>JVM</tag>
        <tag>Full GC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaåŸºç¡€ç¯‡ IOç³»åˆ—ä¹‹Fileç±»]]></title>
    <url>%2F2019%2F11%2F09%2FFile%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®¨è®ºçš„JDKç‰ˆæœ¬ä¸º1.8.0_181ï¼Œç³»ç»Ÿç¯å¢ƒä¸ºmacos FileFile ç±»çš„å…¨é™å®šåä¸º java.io.File,ä½äºrt.jarä¸­ï¼Œæ­£å¦‚ã€Šthink in javaã€‹ä¸­ä»‹ç»çš„é‚£æ ·ï¼Œè¿™ä¸ªç±»ä¸å…¶å«åšFileï¼Œä¸å¦‚å«åšFilePathï¼Œå› ä¸ºè¿™ä¸ªç±»é™¤äº†èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªç›®å½•ï¼Œå…¶å®è¿™ä¸€ç‚¹ä¹Ÿèƒ½ä»æºç çš„ç¬¬ä¸€è¡Œæ³¨é‡Šä¸­çœ‹å‡ºæ¥ï¼Œæ³¨é‡Šå¦‚ä¸‹ï¼š An abstract representation of file and directory pathnames æ–‡ä»¶å’Œç›®å½•åœ°å€çš„æŠ½è±¡è¡¨ç¤º åœ¨å¼€å§‹åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ä¸ªç±»çš„æ„é€ å‡½æ•° 1. private File(String pathname, int prefixLength) 2. private File(String child, File parent) 3. public File(String pathname) 4. public File(String parent, String child) 5. public File(File parent, String child) 6. public File(URI uri) æ€»å…±å…­ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶ä¸­2ä¸ªå†…éƒ¨çš„4ä¸ªå…¬å…±çš„ï¼Œå®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯æŒ‡å®šè¯¥Fileç±»ä»£è¡¨çš„æŠ½è±¡è·¯å¾„ï¼ŒåŒºåˆ«åœ¨äºæ‹¼è£…æ–¹å¼ä¸åŒï¼Œä¸‹é¢å°±4ä¸ªå…¬å…±æ–¹æ³•ç®€å•ä»‹ç»ä¸€ä¸‹ï¼š public File(String pathname) å°†pathnameè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ä¹‹åèµ‹å€¼ç»™Fileç±»ï¼Œpathnameä¸ºæ­¤æ–‡ä»¶æˆ–ç›®å½•çš„æ ‡å‡†è·¯å¾„åå­—ç¬¦ä¸²,æ‰€è°“æ ‡å‡†è·¯å¾„åå°±æ˜¯æŒ‡ä¸å«æœ‰é‡å¤æˆ–å¤šäºçš„åˆ†éš”ç¬¦çš„è·¯å¾„å­—ç¬¦ä¸²ï¼Œè‹¥pathnameä¸­å«æœ‰å¤šäºçš„åˆ†éš”ç¬¦ï¼ŒFileç±»ä¹Ÿä¼šæŠŠå¤šäºçš„åˆ†éš”ç¬¦ç»™è¿‡æ»¤æ‰(ä¾‹å¦‚//Userä¼šè¢«å¤„ç†ä¸º/User), åŒæ—¶pathnameå¯ä»¥ä¸ºç›¸å¯¹è·¯å¾„(test/haha)æˆ–è€…ç»å¯¹è·¯å¾„(/test/haha)ï¼Œè‹¥ä¸ºç›¸å¯¹è·¯å¾„çš„è¯ï¼Œé»˜è®¤çš„å‰ç¼€ä¸ºå½“å‰å·¥ä½œç›®å½•ï¼Œä¹Ÿå°±æ˜¯System.getProperty(â€œuser.dirâ€) public File(String parent, String child) å…¶ä¸­çš„parentè¡¨ç¤ºå‰ç¼€ï¼Œåªèƒ½ä¸ºè·¯å¾„å­—ç¬¦ä¸²ï¼Œchildè¡¨ç¤ºåç¼€ï¼Œå¯ä»¥ä¸ºè·¯å¾„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä¸ºæ–‡ä»¶åï¼Œæœ€ç»ˆèµ‹å€¼ç»™Fileç±»çš„å­—ç¬¦ä¸²ä¸º ç»è¿‡æ ‡å‡†å¤„ç†ä¹‹åçš„ parent + child public File(File parent, String child) åŒä¸Šä¸€ä¸ªæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œæœ€ç»ˆèµ‹å€¼ç»™Fileç±»çš„è·¯å¾„ä¸º parentçš„è·¯å¾„ + child public File(URI uri) å°†URLçš„pathèµ‹å€¼ç»™Fileç±»ï¼Œä¼šæ ¡éªŒè¯¥URLçš„åè®®å¤´æ˜¯å¦ä¸ºâ€fileâ€ï¼Œè‹¥ä¸æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸ å¸¸ç”¨æ–¹æ³•åˆ†æå¥½äº†ï¼Œä¸‹é¢å¼€å§‹è¿›å…¥æ­£æ–‡ï¼Œæ­£å¦‚å…ˆå‰æ‰€è¯´ï¼ŒFileç±»æ—¢èƒ½è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶ä¹Ÿèƒ½è¡¨ç¤ºä¸€ä¸ªç›®å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±Fileç±»çš„è¿™ä¸¤ç§çŠ¶æ€æ¥åˆ†åˆ«è®¨è®ºä¸€ä¸‹ ä½œä¸ºæ–‡ä»¶åˆ›å»ºå¯¹äºæ–‡ä»¶è€Œè¨€ï¼Œé¦–è¦çš„åŠŸèƒ½å°±æ˜¯åˆ›å»ºæ–‡ä»¶äº†ï¼Œæ¯•ç«Ÿæ‰€æœ‰çš„æ–‡ä»¶æ“ä½œå‰æéƒ½æ˜¯ä½ å¾—æœ‰ä¸ªæ–‡ä»¶Fileç±»æä¾›äº†ä¸‰ä¸ªæ–¹æ³•ç”¨äºæ–°å»ºæ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªå†…éƒ¨æ–¹æ³•ï¼Œä¸¤ä¸ªé™æ€æ–¹æ³•ï¼š 1. public boolean createNewFile() 2. public static File createTempFile(String prefix, String suffix) 3. public static File createTempFile(String prefix, String suffix,File directory) public boolean createNewFile() æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ä½œç”¨å°±æ˜¯ä½¿ç”¨åˆ›å»ºFileç±»æ—¶ä¼ è¿›æ¥çš„è·¯å¾„æ¥åˆ›å»ºæ–‡ä»¶ï¼Œè‹¥è¯¥è·¯å¾„ä¸­åŒ…å«çš„ç›®å½•ä¸å­˜åœ¨åˆ™ä¼šç›´æ¥æŠ›å¼‚å¸¸ï¼Œè‹¥è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨äº†åˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œ public static File createTempFile(String prefix, String suffix)åº•å±‚è°ƒç”¨çš„ä¹Ÿæ˜¯public static File createTempFile(String prefix, String suffix,File directory),å› æ­¤æˆ‘ä»¬åªéœ€è¦çœ‹ä¸€ä¸‹public static File createTempFile(String prefix, String suffix,File directory)å°±å¥½äº†ï¼Œæ­¤æ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå…¶ä¸­prefixä¸ºæ–‡ä»¶çš„å‰ç¼€åï¼Œsuffixä¸ºæ–‡ä»¶çš„åç¼€åï¼Œdirectoryä¸ºç›®å½•ï¼Œå…¶ä¸­å‰ç¼€å¿…é¡»ä¸ºé•¿åº¦å¤§äº3çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”åªå–æ–‡ä»¶åï¼ˆä¾‹å¦‚è‹¥ä¼ å…¥çš„å‰ç¼€ä¸º/user/test,é‚£ä¹ˆæœ€ç»ˆå–çš„å‰ç¼€ä¸ºtestï¼‰ï¼Œåç¼€è‹¥æœªä¼ åˆ™é»˜è®¤ä¸ºâ€.tmpâ€, directoryè‹¥æœªä¼ çš„è¯é»˜è®¤ä¸ºç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼Œå³ System.getProperty(â€œjava.io.tmpdirâ€); è¯»å†™åˆ›å»ºäº†æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å½“ç„¶ä¼šæƒ³è¦æ¥å¯¹æ–‡ä»¶è¿›è¡Œä¸€ä¸‹è¯»å†™äº†,ä½†Fileç±»æœ¬èº«å¹¶ä¸æä¾›è¯»å†™åŠŸèƒ½ï¼Œå¯¹äºFilleçš„è¯»å–ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡åé¢å°†ä¼šæåˆ°çš„å­—èŠ‚æµå’Œå­—ç¬¦æµæ¥å®ç°çš„ã€‚ ä½œä¸ºæ–‡ä»¶çš„ç‰¹æ®Šæƒ…å†µæˆ‘ä»¬å·²ç»è®¨è®ºå®Œäº†ï¼Œæ¥ä¸‹æ¥å†çœ‹ä¸€ä¸‹ä½œä¸ºç›®å½•çš„æƒ…å†µ ä½œä¸ºç›®å½•ç›®å½•ç‰¹æœ‰çš„æ“ä½œæ¯”è¾ƒç®€å• åˆ›å»ºåˆ›å»ºç›®å½•å…±æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºï¼š 1. public boolean mkdir() åˆ›å»ºå½“å‰ç›®å½•ï¼Œè‹¥çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¤±è´¥è‹¥æˆåŠŸåˆ›å»ºåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false 2. public boolean mkdirs() åˆ›å»ºå½“å‰ç›®å½•ï¼Œè‹¥çˆ¶ç›®å½•ä¸å­˜åœ¨åˆ™å…ˆåˆ›å»ºçˆ¶ç›®å½•ï¼Œè‹¥æˆåŠŸåˆ›å»ºåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false éå†ç›®å½•ç›®å½•çš„éå†æ˜¯ä½œä¸ºç›®å½•è€Œè¨€æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œä¸€å…±æœ‰5ä¸ªï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š 1. public String[] list() è¿”å›å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•åç§°å­—ç¬¦ä¸²æ•°ç»„ï¼ˆä¸ä¼šé€’å½’éå†ï¼‰ 2. public String[] list(FilenameFilter filter) è¿”å›å½“å‰ç›®å½•ä¸‹ç¬¦åˆfilterè¿‡æ»¤æ¡ä»¶çš„æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•åç§°å­—ç¬¦ä¸²æ•°ç»„ï¼Œå…¶ä¸­FilenameFilteræ˜¯ä¸€ä¸ªæ¥å£ï¼Œæä¾›äº†acceptæ–¹æ³•å¯ç”¨äºé‡å†™ï¼ˆä¸ä¼šé€’å½’éå†ï¼‰ 3. public File[] listFiles() æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œå¹¶ä»¥Fileç±»çš„å½¢å¼è¿”å›ï¼ˆä¸ä¼šé€’å½’éå†ï¼‰ 4. public File[] listFiles(FilenameFilter filter) åŒç†ï¼Œä¼šåªè¿”å›filterè¿‡æ»¤åçš„Fileç±»æ–‡ä»¶ 5. public File[] listFiles(FileFilter filter) æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œå¹¶ä»¥Fileç±»çš„å½¢å¼è¿”å›ï¼Œä¼šåªè¿”å›filterè¿‡æ»¤åçš„Fileæ–‡ä»¶ï¼Œè¿™é‡Œçš„FileFilterä¸FilenameFilterçš„åŒºåˆ«åœ¨äºFilenameFilterçš„å…¥å‚æ˜¯Stringï¼Œè€ŒFileFilterçš„å…¥å‚ä¸ºFileç±» å…¬æœ‰æ–¹æ³•ä½œä¸ºæ–‡ä»¶å’Œç›®å½•éƒ½æœ‰çš„æ–¹æ³•ï¼š 1. public boolean canRead() æ˜¯å¦å¯è¯» 2. public boolean canWrite() æ˜¯å¦å¯å†™ 3. public boolean exists() åˆ¤æ–­å½“å‰ç›®å½•æˆ–æ–‡ä»¶æ˜¯å¦å­˜åœ¨ 4. public boolean isDirectory() åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºç›®å½• 5. public boolean isFile() åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºæ–‡ä»¶ 6. public boolean isHidden() æ˜¯å¦ä¸ºéšè—æ–‡ä»¶ 7. public boolean delete() åˆ é™¤æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œç«‹å³åˆ é™¤ 8. public void deleteOnExit() åˆ é™¤æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œå½“javaè¿›ç¨‹é€€å‡ºæ—¶æ‰§è¡Œ 9. public boolean renameTo(File dest) å°†æ–‡ä»¶æˆ–è€…ç›®å½•æ”¹åä¸ºä¼ å…¥çš„Fileç±»çš„pathNameï¼Œè‹¥ç›®æ ‡ç›®å½•æˆ–è€…æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™è¿”å›å¤±è´¥]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>Fileç±»</tag>
        <tag>IO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºflagçš„é‚£äº›äº‹]]></title>
    <url>%2F2019%2F10%2F04%2F%E7%AB%8B%E4%B8%AAflag%E5%90%A7%2F</url>
    <content type="text"><![CDATA[å‘¨æœ«å°±å–œæ¬¢çæƒ³ï¼Œè™½ç„¶è¿˜æœ‰ä¸€å¤§å †äº‹æƒ…æ²¡æœ‰åš æ¨¡æ‹Ÿé€€ç«ä¸å¸ƒæœ—è¿åŠ¨å‰æ®µæ—¶é—´çœ‹åˆ°äº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„è§‚ç‚¹ï¼š äººç”Ÿçš„ä¼˜åŒ–é—®é¢˜å¯ä»¥é€šè¿‡æ•°å­¦çš„æ¦‚å¿µæŠ½è±¡ä¸ºå¦‚ä¸‹ä¸¤ç‚¹ 1. ä»¥ä½ æƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººä½œä¸ºç›®æ ‡å‡½æ•° 2. å°†ä½ å¿…é¡»è¦åšçš„äº‹ä½œä¸ºçº¦æŸæ¡ä»¶ ä¸Šè¿°ä¸¤ä¸ªæ¡ä»¶çš„æœ‰æ— ï¼Œå°±å†³å®šäº†ä½ ç›®å‰çš„çŠ¶æ€åˆ°åº•æ˜¯åšçš„æ¨¡æ‹Ÿé€€ç«è¿˜æ˜¯å¸ƒæœ—è¿åŠ¨ ä¹ä¸€æƒ³ï¼Œè²Œä¼¼è¿˜æœ‰é‚£ä¹ˆç‚¹é“ç†ï¼Œæƒ³äº†ä¸€ä¸‹æ¯•ä¸šè¿™ä¸‰å¹´æ¥è‡ªå·±çš„ä¸€ä¸ªçŠ¶æ€ï¼Œå¯ä»¥è¯´ç®—æ˜¯å…¸å‹çš„å¸ƒæœ—è¿åŠ¨äº†ï¼Œæ¯ä¸€ä¸ªå¯¹æœªæ¥æœ‰é‡å¤§æ„ä¹‰å’Œå½±å“çš„å†³å®šï¼Œéƒ½æ²¡æœ‰ä»»ä½•ç†ç”±å’Œæ€è€ƒï¼Œéƒ½æ˜¯åœ¨å‘¨å›´ç¯å¢ƒæˆ–ä»–äººçš„å½±å“ä¸‹éšæ³¢é€æµï¼Œæ²¡æœ‰æƒ³æ¸…æ¥šè¿‡è‡ªå·±åšçš„è¿™äº›å†³å®šä¸å®Œæˆè‡ªå·±çš„ç»ˆæç›®æ ‡æ–¹å‘æ˜¯å¦ä¸€è‡´ï¼ŒåŒ…æ‹¬åˆšæ¯•ä¸šæ—¶æ‹¿åˆ°offerå»ä¸Šæµ·ï¼Œå…¶å®é‚£ä¸ªæ—¶å€™æ ¹æœ¬æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆè¦å»ä¸Šæµ·ï¼Œå»ä¸Šæµ·æƒ³è¦å¾—åˆ°äº›ä»€ä¹ˆï¼Œåªæ˜¯å½“æ—¶è«ååœ°è§‰å¾—å»ä¸Šæµ·å‘å±•ä¼šå¥½ä¸€ç‚¹ï¼ˆå…¶å®ä¹Ÿæ˜¯å‘¨å›´äººçš„è¯´æ³•ï¼Œä¸è‡ªå·±è€Œè¨€æ²¡ä»€ä¹ˆæ„Ÿè§¦ï¼‰ï¼Œç„¶åå°±æ˜¯æœ€è¿‘è·³æ§½åˆ°æ­å·ï¼Œæˆ‘åˆä¸ºä»€ä¹ˆè¦æ¥æ­å·ï¼Œæ¥æ­å·ä¹‹åæˆ‘åˆæƒ³è¦å¾—åˆ°äº›ä»€ä¹ˆï¼Œåšè¿™äº›äº‹èƒ½å¤Ÿå¸®åŠ©æˆ‘å®ç°æˆ‘çš„æœ€ç»ˆç›®æ ‡å—ï¼Ÿè¿™äº›éƒ½æ²¡æœ‰æƒ³è¿‡ï¼Œå°±åƒä¸€ä¸ªå°åˆ†å­ï¼Œåšç€æ— è§„å¾‹çš„å¸ƒæœ—è¿åŠ¨ æƒ³ä¸€æƒ³ï¼Œä»Šå¹´é©¬ä¸Šå°±25äº†ï¼Œå·²ç»ä¸€æŠŠå¹´çºªäº†ï¼Œæ˜¯æ—¶å€™å¼„æ¸…æ¥šè‡ªå·±åˆ°åº•æƒ³è¦äº›ä»€ä¹ˆäº†ï¼Œç”Ÿæ´»è¿˜æ˜¯éœ€è¦æœ‰ä¸ªæ–¹å‘çš„ã€‚ æ¢³ç†ä¸€ä¸‹é¦–å…ˆï¼Œå°±ä¸ªäººæ¥è¯´ï¼Œç»ˆæç›®æ ‡å°±ä¸‰ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯å¥åº·çš„èº«ä½“ï¼Œç¬¬äºŒä¸ªæ˜¯å……è¶³çš„è´¢å¯Œï¼Œç¬¬ä¸‰ä¸ªæ˜¯è¶³å¤Ÿçš„æ—¶é—´ï¼Œç›¸ä¿¡è¿™ä¹Ÿæ˜¯å¤§å¤šæ•°äººæ‰€æƒ³è¦çš„ï¼Œæ¥ä¸‹æ¥å†æŒ‰ç…§è¿™ä¸‰ä¸ªç›®æ ‡è¿›è¡Œä¸€ä¸‹ç»†åˆ†ï¼Œæ¢³ç†ä¸€ä¸‹çº¦æŸæ¡ä»¶ã€‚ å¥åº·çš„èº«ä½“è¦æ‹¥æœ‰ä¸€ä¸ªå¥åº·çš„èº«ä½“ï¼Œé™¤äº†ä¸€äº›ä¸å¯æŠ—å› ç´ ä¹‹å¤–ï¼ŒåšæŒåšåˆ°ä¸‰ä¸ªæ–¹é¢åº”è¯¥å°±OKäº† 1. è‰¯å¥½çš„ä½œæ¯æ—¶é—´ 2. è‰¯å¥½çš„é¥®é£Ÿä¹ æƒ¯ 3. åˆç†çš„é”»ç‚¼æ—¶é—´ å°±ä¸Šè¿°ä¸‰ä¸ªæ–¹é¢ï¼Œåˆ†åˆ«åˆ¶å®šä¸€æ¡çº¦æŸæ¡ä»¶ 1. æ‹’ç»ç†¬å¤œï¼Œæ¯å¤©11ç‚¹å‰ç¡è§‰ï¼Œ6~7ç‚¹é’Ÿèµ·åºŠ 2. æ¯æ—¥ä¸‰é¤ï¼ŒæŒ‰æ—¶åƒé¥­ï¼Œé¿å…æš´é¥®æš´é£Ÿï¼Œè¿‡åº¦æ²¹è…» 3. æ¯æ—¥åŠå°æ—¶é”»ç‚¼æ—¶é—´ï¼Œå¯è·‘æ­¥æˆ–å…¶ä»– å……è¶³çš„è´¢å¯Œé‚£ä¹ˆæœ‰å¤šå°‘è´¢å¯Œç®—æ˜¯å……è¶³çš„è´¢å¯Œå‘¢ï¼Œç­”æ¡ˆæ˜¯å†å¤šä¹Ÿä¸å¤Ÿï¼Œæœªæ¥ä¼šå‘ç”Ÿä»€ä¹ˆæˆ‘ä»¬æ°¸è¿œä¹Ÿä¸çŸ¥é“ï¼Œå¯èƒ½ç°åœ¨è§‰å¾—å®Œå…¨è¶³å¤Ÿçš„é’±åœ¨æœªæ¥ä¼šå˜å¾—è¿œè¿œä¸å¤Ÿï¼Œç°åœ¨è§‰å¾—éå¸¸ç¨³å®šçš„å·¥ä½œåˆ°æœªæ¥ä¹Ÿå¯èƒ½åœ¨çœ¨çœ¼ä¹‹é—´å¤±ä¸šï¼Œæ‰€ä»¥è¦ä¿è¯æœ‰å……è¶³çš„è´¢å¯Œä¸ªäººè®¤ä¸ºåº”è¯¥åšåˆ°æœ‰è¿™ä¸¤æ–¹é¢ 1. ä¿æŒè‡ªå·±çš„ç«äº‰åŠ›ï¼Œä¸ªäººæˆé•¿å¿…é¡»è·Ÿä¸Šä»¥åŠè¶…è¿‡æ—¶é—´çš„æµé€ï¼Œä¸è®ºä½•æ—¶ï¼Œéƒ½èƒ½å¤Ÿé ä¸ªäººèƒ½åŠ›èµšåˆ°è¶³å¤Ÿç”Ÿæ´»çš„é’±ï¼Œå¯ä»¥ä¸ºå¤§å…¬å¸æ‰“å·¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½œä¸ºè‡ªç”±èŒä¸šè€…ï¼Œæ€»ä¹‹å°±æ˜¯èƒ½å¤Ÿé€šè¿‡åŠ³åŠ¨æ¢æ¥æŠ¥é…¬ã€‚ 2. åœ¨ä¸å·¥ä½œçš„æƒ…å†µä¸‹ä¹Ÿèƒ½æœ‰æºæºä¸æ–­çš„ç°é‡‘æµï¼Œæ¢å¥è¯è¯´å°±æ˜¯è¦æœ‰çœŸæ­£å±äºè‡ªå·±çš„äº‹ä¸šï¼Œæˆ–è€…è¯´èµ„æœ¬ï¼Œç„¶åç”¨èµ„æœ¬ä¸ºè‡ªå·±èµšé’±ã€‚ åªè¦èƒ½å¤Ÿåšåˆ°ä¸Šè¿°ä¸¤ç‚¹ï¼Œé‚£ä¹ˆéšç€æ—¶é—´çš„è¿‡å»ï¼Œæ€»ä¼šç§¯ç´¯ä¸‹è¶³å¤Ÿçš„è´¢å¯Œï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªè‰¯æ€§å¾ªç¯çš„è¿‡ç¨‹ã€‚ é‚£ä¹ˆå°±è¿™ä¸¤ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹çº¦æŸæ¡ä»¶ 1. å¯¹äºä¿æŒç«äº‰åŠ›è¿™ä¸€ç‚¹ï¼Œå…¶å®è¯´èµ·æ¥å¾ˆç®€å•ï¼Œå°±ä¸€å¥è¯ï¼šæŒç»­å­¦ä¹ ï¼Œç¡®å®šå¥½è‡ªå·±ä»äº‹çš„ä¸“ä¸šæ–¹å‘ï¼Œç„¶åä¿æŒæ¯å¤©æˆ–æ˜¯æ¯å‘¨éƒ½èŠ±è´¹è¶³å¤Ÿçš„æ—¶é—´å­¦ä¹ è¿™ä¸ªæ–¹å‘çš„ç›¸å…³çŸ¥è¯†ï¼Œæˆ–æ˜¯æ‰“ç£¨æŠ€èƒ½ï¼Œå°±èƒ½å¤Ÿä¸€ç›´ä¿æŒè‡ªå·±çš„ç«äº‰åŠ›ï¼Œå½“ç„¶è¿™é‡Œçš„æŒç»­æ˜¯çœŸæ­£æ„ä¹‰çš„æŒç»­ï¼Œä¸èƒ½å› ä¸ºä»»ä½•åŸå› åœæ­¢ 2. å¯¹äºèµ„æœ¬ï¼Œç›®å‰è‡ªå·±ä¹Ÿä¸æ¸…æ¥šå¦‚ä½•å»ºç«‹è‡ªå·±çš„èµ„æœ¬ï¼Œå”¯ä¸€èƒ½æƒ³åˆ°çš„å°±æ˜¯ä¸æ–­æ‹“å®½è‡ªå·±çš„çœ¼ç•Œï¼Œå¯»æ‰¾å€¼å¾—æŠ•èµ„çš„æœºä¼š è¶³å¤Ÿçš„æ—¶é—´è¶³å¤Ÿçš„æ—¶é—´å°±æ˜¯æŒ‡èƒ½å¤Ÿæœ‰æ—¶é—´åšè‡ªå·±çœŸæ­£æƒ³è¦åšçš„äº‹ï¼Œæ¯”å¦‚ï¼Œæ¯å¤©å»ä¸€ä¸‹å¥èº«æˆ¿ï¼Œå»ä¸€ä¸‹è‹±è¯­åŸ¹è®­ç­ï¼Œæˆ–è€…éŸ³ä¹ç­ï¼Œä»¥åŠå’Œä¸‰äº”å¥½å‹èšä¼šï¼Œç‹¬è‡ªå»æ—…è¡Œç­‰ç­‰ã€‚è¿™ä¸€é¡¹æ˜¯æœ€éš¾ä»¥å®ç°çš„ï¼Œå› ä¸ºé€šå¸¸è´¢å¯Œéƒ½æ˜¯åœ¨ç‰ºç‰²æ—¶é—´çš„å‰æä¸‹æ¢æ¥çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºå°ç å†œæ¥è¯´ï¼Œæ¯å¤©æ—©ä¸Šèµ·åºŠå°±æ˜¯ä¸Šç­ï¼Œä¸‹ç­å›å®¶ä¹‹åå°±æ˜¯ç¡è§‰ï¼Œæ‰€æœ‰çš„æ—¶é—´å…¨éƒ¨åœ¨å…¬å¸é‡Œé¢ï¼Œå·²ç»å’Œæ•´ä¸ªç¤¾ä¼šè„±èŠ‚äº†ï¼Œåƒå¾ˆæ™®é€šçš„ä¸‹ç­ä¹‹åçœ‹ä¸ªç”µå½±åƒä¸ªé¥­ï¼Œé€›é€›å•†åœºä¹‹ç±»çš„æ´»åŠ¨å¯¹äºç¨‹åºå‘˜(ä¸­å›½çš„)æ¥è¯´æ˜¯é¥ä¸å¯åŠçš„ï¼Œå› ä¸ºä¸‹ç­çš„æ—¶å€™ç»å¤§éƒ¨åˆ†åº—éƒ½å·²ç»å…³é—¨äº†ï¼Œå› æ­¤å¯¹äºç¨‹åºå‘˜è¿™ç±»ç”¨å…¨éƒ¨æ—¶é—´æ¢é’±çš„èŒä¸šæ¥è¯´ï¼Œæ˜¯ä¸å¯èƒ½æœ‰å……è¶³çš„æ—¶é—´çš„ã€‚ é‚£ä¹ˆè¦åšåˆ°è¿™ä¸€é¡¹ï¼Œæˆ‘ä»¬éƒ½äº›ä»€ä¹ˆå‘¢ 1. å…¶å®æˆ‘ä»¬åªéœ€è¦æœ‰è¶³å¤Ÿçš„è´¢å¯Œï¼Œä¹Ÿå°±æ˜¯å¾—å…ˆå®ç°ä¸Šä¸€ä¸ªç›®æ ‡ï¼Œå¹¶ä¸”è¿™ä¸ªå®ç°å¾—æ˜¯å»ºç«‹åœ¨æ„å»ºäº†è‡ªå·±çš„èµ„æœ¬ä¹‹åï¼Œå› ä¸ºä¸ºåˆ«äººæ‰“å·¥çš„æƒ…å†µä¸‹ï¼Œè€æ¿æ€»æ˜¯æƒ³è¦èŠ±æœ€å°‘çš„é’±ï¼Œä¹°ä½ æœ€å¤šçš„æ—¶é—´ï¼Œå“ªæ€•å¤šå‡ºæ¥çš„è¿™äº›æ—¶é—´å¯¹ä»–æ¥è¯´æ²¡æœ‰ä»»ä½•ä»·å€¼ï¼ˆè¿™æ˜¯å› ä¸ºä¸­å›½å¤§éƒ¨åˆ†ç®¡ç†è€…ç®¡ç†èƒ½åŠ›éƒ½å¾ˆä½ä¸‹ï¼ŒåªæŠŠå‘˜å·¥å½“åšåŠ³åŠ¨å¯†é›†å‹å·¥ç§åœ¨ä½¿ç”¨ï¼‰ï¼Œæœ‰äº†è‡ªå·±çš„èµ„æœ¬ä¹‹åï¼Œå°±ä¼šæœ‰å¾ˆå¤šäººèŠ±ä»–ä»¬çš„æ—¶é—´æ¥ä¸ºä½ èµšé’±ï¼Œè€Œä½ è‡ªç„¶å°±ä¼šæœ‰è¶³å¤Ÿçš„æ—¶é—´ é‚£ä¹ˆè¿™ä¸€æ¡çš„çº¦æŸæ¡ä»¶æ˜¯ä»€ä¹ˆå‘¢ å…¶å®åŒä¸Šä¸€æ¡çš„çº¦æŸæ¡ä»¶ç±»ä¼¼ï¼Œå°±æ˜¯ä¸€å®šè¦æ‹¥æœ‰è‡ªå·±çš„èµ„æœ¬ï¼Œå°±ç°çŠ¶è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥åŠªåŠ›æå‡è‡ªå·±çš„ç«äº‰åŠ›ï¼Œæ‹“å®½è‡ªå·±çš„çœ¼ç•Œï¼ŒåŒæ—¶å­¦ä¼šç†è´¢ï¼Œç§¯ç´¯å¥½è‡ªå·±çš„åŸå§‹èµ„æœ¬ï¼Œåœ¨æœ‰æœºä¼šçš„æƒ…å†µä¸‹ï¼Œæ¯«ä¸çŠ¹è±«åœ°å»åˆ›å»ºè‡ªå·±çš„èµ„æœ¬ ç»“æŸè¯­æ¢³ç†äº†è¿™ä¹ˆä¸€éä¹‹åï¼Œä¸ºè‡ªå·±åˆ¶å®šäº†ä¸€ä¸ªæ–°çš„è®¡åˆ’ï¼Œé¦–å…ˆï¼ŒæŒ‰ç…§ç¬¬ä¸€ä¸ªçº¦æŸæ¡ä»¶åšåˆ°è‰¯å¥½çš„ä½œæ¯æ—¶é—´å’Œé”»ç‚¼ç­‰ï¼Œè¿™æ˜¯æ‰€æœ‰flagçš„å‰æï¼Œéœ€è¦ä¸€ç›´åšæŒä¸‹å»ï¼Œå…¶æ¬¡ï¼Œå¹³æ—¶ç«‹çš„ä¸€äº›çŸ­æœŸflag(ä¾‹å¦‚æ¯å¹´çš„è®¡åˆ’è¡¨ï¼Œæ¯æœˆè®¡åˆ’è¡¨ç­‰)éœ€è¦å°†æœ€ç»ˆç›®æ ‡è®¾ç½®ä¸ºæé«˜è‡ªå·±çš„ç«äº‰åŠ›ï¼Œè¿™æ ·å°±èƒ½æ»¡è¶³ç¬¬äºŒæ¡çº¦æŸæ¡ä»¶ï¼Œæœ€åï¼Œå¤šæ¥è§¦æ–°é²œäº‹ç‰©ï¼Œå¤šæ€è€ƒï¼Œå¤šç»“è¯†æ–°çš„æœ‹å‹ï¼Œè¿™æ ·å°±èƒ½æ»¡è¶³æœ€åä¸€æ¡çº¦æŸæ¡ä»¶]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ªäººå¯¹é«˜å¹¶å‘æœåŠ¡çš„ç†è§£]]></title>
    <url>%2F2018%2F08%2F16%2F%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[æ€»ç»“ä¸€ä¸‹ å‰è¨€æœ¬æ–‡ä¸»è¦æ˜¯ç®€å•ä»‹ç»ä¸€ä¸‹ä¸€ä¸ªæœåŠ¡ç”±å•æœºéƒ¨ç½²åˆ°åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œè®¿é—®æµé‡ä»ä½åˆ°é«˜ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨åˆ°çš„ç›¸å…³æŠ€æœ¯ï¼Œä»¥åŠéœ€è¦ä¸»è¦åˆ°çš„ç‚¹ ç”±äºæœ¬äººæ°´å¹³æå…¶æœ‰é™ï¼Œå› æ­¤æœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹(æ„Ÿè§‰ä¼šæœ‰å¾ˆå¤š)æ¬¢è¿å¤§å®¶æŒ‡å‡º ä¸€äº›æ¦‚å¿µï¼š å¤šæ ¸cpuä»¥åŠè¶…çº¿ç¨‹æŠ€æœ¯ï¼š é€»è¾‘cpuæ ¸æ•°: ç‰©ç†cpuæ•° * cpu æ ¸æ•° * è¶…çº¿ç¨‹æ•° cpuçš„load averageï¼šå³cpuå½“å‰è´Ÿè½½ï¼Œä¸¾ä¸ªæ —å­ï¼Œè‹¥ä¸€ä¸ªcpu1åˆ†é’Ÿèƒ½å¤Ÿå¤„ç†çš„è¿›ç¨‹æ•°æ˜¯100ï¼Œç„¶ååœ¨è¿™ä¸€åˆ†é’Ÿå†…åªæœ‰20ä¸ªè¿›ç¨‹éœ€è¦è¢«å¤„ç†ï¼Œé‚£ä¹ˆå½“å‰cpuçš„è´Ÿè½½ä¸º20/100 = 0.2é€šå¸¸ä¸€å°æœºå™¨çš„load averageä¸åº”å½“è¶…è¿‡0.7 * é€»è¾‘cpuæ ¸æ•°ï¼Œå½“è¶…è¿‡äº†å°±åº”å½“å»æŸ¥æ‰¾åŸå› ï¼Œè¦æ˜¯è¾¾åˆ° 1.0 * é€»è¾‘cpuæ ¸æ•° é‚£ä¹ˆå°±å¿…é¡»è¦æƒ³åŠæ³•é™ä¸‹æ¥ QPS(Query Per Second):å³æ¯ç§’æŸ¥è¯¢ç‡,æ˜¯å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤šå°‘çš„è¡¡é‡æ ‡å‡† TPS(TransactionPerSecond):å³æ¯ç§’äº‹åŠ¡å¤„ç†é‡ï¼ŒæŒ‡æ¯ç§’é’Ÿç³»ç»Ÿèƒ½å¤Ÿå¤„ç†çš„äº¤æ˜“æˆ–äº‹åŠ¡çš„æ•°é‡ æé«˜å•æœºæ€§èƒ½-å¤šçº¿ç¨‹æŠ€æœ¯ï¼šå¤šçº¿ç¨‹æ˜¯å¦ä¸€å®šèƒ½æå‡æ•ˆç‡ï¼šé¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå¤šçº¿ç¨‹åªæ˜¯å°†ä¸€ä¸ªå¤§çš„è®¡ç®—ä»»åŠ¡åˆ†ä¸ºäº†å¤šä¸ªå¹¶è¡Œçš„å°çš„è®¡ç®—ä»»åŠ¡ï¼Œè¿™äº›æ‹†åˆ†å‡ºæ¥çš„ä»»åŠ¡è¿˜æ˜¯éœ€è¦åˆ†åˆ«å»æŠ¢å cpuæ—¶é—´ç‰‡ï¼Œæ€»ä½“éœ€è¦èŠ±è´¹çš„æ—¶é—´å¹¶æ²¡æœ‰å‡å°‘ï¼Œåªæ˜¯ä½¿å¾—ä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œ å› æ­¤å¤šçº¿ç¨‹èƒ½å¤Ÿæå‡ç¨‹åºæ‰§è¡Œæ•ˆç‡çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯è¿™å°æœºå™¨ä¸Šçš„cpuï¼Œå¦‚æœæ˜¯å•æ ¸çš„è¯ï¼Œå¤šçº¿ç¨‹åè€Œæ¯”å•çº¿ç¨‹æ…¢å› ä¸ºå¢åŠ äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼ŒåŒæ—¶å¯¹äºå¤šæ ¸cpuæ¥è¯´çº¿ç¨‹æ•°ä¹Ÿä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œä¸¾ä¸ªä¾‹4æ ¸8çº¿ç¨‹çš„cpu èƒ½å¤ŸåŒæ—¶å¤„ç†çš„ä»»åŠ¡ä¹Ÿå°±8ä¸ªï¼Œèµ·å†å¤šçº¿ç¨‹ä¹Ÿæ²¡ç”¨ï¼Œåè€Œä¼šå¢åŠ ä¸å¿…è¦çš„å¼€é”€ï¼Œé€šå¸¸æ¥è¯´ä¿è¯åŒæ—¶å¤„ç†çš„ çº¿ç¨‹æ•° = N(CPUæ ¸å¿ƒæ•°) + 1 èƒ½ä½¿ç³»ç»Ÿæ•ˆç‡è¾¾åˆ°æœ€ä¼˜ï¼Œå½“ç„¶è¿™é‡Œæ˜¯æŒ‡è®¡ç®—å¯†é›†å‹çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ioå¯†é›†å‹çš„è¯å¯ä»¥é€‚å½“å¢åŠ çº¿ç¨‹æ•°å› ä¸ºioçº¿ç¨‹å¹¶ä¸ä¸€å®šä¼šå»æŠ¢å cpu å…³äºçº¿ç¨‹å®‰å…¨ï¼šä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Œæ„Ÿè§‰è¯´æ³•å¾ˆå¤šï¼Œä¸ªäººç†è§£çº¿ç¨‹å®‰å…¨é—®é¢˜å°±æ˜¯ä½ å†™çš„ä»£ç åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹æ‰§è¡Œç»“æœæ²¡æœ‰è¾¾åˆ°æœŸæœ›çš„ç›®æ ‡æ¯”å¦‚hashmapåœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹åœ¨resizeçš„æ—¶å€™æœ‰ä¸€å®šå‡ ç‡å¯¼è‡´æ­»å¾ªç¯ï¼Œä»¥åŠå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªå˜é‡è¿›è¡Œcompare and setæ“ä½œç­‰æ€»ç»“äº†ä¸€ä¸‹èƒ½äº§ç”Ÿçº¿ç¨‹å®‰å…¨çš„ä¸€ä¸ªå¿…è¦æ¡ä»¶å°±æ˜¯å…ˆå¾—æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å¹¶æ“ä½œåŒä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™éœ€è¦æ³¨æ„å½“å®šä¹‰äº†ä¸€ä¸ªstatic ç±»å‹çš„å˜é‡ï¼Œæˆ–è€…æ˜¯ç±»æˆå‘˜å˜é‡æ—¶éœ€è¦è€ƒè™‘æ˜¯å¦ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜å¦‚æœæœ‰å¯èƒ½å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé¦–å…ˆå¯ä»¥è€ƒè™‘ä¸€ä¸‹ç”¨threadLocalèƒ½å¦è§£å†³é—®é¢˜ï¼Œå¦‚æœä¸èƒ½åˆ™éœ€è¦è€ƒè™‘åˆç†ä½¿ç”¨é”ï¼ˆä¸è®ºæ˜¯synchronizedå…³é”®å­—è¿˜æ˜¯lockç±»ï¼‰ï¼Œä½†æ˜¯ä½¿ç”¨é”çš„æ—¶å€™ä¹Ÿéœ€è¦æ³¨æ„æ˜¯å¦ä¼šå‡ºç°ä¸¤ä¸ªçº¿ç¨‹å¾ªç¯ä¾èµ–ï¼Œå¯¼è‡´å‡ºç°æ­»é”çš„æƒ…å†µã€‚ é›†ç¾¤åŒ–æœåŠ¡-åˆ†å¸ƒå¼éƒ¨ç½²ï¼šæ‰€è°“åˆ†å¸ƒå¼æœåŠ¡ï¼Œä¸ªäººç†è§£å°±æ˜¯æœåŠ¡å’Œèµ„æºåˆ†æ•£éƒ¨ç½²åˆ°ä¸åŒçš„æœºå™¨ä¸Šä½¿ç”¨åŸå› æ˜¯å› ä¸ºå•æœºéƒ¨ç½²å­˜åœ¨ä¸€ä¸ªæœºå™¨æ€§èƒ½ç“¶é¢ˆï¼Œä»¥åŠå•ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥çº¿ä¸Šæ‰€æœ‰æœåŠ¡éƒ½æ˜¯å¤šæœºéƒ¨ç½²çš„ã€‚å½“çº¿ä¸Šçš„æµé‡å˜å¤§äº†ä¹‹åï¼Œä»¥åŠæä¾›æœåŠ¡çš„æœºå™¨å¤šäº†ä¹‹åï¼Œå¦‚ä½•å»åˆ†å‘è¿™äº›æµé‡ï¼Œä»¥åŠæµé‡éƒ½åº”è¯¥åˆ†å‘åˆ°å“ªå°æœºå™¨ä¸Šè¿™å°±æ˜¯è´Ÿè½½å‡è¡¡è§£å†³çš„é—®é¢˜ æµé‡è½¬å‘-è´Ÿè½½å‡è¡¡ï¼šè´Ÿè½½å‡è¡¡åˆ†ä¸º4å±‚è´Ÿè½½å‡è¡¡å’Œ7å±‚è´Ÿè½½å‡è¡¡ï¼Œå…¶ä¸­4å±‚è´Ÿè½½å‡è¡¡ä½œç”¨äºOSIæ¨¡å‹çš„ç¬¬å››å±‚ä¼ è¾“å±‚ï¼Œè¿™ä¸€å±‚ä¸»è¦çš„åè®®æ˜¯tcpå’Œudpï¼Œç”±æ­¤å¯ä»¥çŸ¥é“è¿™ä¸€å±‚è´Ÿè½½å‡è¡¡çš„ä½œç”¨ä¸»è¦æ˜¯å¯¹æ•°æ®åŒ…çš„è½¬å‘é€šå¸¸å®¢æˆ·ç«¯çš„æµé‡è¿‡æ¥äº†ä¹‹ååˆ°è¾¾4å±‚è´Ÿè½½å‡è¡¡ï¼Œç„¶å4å±‚è´Ÿè½½å‡è¡¡é€šè¿‡ä¿®æ”¹æ•°æ®åŒ…çš„åœ°å€ä¿¡æ¯å°†æµé‡è½¬å‘åˆ°åº”ç”¨æœåŠ¡å™¨ 7å±‚è´Ÿè½½å‡è¡¡çš„è¯ä½œç”¨äºOSIæ¨¡å‹çš„ç¬¬7å±‚åº”ç”¨å±‚ï¼Œä¸»è¦å·¥ä½œä¸ºä»£ç†ï¼Œåœ¨å°†åº”ç”¨å±‚çš„æµé‡å®Œæ•´è§£æå‡ºæ¥ä¹‹åï¼Œ7å±‚è´Ÿè½½å‡è¡¡ä¼šæ–°å»ºä¸€ä¸ªè¿æ¥åˆ°å®é™…éœ€è¦è®¿é—®çš„æœºå™¨ä¸Šï¼Œå°†è§£æå‡ºçš„è¯·æ±‚æŠ•é€’è¿‡å» å…¬å¸ç°çŠ¶ï¼š4å±‚è´Ÿè½½å‡è¡¡ä½¿ç”¨çš„è‡ªç ”mgwï¼Œ7å±‚(webç«¯)ç”¨çš„nginxæˆ–è€…Tengineï¼Œç„¶åå®é™…åˆ°serviceç«¯çš„æ—¶å€™æ˜¯ä½¿ç”¨çš„rpcæœåŠ¡è‡ªå¸¦çš„è´Ÿè½½å‡è¡¡é™„ä¸Šä¸€ç¯‡æ–‡ç«  MGW RPCRPCæœåŠ¡ä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–éƒ¨ç½²åœ¨ä¸åŒæœºå™¨ä¸Šçš„ä¸åŒæœåŠ¡ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ä¸å¤šè®²ï¼Œç”©ç¯‡æ–‡ç« å…ˆ RPC æ•°æ®é‡æ—¥ç›Šå¢åŠ -åˆ†åº“åˆ†è¡¨ï¼šç°åœ¨çº¿ä¸Šæä¾›æœåŠ¡çš„æœºå™¨å·²ç»ç”±ä¸€å°å˜æˆå¤šå°äº†ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ°´å¹³æ‰©å±•ï¼Œå› æ­¤åœ¨æŸç§ç¨‹åº¦ä¸Šå·²ç»è§£å†³äº†é«˜è®¿é—®é‡çš„é—®é¢˜(å…¶å®å¹¶æ²¡æœ‰)åŠ æœºå™¨å°±å¥½äº†å˜›ï¼Œä½†æ¥ä¸‹æ¥è¿˜æ˜¯ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜é¦–å…ˆä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ˜¯å½“æœåŠ¡åœ¨çº¿è¿è¡Œæ—¶é—´æ¯”è¾ƒä¹…æˆ–è€…è®¿é—®é‡æ¯”è¾ƒå¤§ä¹‹åï¼Œé€šå¸¸ä¼šå¯¼è‡´æ•°æ®åº“ä¸­æˆ–è€…è¡¨ä¸­çš„æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œå½“æ•°æ®é‡å¤§äº†ä¹‹åä¸è®ºæ˜¯æ’å…¥è¿˜æ˜¯æŸ¥è¯¢éƒ½ä¼šå˜æ…¢é•¿æ­¤ä»¥å¾€ï¼Œç›´æ¥å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„æœåŠ¡ä¸å¯ç”¨,å¹¶ä¸”è¿™ç§åœºæ™¯ä¸‹æ‰©å‡ å°åº”ç”¨æœºéƒ½æ²¡ç”¨ï¼Œé‚£ä¹ˆæœºæ™ºçš„å°ä¼™ä¼´è‚¯å®šæƒ³åˆ°äº†ï¼Œæ‰©åº”ç”¨æœºæ²¡ç”¨ï¼Œæ‰©DBä¸å°±è¡Œäº†ä¹ˆï¼Œç­”æ¡ˆç¡®å®æ˜¯è¿™æ ·çš„ï¼Œåªä¸è¿‡æˆ‘ä»¬ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒé«˜ç«¯çš„åè¯â€“åˆ†åº“åˆ†è¡¨æ‰€è°“åˆ†åº“åˆ†è¡¨ï¼Œå…¶å®å°±æ˜¯å°†ä¸€ä¸ªåº“æˆ–è€…è¡¨çš„æ•°æ®åˆ†æ•£åˆ°ä¸åŒçš„åº“ï¼Œæˆ–è€…ä¸åŒçš„è¡¨ä¸­ï¼Œç„¶åé€šè¿‡æå‰å®šä¹‰å¥½çš„åˆ†åº“è§„åˆ™å’Œåˆ†è¡¨è§„åˆ™å»è®¿é—®ä¸åŒåº“è¡¨ï¼Œé™ä½å•åº“å•è¡¨è®¿é—®å‹åŠ›æé«˜è¯»å†™æ€§èƒ½(ps:å…¶å®åˆ†åº“åˆ†è¡¨çš„å‰ç½®æŠ€æœ¯æ ˆè¿˜æœ‰ä¸€ä¸ªè¯»å†™åˆ†ç¦»æŠ€æœ¯ï¼Œç¯‡å¹…æœ‰é™ï¼Œå°±ä¸è¯´äº†ï¼Œå¤§è‡´æä¸€å¥å°±æ˜¯å•åº“å†™ï¼Œå¤šåº“è¯») ä¸€äº›å…³æ³¨ç‚¹åˆ†åº“åˆ†è¡¨çš„ä¸´ç•Œå€¼ å•è¡¨æ•°é‡ä¸è¶…è¿‡1000ä¸‡ å•åº“æ•°æ®é‡ä¸è¶…è¿‡300G åˆ†åº“åˆ†è¡¨ä¹‹åä¼šé‡åˆ°çš„é—®é¢˜ åŸºæœ¬çš„æ•°æ®åº“å¢åˆ æ”¹åŠŸèƒ½ åˆ†å¸ƒå¼id åˆ†å¸ƒå¼äº‹åŠ¡ åŠ¨æ€æ‰©å®¹ ä½¿ç”¨zebraè¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼š æœ€åç”©ä¸ªé“¾æ¥ zebra è¯»å¤šå†™å°‘-ç¼“å­˜çš„ä½¿ç”¨ï¼šå½“æŠŠæ•°æ®é‡çš„é—®é¢˜è§£å†³äº†ä¹‹åï¼Œéšç€ä¸šåŠ¡çš„å‘å±•æœåŠ¡è®¿é—®é‡æ—¥ç›Šå¢åŠ ï¼Œä½ ä¼šå‘ç°è¯»å†™åˆ†ç¦»+åˆ†åº“åˆ†è¡¨èƒ½å¤„ç†çš„è¯·æ±‚é‡(è¿™é‡ŒæŒ‡qpsæˆ–Tpsï¼Œä¸è¿‡é€šå¸¸éƒ½æ˜¯è¯»å‹åŠ›æ¯”è¾ƒå¤§)è¿˜æ˜¯æœ‰é™ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„DBç“¶é¢ˆé’ˆå¯¹è¿™ç§æƒ…å†µä¸€ä¸ªå¸¸ç”¨çš„ä¼˜åŒ–æªæ–½å°±æ˜¯ç¼“å­˜ï¼Œåˆ©ç”¨ç¼“å­˜çš„é«˜ååé‡çš„ç‰¹æ€§ï¼Œåœ¨dbå‰éƒ¨ç½²ä¸€å±‚ç¼“å­˜å¯ä»¥å¤§å¤§é™ä½dbçš„è´Ÿè½½ï¼ŒåŒæ—¶é€šå¸¸ç¼“å­˜å“åº”çš„é€Ÿåº¦æ¯”dbå¿«(å†…å­˜ç¼“å­˜)ï¼Œå› æ­¤åœ¨æé«˜ååé‡çš„æƒ…å†µä¸‹è¿˜æé«˜äº†è®¿é—®é€Ÿåº¦ï¼Œç®€ç›´å¦™å•Š rediså’Œtairä»‹ç»:redis çº¯å†…å­˜K-Vç¼“å­˜ï¼Œæ”¯æŒ5ç§æ•°æ®ç»“æ„Stringã€Hash ã€List ã€ Set ã€ ZSet tair æ·˜å®å¼€æº å†…å­˜ç»“æ„ä¸»è¦çœ‹å­˜å‚¨å¼•æ“é€‰æ‹©ï¼Œä¾‹å¦‚MDBï¼ŒLDBç­‰ å…·ä½“å¯è§jiajunå¤§ä½¬çš„åˆ†äº«: å¤§ä½¬çš„åˆ†äº«Redis AND å¤§ä½¬çš„åˆ†äº«Tair ä½¿ç”¨ç¼“å­˜éœ€è¦æ³¨æ„çš„é—®é¢˜ ç¼“å­˜ç©¿é€é€šå¸¸åœ¨ç¼“å­˜æœªå‘½ä¸­çš„æƒ…å†µä¸‹æˆ‘ä»¬å›å»dbå†æŸ¥ä¸€æ¬¡æ•°æ®ï¼Œè¦æ˜¯æœ‰äººä½¿ç”¨ä¸å­˜åœ¨çš„keyæ¥è¯·æ±‚ï¼Œé‚£ä¹ˆæµé‡å°±ç›¸å½“äºç›´æ¥è½åœ¨dbä¸Š è§£å†³æ–¹æ¡ˆï¼šè®¿é—®dbå‰è¿›è¡Œåˆç†æ€§æ ¡éªŒ ç¼“å­˜å‡»ç©¿å•ä¸ªkeyåœ¨è¿‡æœŸçš„ä¸€ç¬é—´è¢«å¤§é‡è¯·æ±‚è®¿é—® è§£å†³æ–¹æ¡ˆï¼šåœ¨è®¿é—®dbå‰ï¼Œå…ˆåŠ ä¸ªäº’æ–¥é”ï¼Œä¾‹å¦‚setnx ç¼“å­˜é›ªå´©æ‰¹é‡keyåœ¨åŒä¸€æ—¶é—´è¿‡æœŸï¼Œå¤§é‡è¯·æ±‚ç›´æ¥åˆ°è¾¾dbï¼Œç„¶ådbè´Ÿè½½é£™å‡ï¼Œå¼•èµ·é›ªå´© è§£å†³æ–¹æ¡ˆï¼šé‡‡ç”¨ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œä¾‹å¦‚åœ¨å›ºå®šè¿‡æœŸæ—¶é—´çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ ä¸å¿…è¦æµç¨‹çš„å¼‚æ­¥åŒ–-MQï¼šé‚£ä¹ˆåœ¨åŸæœ‰çš„ç³»ç»Ÿä¸ŠåŠ ä¸Šä¸€å±‚ç¼“å­˜ä¹‹åå°±å¯ä»¥é«˜æ•æ— å¿§äº†ä¹ˆï¼Œç­”æ¡ˆå½“ç„¶æ˜¯NOï¼Œä¸‹é¢åˆ—ä¸¾ä¸€äº›åœºæ™¯ï¼š å†™æµé‡éå¸¸é«˜ ç¼“å­˜é€šå¸¸åªè¢«ç”¨æ¥è§£å†³è¯»æ€§èƒ½é—®é¢˜ï¼Œæœ€ç»ˆæ•°æ®ä¸€è‡´æ€§è¿˜æ˜¯è¦é dbæ¥ä¿è¯(å…¶å®å°±æ˜¯è¦æŠŠæ•°æ®åˆ·åˆ°ç£ç›˜ä¸Š)ï¼Œå› æ­¤ä¸å¯èƒ½å°†æ‰€æœ‰çš„å†™éƒ½æ”¾åˆ°ç¼“å­˜ä¸Š ç¬æ—¶æµé‡æš´å¢ ç³»ç»Ÿæµé‡åœ¨çŸ­æ—¶é—´å†…å€å¢ï¼Œä¾‹å¦‚èŠ‚æ—¥æˆ–è€…æ´»åŠ¨æœŸé—´ï¼Œçªå‘æµé‡å¾ˆæœ‰å¯èƒ½å°†ç¼“å­˜ç›´æ¥å‹å®ï¼Œç„¶åç³»ç»ŸGG é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œä¹ä¸€çœ‹ä¼¼ä¹æ˜¯æ²¡ä»€ä¹ˆå¥½çš„åŠæ³•å¯ä»¥è§£å†³äº†(å…¶å®æœ‰ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“)ï¼Œä¸è¿‡é’ˆå¯¹æŸäº›ç‰¹æ®Šçš„åœºæ™¯æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹çš„æ¯”å¦‚ï¼š æˆ‘å¦‚æœèƒ½å‡å°‘æ¯ä¸ªè¯·æ±‚çš„å¤„ç†æ—¶é—´ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å°±èƒ½å¤Ÿæé«˜æˆ‘å•æœºçš„qpsï¼Œé‚£ä¹ˆç¬æ—¶æµé‡æ¥çš„æ—¶å€™æ˜¯ä¸æ˜¯å°±ä¸è‡³äºå‹å¤¸æ•´ä¸ªç³»ç»Ÿäº† å¯¹äºå†™è¯·æ±‚çš„è¯å¦‚æœå¯¹äºå“åº”æ—¶é—´çš„è¦æ±‚ä¸æ˜¯é‚£ä¹ˆé«˜ï¼Œé‚£ä¹ˆå…ˆæŠŠè¿™äº›è¯·æ±‚éƒ½ä¿å­˜ä¸‹æ¥ï¼Œç„¶åæ…¢æ…¢å¤„ç†ä¸å°±å¥½äº† é’ˆå¯¹ç¬¬ä¸€ç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œæˆ‘ä»¬èƒ½æƒ³åˆ°çš„ä¸€ä¸ªç‚¹æ˜¯å°†ç³»ç»Ÿæµç¨‹ä¸­çš„ä¸€äº›ä¸é‚£ä¹ˆé‡è¦çš„åˆ†æ”¯æµç¨‹ç”±åŒæ­¥æ”¹ä¸ºå¼‚æ­¥ï¼Œä¾‹å¦‚æ›´æ–°ç¼“å­˜çš„æ“ä½œç„¶åç¬¬äºŒç§ä¼˜åŒ–æ–¹æ¡ˆå…¶å®ä¹Ÿæ˜¯ä¸€ç§å¼‚æ­¥åŒ–çš„æ€æƒ³ï¼Œå°†åŒæ­¥çš„äº‹æ”¹ä¸ºå¼‚æ­¥å»åšï¼Œåªè¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§å°±å¥½äº†ã€‚ é‚£ä¹ˆæ€ä¹ˆæ¥å®ç°è¿™ç§å¼‚æ­¥åŒ–æ“ä½œå‘¢ï¼Œè¿™ä¸ªæ—¶å€™å°±è½®åˆ°MQ(MessageQueue)å¤§ä½¬å‡ºåœºäº†ã€‚ æ‰€è°“MQï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œproducerè´Ÿè´£ç”Ÿäº§æ¶ˆæ¯ï¼Œç„¶åconsumeræ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸­é—´è¿˜æœ‰ä¸€ä¸ªbrokerç”¨æ¥ä¿å­˜ç”Ÿäº§çš„æ¶ˆæ¯åƒæˆ‘ä»¬åˆšæ‰è¯´çš„è¿™äº›åœºæ™¯æˆ‘ä»¬å¯ä»¥è®©æˆ‘ä»¬çš„æœåŠ¡å™¨æ—¢ä½œproduceråˆåšconsumerï¼Œå°†éœ€è¦å¼‚æ­¥å¤„ç†çš„ä»»åŠ¡ç»Ÿç»Ÿå…ˆå‘é€åˆ°broker,ç„¶åæ…¢æ…¢å–å›æ¥æ¶ˆè´¹å½“ç„¶MQä¹Ÿå¹¶æ²¡æœ‰æˆ‘è¯´çš„è¿™ä¹ˆç®€å•ï¼Œç¯‡å¹…æœ‰é™åŠ ä¸Šä¸ªäººèƒ½åŠ›æœ‰é™æˆ‘è¿™é‡Œå°±ä¸ç»†è¯´äº†ï¼Œå…·ä½“å¯ä»¥çœ‹çœ‹æˆ‘å¸å¤§ä½¬çš„åšæ–‡ è¿™ä¸ªæ˜¯å¤§ä½¬æ–‡ç«  kafkaä»‹ç»:æˆ‘å¸ä½¿ç”¨çš„MQæ˜¯mafkaï¼Œå…¶å®å°±æ˜¯å°è£…äº†ä¸€ä¸‹kafkaï¼Œé’ˆå¯¹kafkaç¯‡å¹…æœ‰é™åŠ ä¸Šä¸ªäººèƒ½åŠ›æœ‰é™ä¹Ÿä¸ç»†è¯´äº†ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹ æå‡å¯ç”¨æ€§-é™æµå’Œç†”æ–­é™çº§ï¼šå½“ç³»ç»Ÿçš„å¯ç”¨æ€§ä¾èµ–ä¸å…¶ä»–æœåŠ¡çš„å¯ç”¨æ€§æ—¶ï¼Œç†”æ–­é™çº§æœºåˆ¶æ˜¯æå‡ç³»ç»Ÿæœ¬èº«å¯ä½¿ç”¨æ€§çš„ä¸€å¤§åˆ©å™¨åŒæ—¶é’ˆå¯¹çªå‘æµé‡ï¼Œé™æµå·¥å…·çš„ä½¿ç”¨ä¹Ÿæ˜¯ç›¸å½“æœ‰å¿…è¦çš„ rhinoä»‹ç»ï¼šRhino]]></content>
  </entry>
  <entry>
    <title><![CDATA[javaç¨‹åºå‘˜åŸºæœ¬ç´ å…»(äºŒ) æ›´å¤æ‚çš„javaç¨‹åº]]></title>
    <url>%2F2018%2F07%2F19%2Fjava%E7%A8%8B%E5%BA%8F%E5%91%98%E5%9F%BA%E6%9C%AC%E7%B4%A0%E5%85%BB2%2F</url>
    <content type="text"><![CDATA[ä½•å¦‚ä½¿ç”¨ä¸­é—´ä»¶ï¼Œå·¥å…·ç­‰åªæ˜¯æœ¯çš„å±‚æ¬¡ï¼Œæˆ‘ä»¬æ›´éœ€è¦å…³æ³¨èƒŒåçš„é“çš„å±‚æ¬¡ ioè¦å†™åŠŸèƒ½æ›´å¼ºå¤§çš„ç¨‹åºï¼Œä¸å¯é¿å…è¦æ¶‰åŠioï¼Œä¸è®ºæ˜¯ä»æ–‡ä»¶ä¸­è·å–è¿˜æ˜¯ä»ç½‘ç»œä¸­è·å– java.io åº“ å¾…å¡«å‘ bioã€nioã€aio å¯¹æ¯” å¾…å¡«å‘ æˆ‘å¸å¤§ä½¬å†™çš„NIO ç½‘ç»œç¼–ç¨‹é™¤éä½ ä¸€ç›´éƒ½æ˜¯å†™å•æœºç¨‹åºè‡ªå¨±è‡ªä¹ï¼Œä¸ç„¶æˆ‘ä»¬æ€»ä¼šéœ€è¦å°†è‡ªå·±çš„æœåŠ¡å‘å¸ƒåˆ°ç½‘ç»œä¸Š javaç½‘ç»œç¼–ç¨‹ å¾…å¡«å‘ å¤šçº¿ç¨‹ç°åœ¨çš„è®¡ç®—æœºé€šå¸¸éƒ½ä¸æ­¢ä¸€ä¸ªCPUï¼ŒåŒæ—¶ç”±äºCPUçš„è¶…çº¿ç¨‹æŠ€æœ¯ï¼Œå¯ä»¥ä½¿ä¸€ä¸ªCPUåŒæ—¶å¤„ç†ä¸¤ä¸ªçº¿ç¨‹ï¼Œä½¿å¾—è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›å¤§å¹…æå‡ä¸ºäº†æ›´å¥½åœ°å‹æ¦¨æœºå™¨çš„æ€§èƒ½ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹æŠ€æœ¯å¿…ä¸å¯å°‘ Javaå¤šçº¿ç¨‹ å¾…å¡«å‘ ThreadPoolExecutor æˆ‘å†™çš„]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
        <tag>javaç¨‹åºå‘˜åŸºæœ¬ç´ å…»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaç¨‹åºå‘˜åŸºæœ¬ç´ å…»(ä¸€) ä»javaæ–‡ä»¶åˆ°åœ¨JVMä¸­è¿è¡Œ]]></title>
    <url>%2F2018%2F07%2F12%2Fjava%E7%A8%8B%E5%BA%8F%E5%91%98%E5%9F%BA%E6%9C%AC%E7%B4%A0%E5%85%BB%2F</url>
    <content type="text"><![CDATA[ä¸ªäººç†è§£çš„ä½œä¸ºä¸€ä¸ªjavaç¨‹åºå‘˜åº”å½“æœ‰çš„åŸºæœ¬ç´ å…»ç³»åˆ—ï¼Œåªç»´æŠ¤ä¸€ä¸ªç›®å½•ä½œä¸ºæŸ¥ç¼ºè¡¥æ¼ç”¨ .java æ–‡ä»¶java ç å†œç”Ÿæ¶¯çš„èµ·ç‚¹æ˜¯ä»ä¸€ä¸ª.javaæ–‡ä»¶å¼€å§‹çš„ javaè¯­æ³• å¾…å¡«å‘ .class æ–‡ä»¶.java æ–‡ä»¶é€šè¿‡javacç¼–è¯‘åæ¯ä¸ªç±»éƒ½ä¼šç”Ÿæˆä¸€ä¸ª.classæ–‡ä»¶.classæ–‡ä»¶æ˜¯JVMç”Ÿæ€åœˆé‡Œæ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯javaå®ç°è·¨å¹³å°éƒ¨ç½²çš„åŸºç¡€ .class æ–‡ä»¶ç»“æ„ å¾…å¡«å‘ å­—èŠ‚ç æŒ‡ä»¤å«ä¹‰ å¾…å¡«å‘ è¿™ä¸ªä¸é”™ javaè¯­æ³•å¦‚ä½•è½¬æ¢ä¸ºå­—èŠ‚ç (ä¸é‚£ä¹ˆé‡è¦) å¾…å¡«å‘ .class æ–‡ä»¶åŠ è½½è¿›å†…å­˜ä¸­è¦ä½¿ç”¨.classæ–‡ä»¶å…ˆå¾—æŠŠ.classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ ç±»åŠ è½½æœºåˆ¶ å¾…å¡«å‘ å†…å­˜ä¸­çš„.classæ–‡ä»¶å¦‚ä½•è½¬åŒ–ä¸ºæœºå™¨ç å­—èŠ‚ç è¿˜æ˜¯èƒ½è¢«JVMè¯†åˆ«ï¼Œä½†æ˜¯æ­£åœ¨è¿›è¡Œè¿ç®—çš„è¿˜æ˜¯æœºå™¨æœ¬èº«ï¼Œæ‰€ä»¥éœ€è¦æŠŠå­—èŠ‚ç è½¬åŒ–ä¸ºå¯è¢«æœºå™¨è¯†åˆ«çš„æœºå™¨ç  è§£é‡Šå™¨ç¼–è¯‘å™¨ï¼ŒJITç­‰ å¾…å¡«å‘ GCç¨‹åºè¿è¡Œèµ·æ¥ä¹‹åï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦ä¸æ–­åœ°ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œæ€ä¹ˆæ¥åˆ†é…å’Œå›æ”¶å†…å­˜å°±éœ€è¦æˆ‘ä»¬å…³æ³¨ä¸€ä¸‹äº†ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„VMéƒ½æ˜¯hotspot VMhotspot VMä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„åƒåœ¾æ”¶é›†å™¨ JVM å†…å­˜åˆ†é…æ–¹æ¡ˆ(hotSpot) å¾…å¡«å‘ JVM æ”¶é›†å™¨(hotSpot) å¾…å¡«å‘ Java å¸¸ç”¨è°ƒè¯•å·¥å…·(jsp,jmap,jstackç­‰) å¾…å¡«å‘]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
        <tag>javaç¨‹åºå‘˜åŸºæœ¬ç´ å…»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[innodbä¸ºä»€ä¹ˆè¦ä½¿ç”¨B+æ ‘åšç´¢å¼•]]></title>
    <url>%2F2018%2F06%2F21%2Finnodb%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8B-%E6%A0%91%E5%81%9A%E7%B4%A2%E5%BC%95%2F</url>
    <content type="text"><![CDATA[mysql æä¾›çš„å­˜å‚¨å¼•æ“æœ‰å¤šç§ï¼Œç›®å‰æˆ‘åªç”¨è¿‡innodbï¼Œå› æ­¤å°±åªè°ˆè®ºinnodb ä¸€ä¸ªç–‘é—®innodb æ˜¯é‡‡ç”¨å¤šä¸ªè¾…åŠ©ç´¢å¼•å’Œä¸€ä¸ªèšç°‡ç´¢å¼•çš„å­˜å‚¨ç»“æ„ï¼Œå…¶ä¸­è¾…åŠ©ç´¢å¼•å’Œèšç°‡ç´¢å¼•éƒ½æ˜¯é‡‡ç”¨B+æ ‘çš„ç»“æ„æ¥è¿›è¡Œå­˜å‚¨çš„å”¯ä¸€çš„åŒºåˆ«åœ¨äºè¾…åŠ©ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸»é”®ï¼Œè€Œèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯æ•°æ®ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦é‡‡ç”¨B+æ ‘è¿™ç§ç»“æ„æ¥å­˜å‚¨å‘¢ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ä¹ˆ ä¸ªäººæƒ³æ³• æ ‘å½¢ç»“æ„å¯ä»¥æœ‰æ•ˆé™ä½æŸ¥è¯¢å’Œæ’å…¥æ•ˆç‡åŸºæœ¬ç»´æŒåœ¨å¸¸æ•°çº§O(logn) å¯¹äºä»ç¡¬ç›˜ä¸­è¯»å–æ•°æ®çš„æ“ä½œè€Œè¨€ï¼Œä¸è®ºæ˜¯ä¼ ç»Ÿçš„æœºæ¢°ç£ç›˜è¿˜æ˜¯ssdï¼Œéšæœºioçš„å¼€é”€æ€»ä¼šå¤§äºé¡ºåºioåŸºäºå†…å­˜é¢„åŠ è½½æœºåˆ¶ï¼ŒåŠæ¯æ¬¡ä»ç£ç›˜åŠ è½½æ•°æ®åˆ°å†…å­˜æ—¶æ€»ä¼šå°†ç›¸é‚»æ•°æ®ä¸€å¹¶åŠ è½½åˆ°å†…å­˜ï¼Œé€šå¸¸åŠ è½½åˆ°å†…å­˜çš„æ•°æ®å¤§å°ä¸ºä¸€é¡µï¼Œè‹¥å°†B+æ ‘ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ç½®ä¸ºä¸€é¡µé‚£ä¹ˆï¼ŒæŸ¥æ‰¾ä¸€æ¡è®°å½•éœ€è¦è¿›è¡Œçš„IOæ“ä½œæ¬¡æ•°å°±åˆšå¥½æ˜¯B+æ ‘çš„é«˜åº¦ï¼Œåˆšå¥½B+æ ‘çš„é«˜åº¦æ˜¯é«˜åº¦å¯æ§çš„ã€‚]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RPCåŸç†]]></title>
    <url>%2F2018%2F06%2F02%2FRPC%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[åŸç†è®²è§£ç½‘ä¸Šä¸€å¤§ç¯‡å°±ä¸å¤åˆ¶ç²˜è´´äº† è´´ä¸€ç¯‡è‡ªå·±è§‰å¾—è®²å¾—æ¯”è¾ƒæ¸…æ¥šçš„ RPCåŸç† ä¸ªäººæ€»ç»“RPCæ˜¯ä¸ºäº†ç®€åŒ–éƒ¨ç½²åœ¨ä¸åŒæœºå™¨ä¸Šçš„ä¸åŒæœåŠ¡ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œä½¿ç”¨ç”ŸæˆåŠ¨æ€ä»£ç†ç±»çš„æ–¹å¼ï¼Œä½¿å¾—è°ƒç”¨è¿œç¨‹æœåŠ¡å’Œè°ƒç”¨æœ¬åœ°æœåŠ¡å¹¶æ— åŒºåˆ«ï¼Œå…¶ä¸­æ¯”è¾ƒé‡è¦çš„ç‚¹æœ‰ JDkçš„åŠ¨æ€ä»£ç† æœåŠ¡çš„å‘å¸ƒå’ŒæœåŠ¡ä¸å¯ç”¨æ—¶ä¸‹çº¿ï¼Œä»¥åŠå®¢æˆ·ç«¯å¦‚ä½•æŸ¥æ‰¾å¯ç”¨æœåŠ¡ç­‰,é€šå¸¸ä½¿ç”¨zkå®ç°ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸ºä¸€å°æœºå™¨ å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„é€šä¿¡åè®®å’ŒæŠ¥æ–‡ï¼Œé€šå¸¸ä½¿ç”¨è‡ªå®šä¹‰æŠ¥æ–‡,tcpåè®®ï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨Nettyé€šè¿‡NIOçš„æ–¹å¼é€šä¿¡ åºåˆ—åŒ–æ–¹å¼çš„é€‰æ‹©å¤šç§ï¼Œæˆ‘å¸é»˜è®¤ä½¿ç”¨hessianåºåˆ—åŒ–]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>æ—¥å¸¸å­¦ä¹ </tag>
        <tag>RPC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Threadpoolexecutoræºç å­¦ä¹ ]]></title>
    <url>%2F2018%2F06%2F02%2FThreadpoolexecutor%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[é—®é¢˜ Threadpoolexecutor å„ä¸ªå‚æ•°çš„å«ä¹‰ çº¿ç¨‹çš„åˆ›å»ºé”€æ¯ç­–ç•¥ å¦‚ä½•å®ç° ä½¿ç”¨åœºæ™¯é€šå¸¸ä½¿ç”¨JDKçš„executoræ¡†æ¶æ¥æ„å»ºçº¿ç¨‹æ± å’Œæäº¤ä»»åŠ¡ ExecutorService executorService = Executors.newFixedThreadPool(10); executorService.submit(new Callable&lt;String&gt;() { @Override public String call() throws Exception { dosomething(); return null; } }); åœ¨executoræ¡†æ¶ä¸­ï¼ŒExecutorServiceæœ‰å¤šä¸ªå®ç°ç±»ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»çš„ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„ä¸ºThreadPoolExecutor å‚æ•°è¯´æ˜æ„é€ å‡½æ•°ï¼š public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) { if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler; } corePoolSize æ ¸å¿ƒçº¿ç¨‹æ•°,çº¿ç¨‹æ± å†…æ’å®šçº¿ç¨‹æ•°é‡ maximumPoolSize æœ€å¤§çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± å†…è¿è¡Œå­˜åœ¨çš„æœ€å¤§çº¿ç¨‹æ•° keepAliveTime éæ ¸å¿ƒçº¿ç¨‹çš„è¿‡æœŸæ—¶é—´ unit è¿‡æœŸæ—¶é—´çš„å•ä½ workQueue ç”¨äºå­˜æ”¾ä»»åŠ¡çš„å·¥ä½œé˜Ÿåˆ— threadFactory çº¿ç¨‹å·¥å‚ï¼Œç”¨äºç”Ÿäº§çº¿ç¨‹ handler æ‹’ç»ç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹è¾¾åˆ°æœ€å¤§æ•°é‡æ—¶ï¼Œå¯¹æ–°æäº¤çš„ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥ ç±»ç»“æ„å›¾ ThreadPoolExecutor ç»§æ‰¿äº AbstractExecutorServiceï¼Œå®ç°äº†Executorä»¥åŠExecutorServiceæ¥å£å› æ­¤åŒæ—¶åŒ…å«submitå’Œexecuteæ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆä»æœ€æ ¸å¿ƒçš„executeæ–¹æ³•æ¥è¿›è¡Œåˆ†æ æºç åˆ†æexecuteæ–¹æ³•æºç å¦‚ä¸‹ï¼š int c = ctl.get(); if (workerCountOf(c) &lt; corePoolSize) { if (addWorker(command, true)) return; c = ctl.get(); } if (isRunning(c) &amp;&amp; workQueue.offer(command)) { int recheck = ctl.get(); if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); else if (workerCountOf(recheck) == 0) addWorker(null, false); } else if (!addWorker(command, false)) reject(command); å…¶ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªå˜é‡æ˜¯ctl,è¿™æ˜¯ä¸€ä¸ªAtomicIntegerå˜é‡ï¼Œå…¶ä¸­é«˜3ä½è¡¨ç¤ºçº¿ç¨‹æ± çŠ¶æ€ï¼Œä½29ä½è¡¨ç¤ºçº¿ç¨‹æ•°é‡æˆ‘ä»¬ç»§ç»­çœ‹æºç ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨çš„åœºæ™¯æ˜¯åˆšåˆšåˆå§‹åŒ–äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º3ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º5 é¦–å…ˆæ˜¯è°ƒç”¨workerCountOfæ–¹æ³•æ¥è·å¾—å½“å‰çº¿ç¨‹æ•°ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯ç¬¬ä¸€æ¬¡æäº¤ä»»åŠ¡ï¼Œå› æ­¤å½“å‰çº¿ç¨‹æ•°ä¸º0ï¼Œå°äºæ ¸å¿ƒçº¿ç¨‹æ•°3ï¼Œå› æ­¤ä¼šæ‰§è¡ŒaddWorkeræ–¹æ³•æˆ‘ä»¬ç»§ç»­debugåˆ°addWorkeræ–¹æ³•é‡Œï¼Œçœ‹çœ‹éƒ½åšäº†äº›ä»€ä¹ˆæ“ä½œã€‚ addWorkerä¸€å…±åšäº†ä¸¤ä¸ªæ“ä½œï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç¬¬ä¸€éƒ¨åˆ† step 1:å¯¹ctlåšcasæ“ä½œå¢åŠ çº¿ç¨‹æ•° retry: for (;;) { int c = ctl.get(); int rs = runStateOf(c); // Check if queue empty only if necessary. if (rs &gt;= SHUTDOWN &amp;&amp; ! (rs == SHUTDOWN &amp;&amp; firstTask == null &amp;&amp; ! workQueue.isEmpty())) return false; for (;;) { int wc = workerCountOf(c); if (wc &gt;= CAPACITY || wc &gt;= (core ? corePoolSize : maximumPoolSize)) return false; if (compareAndIncrementWorkerCount(c)) break retry; c = ctl.get(); // Re-read ctl if (runStateOf(c) != rs) continue retry; // else CAS failed due to workerCount change; retry inner loop } } é¦–å…ˆå…ˆæ£€æŸ¥äº†ä¸€ä¸‹å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€ï¼Œè‹¥å½“å‰çŠ¶æ€ä¸æ¥å—æ–°çš„workåˆ™ç›´æ¥è¿”å›false ç„¶åå°±æ˜¯æ£€æŸ¥å½“å‰çº¿ç¨‹æ•°æ˜¯å¦è¶…è¿‡é™åˆ¶ï¼Œå¯¹äºæ ¸å¿ƒçº¿ç¨‹æ¥è¯´æ˜¯ä¸èƒ½è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°ä¹Ÿå°±æ˜¯3ï¼Œå¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ä¸èƒ½è¶…è¿‡æœ€å¤§çº¿ç¨‹æ•°ï¼Œä¹Ÿå°±æ˜¯5 ç„¶åå°±æ˜¯casæ“ä½œï¼Œå¢åŠ çº¿ç¨‹æ•°ï¼Œè‹¥æˆåŠŸï¼Œåˆ™è·³å‡ºå¾ªç¯ æ“ä½œ3åœ¨å¹¶å‘æƒ…å†µä¸‹æœ‰å¯èƒ½å‡ºç°æ“ä½œå¤±è´¥çš„åœºæ™¯ï¼Œè‹¥å¤±è´¥åˆ™å…ˆæ£€æŸ¥ä¸€ä¸‹å½“å‰çº¿ç¨‹æ± çŠ¶æ€æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œè‹¥å˜åŒ–äº†åˆ™è·³åˆ°æ­¥éª¤1è‹¥çŠ¶æ€æœªå‘ç”Ÿå˜åŒ–åˆ™è·³åˆ°æ“ä½œ2 åœ¨æˆåŠŸæ·»åŠ çº¿ç¨‹æ•°ä¹‹åå°±å¼€å§‹çœŸæ­£åœ°æ·»åŠ ä»»åŠ¡äº† step 2 æ·»åŠ worker boolean workerStarted = false; boolean workerAdded = false; Worker w = null; try { final ReentrantLock mainLock = this.mainLock; w = new Worker(firstTask); final Thread t = w.thread; if (t != null) { mainLock.lock(); try { // Recheck while holding lock. // Back out on ThreadFactory failure or if // shut down before lock acquired. int c = ctl.get(); int rs = runStateOf(c); if (rs &lt; SHUTDOWN || (rs == SHUTDOWN &amp;&amp; firstTask == null)) { if (t.isAlive()) // precheck that t is startable throw new IllegalThreadStateException(); workers.add(w); int s = workers.size(); if (s &gt; largestPoolSize) largestPoolSize = s; workerAdded = true; } } finally { mainLock.unlock(); } if (workerAdded) { t.start(); workerStarted = true; } } } finally { if (! workerStarted) addWorkerFailed(w); } å¯ä»¥çœ‹åˆ°é¦–å…ˆæ˜¯å°†taskåšä¸ºå…¥å‚newäº†ä¸€ä¸ªWorkerçš„å¯¹è±¡,æˆ‘ä»¬å…ˆå»çœ‹çœ‹Workerå¯¹è±¡çš„æ„é€ å‡½æ•° Worker(Runnable firstTask) { setState(-1); // inhibit interrupts until runWorker this.firstTask = firstTask; this.thread = getThreadFactory().newThread(this); } Workeræ˜¯ThreadPoolExecutorçš„ä¸€ä¸ªå†…éƒ¨ç±»ç»§æ‰¿äº†AbstractQueuedSynchronizerå®ç°äº†Runnableæ¥å£æ„é€ å‡½æ•°åšçš„äº‹æƒ…å°±æ˜¯å°†aqsçš„stateç½®ä¸º-1ï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬æä¾›çš„çº¿ç¨‹å·¥å‚åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯è¿™é‡Œè°ƒç”¨newThreadæ–¹æ³•ä¼ çš„å‚æ•°æ˜¯thisï¼Œä¹Ÿå°±æ˜¯è¯´åˆ›å»ºçš„æ‰€æœ‰çº¿ç¨‹å®é™…è¿è¡Œçš„æ—¶å€™éƒ½æ˜¯æ‰§è¡Œçš„Workerç±»çš„runæ–¹æ³• æ¥ä¸‹æ¥å°±æ˜¯å°†Workerå¯¹è±¡æ·»åŠ è¿›workersä¸­ï¼Œåœ¨æ·»åŠ å‰åŒæ ·ä¼šå…ˆåˆ¤æ–­å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€æ˜¯å¦å¯ä»¥æ·»åŠ çº¿ç¨‹å¦å¤–ç”±äºworkersæ˜¯ä¸€ä¸ªhashSetï¼ŒhashSetåº•å±‚åˆæ˜¯è°ƒç”¨çš„hashmapå› æ­¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æ­¤å¤„è¿˜ä½¿ç”¨äº†ä¸€ä¸ªå…¨å±€çš„ReentrantLockæ¥å¯¹æ·»åŠ æ–¹æ³•åŠ é” å¦‚æœæ·»åŠ çº¿ç¨‹æˆåŠŸçš„è¯ï¼Œåˆ™ä¼šå¯åŠ¨è¯¥çº¿ç¨‹ï¼Œè‹¥å¤±è´¥çš„è¯åˆ™ä¼šè°ƒç”¨addWorkerFailedæ–¹æ³•ï¼ŒaddWorkerFailedåšçš„äº‹å°±æ˜¯æŠŠWorkerå¯¹è±¡ä»workersä¸­ç§»é™¤ï¼Œå¹¶å°†å½“å‰çº¿ç¨‹æ•°å‡1åŒæ—¶è°ƒç”¨tryTerminateå°è¯•ç»ˆæ­¢çº¿ç¨‹æ± ã€‚ tryTerminateæ–¹æ³•ä¸»è¦åšçš„äº‹æƒ…æœ‰: è‹¥å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€ä¸å¯ç»ˆæ­¢ï¼Œåˆ™ä¸åšä»»ä½•äº‹ è‹¥çº¿ç¨‹æ± çš„çŠ¶æ€ä¸ºå¯ä»¥ç»ˆæ­¢çŠ¶æ€ï¼Œä½†å·¥ä½œé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆ™interruptæ‰workersä¸­çš„ä¸€ä¸ªçº¿ç¨‹ è‹¥çº¿ç¨‹æ± çš„çŠ¶æ€ä¸ºå¯ä»¥ç»ˆæ­¢çŠ¶æ€ä¸”å·¥ä½œé˜Ÿåˆ—ä¸ºç©ºï¼Œå°†å½“å‰çº¿ç¨‹æ± çŠ¶æ€ç½®ä¸ºTERMINATED å‰é¢è¯´åˆ°äº†å¯åŠ¨çº¿ç¨‹å…¶å®æ˜¯è°ƒç”¨Workerçš„runæ–¹æ³•ï¼Œæˆ‘ä»¬å»çœ‹çœ‹runæ–¹æ³•é‡Œé¢åˆ°åº•åšäº†ä»€ä¹ˆ runè°ƒç”¨çš„æ˜¯çˆ¶ç±»ä¸­çš„runWorkæ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ Thread wt = Thread.currentThread(); Runnable task = w.firstTask; w.firstTask = null; w.unlock(); // allow interrupts boolean completedAbruptly = true; try { while (task != null || (task = getTask()) != null) { w.lock(); // If pool is stopping, ensure thread is interrupted; // if not, ensure thread is not interrupted. This // requires a recheck in second case to deal with // shutdownNow race while clearing interrupt if ((runStateAtLeast(ctl.get(), STOP) || (Thread.interrupted() &amp;&amp; runStateAtLeast(ctl.get(), STOP))) &amp;&amp; !wt.isInterrupted()) wt.interrupt(); try { beforeExecute(wt, task); Throwable thrown = null; try { task.run(); } catch (RuntimeException x) { thrown = x; throw x; } catch (Error x) { thrown = x; throw x; } catch (Throwable x) { thrown = x; throw new Error(x); } finally { afterExecute(task, thrown); } } finally { task = null; w.completedTasks++; w.unlock(); } } completedAbruptly = false; } finally { processWorkerExit(w, completedAbruptly); } å»æ‰ä¸€äº›ä¸é‡è¦çš„é€»è¾‘æˆ‘ä»¬å¯ä»¥çœ‹åˆ°runWorkæ–¹æ³•å°±æ˜¯ç”¨å½“å‰çº¿ç¨‹ä¸åœåœ°å»å–taskï¼Œç„¶åè°ƒç”¨taskçš„runæ–¹æ³•taskå¯ä»¥æ˜¯ä¸€å¼€å§‹åˆ›å»ºè¿™ä¸ªworkæ—¶åˆå§‹åŒ–çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è°ƒç”¨getTaskæ–¹æ³•è·å–åˆ°çš„ getTaskæ–¹æ³•å¦‚ä¸‹ï¼š boolean timedOut = false; // Did the last poll() time out? retry: for (;;) { int c = ctl.get(); int rs = runStateOf(c); // Check if queue empty only if necessary. if (rs &gt;= SHUTDOWN &amp;&amp; (rs &gt;= STOP || workQueue.isEmpty())) { decrementWorkerCount(); return null; } boolean timed; // Are workers subject to culling? for (;;) { int wc = workerCountOf(c); timed = allowCoreThreadTimeOut || wc &gt; corePoolSize; if (wc &lt;= maximumPoolSize &amp;&amp; ! (timedOut &amp;&amp; timed)) break; if (compareAndDecrementWorkerCount(c)) return null; c = ctl.get(); // Re-read ctl if (runStateOf(c) != rs) continue retry; // else CAS failed due to workerCount change; retry inner loop } try { Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); if (r != null) return r; timedOut = true; } catch (InterruptedException retry) { timedOut = false; } } è¿™ä¸ªæ–¹æ³•åšçš„äº‹å°±æ˜¯ä»ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­è·å–å€¼ï¼Œå…¶ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€äº›çŠ¶æ€çš„åˆ¤æ–­é€»è¾‘ å½“å‰çº¿ç¨‹æ± çŠ¶æ€ä¸ºSHUTDOWNå¹¶ä¸”workqueueä¸ºç©ºï¼Œæˆ–è€…å½“å‰çº¿ç¨‹æ± çŠ¶æ€ä¸ºSTOPæ—¶ç›´æ¥è¿”å›null è‹¥å½“å‰çº¿ç¨‹æ•°å¤§äºäº†æœ€å¤§çº¿ç¨‹æ•°ï¼Œå‡å°‘ä¸€ä¸ªçº¿ç¨‹æ•°ï¼Œå¹¶è¿”å›null å¦‚è‹¥å½“å‰çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æˆ–è€…è®¾ç½®äº†å…è®¸æ ¸å¿ƒçº¿ç¨‹æ•°è¿‡æœŸï¼ŒåŒæ—¶ä»workqueueé˜Ÿåˆ—ä¸­å–æ•°æ®è¶…æ—¶ï¼Œè¿”å›nullï¼Œå‡å°‘ä¸€ä¸ªçº¿ç¨‹æ•° è‡³æ­¤ï¼Œå½“å½“å‰çº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶çš„å…¨éƒ¨æµç¨‹æˆ‘ä»¬èµ°è¿‡ä¸€éäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†å›åˆ°ä¸€å¼€å§‹çš„executeæ–¹æ³•ï¼Œçœ‹çœ‹å½“å‰çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶çš„ç­–ç•¥ if (isRunning(c) &amp;&amp; workQueue.offer(command)) { int recheck = ctl.get(); if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); else if (workerCountOf(recheck) == 0) addWorker(null, false); } else if (!addWorker(command, false)) reject(command); è‹¥å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€ä¸ºRUNNINGå¹¶ä¸”ï¼Œå‘workQueueä¸­æ·»åŠ ä»»åŠ¡æˆåŠŸï¼Œåˆ™è¿›è¡Œrecheckæ“ä½œ recheckæ“ä½œä¸»è¦æ˜¯é˜²æ­¢æ·»åŠ ä»»åŠ¡ä¹‹åçº¿ç¨‹æ± çŠ¶æ€å˜æ›´ï¼Œä»¥åŠåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´ä¹‹åï¼Œå½“å‰çº¿ç¨‹å…¨éƒ¨è¿‡æœŸçš„åœºæ™¯ å¦‚æœæ·»åŠ ä»»åŠ¡å¤±è´¥ï¼Œæˆ–è€…å‡ºç°çº¿ç¨‹æ± çŠ¶æ€å˜æ›´ï¼Œåˆ™è¿›è¡Œrejectæ“ä½œ rejectæ“ä½œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„æˆ–è€…é»˜è®¤çš„RejectedExecutionHandler æ€»ç»“ä¸Šé¢æˆ‘ä»¬å·²ç»æŠŠçº¿ç¨‹æ± çš„æ ¸å¿ƒä»£ç å…¨éƒ¨æ¢³ç†äº†ä¸€éï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥æŠŠè¿™äº›é›¶æ•£çš„ä¸œè¥¿æ€»ç»“ä¸€ä¸‹ çº¿ç¨‹æ± çš„å‡ ç§çŠ¶æ€çº¿ç¨‹æ± ä¸€å…±æœ‰5ç§çŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºRunningã€ShutDownã€Stopã€Tidyingã€Terminated Running å½“çº¿ç¨‹æ± åˆå§‹åŒ–å®Œæˆä¹‹åå°±ä¸ºRunningçŠ¶æ€ï¼Œæ­¤çŠ¶æ€å¯ä»¥æ­£å¸¸åœ°æ¥æ”¶ä»»åŠ¡å¹¶å¤„ç†ä»»åŠ¡ ShutDown å½“ä¸»åŠ¨è°ƒç”¨äº†shutdownæ–¹æ³•ä¹‹åï¼Œè‹¥å½“å‰çŠ¶æ€ä¸ºRunningï¼Œåˆ™ä¼šå°†çŠ¶æ€ä¿®æ”¹ä¸ºShutDownå¹¶ä¸”shutdownæ–¹æ³•ä¼šè°ƒç”¨ interruptIdleWorkers(false); æ­¤æ–¹æ³•çš„ä½œç”¨æ˜¯è°ƒç”¨å½“å‰æ‰€æœ‰çº¿ç¨‹çš„interruptæ–¹æ³•ï¼Œå°†å½“å‰æ‰€æœ‰çº¿ç¨‹æ ‡è®°ä¸ºä¸­æ–­çŠ¶æ€ç„¶ååˆaddWorkå¯çŸ¥ï¼Œä¸€æ—¦å½“å‰çŠ¶æ€ä¸æ˜¯Runningçš„æ—¶å€™ï¼Œæ˜¯ä¸ä¼šæ·»åŠ æ–°çš„ä»»åŠ¡çš„ï¼Œå› æ­¤ï¼ŒShutDownçŠ¶æ€çš„çº¿ç¨‹æ± çš„çŠ¶æ€æ˜¯ï¼šä¸æ¥å—æ–°ä»»åŠ¡æ·»åŠ ï¼Œä½†ä¼šå¤„ç†å·²æœ‰ä»»åŠ¡ Stop å½“ä¸»åŠ¨è°ƒç”¨shutdownNowæ–¹æ³•åï¼Œè‹¥å½“å‰çŠ¶æ€ä¸ºRunningï¼Œæˆ–è€…ShutDownï¼Œåˆ™å°†å½“å‰çŠ¶æ€ç½®ä¸ºStopæ­¤çŠ¶æ€ä¸ShutDownçš„åŒºåˆ«åœ¨äºï¼ŒshutdownNowæ–¹æ³•ä¼šç§»é™¤æ‰å½“å‰workQueueä¸­çš„æ‰€æœ‰ä»»åŠ¡ã€‚å› æ­¤å½“å‰çŠ¶æ€çš„çº¿ç¨‹æ± çš„çŠ¶æ€æ˜¯ï¼šä¸æ¥å—æ–°ä»»åŠ¡æ·»åŠ ï¼Œä¸”ä¸æ‰§è¡Œæœªæ‰§è¡Œçš„ä»»åŠ¡ Tidying å½“å½“å‰çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°ä¸º0ï¼Œå¹¶ä¸”workQueueä¸ºç©ºæ—¶ï¼Œå½“å‰çº¿ç¨‹æ± çŠ¶æ€ä¸ºTidying Terminated å½“æ‰§è¡Œå®Œterminatedæ–¹æ³•åï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€ä¼šè¢«ç½®ä¸ºTerminated çº¿ç¨‹æ± çš„æ·»åŠ ç­–ç•¥ è‹¥å½“å‰çº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ•°åˆ™æ·»åŠ ä¸€ä¸ªWorkä¹Ÿå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ è‹¥å½“å‰çº¿ç¨‹æ•°å¤§äºç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°åˆ™å‘workQueueä¹Ÿå°±æ˜¯å‚æ•°ä¸­çš„å·¥ä½œé˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªtask è‹¥å½“å‰çº¿ç¨‹æ•°å¤§äºç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°å¹¶ä¸”workQueueé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªéæ ¸å¿ƒçº¿ç¨‹ è‹¥å½“å‰çº¿ç¨‹æ•°å¤§äºç­‰äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œåˆ™ä½¿ç”¨å®šä¹‰å¥½çš„æ‹’ç»ç­–ç•¥æ‹’ç»æ‰æ­¤æ¬¡ä»»åŠ¡]]></content>
      <categories>
        <category>JDK</category>
      </categories>
      <tags>
        <tag>æ—¥å¸¸å­¦ä¹ </tag>
        <tag>æºç </tag>
        <tag>Threadpoolexecutor</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»Ÿä¸€ç”µè¯æœåŠ¡]]></title>
    <url>%2F2018%2F06%2F02%2F%E7%BB%9F%E4%B8%80%E7%94%B5%E8%AF%9D%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[ç»Ÿä¸€ç”µè¯æœåŠ¡æ¨¡å—åŒ–æ”¹é€ ç›®æ ‡å°†ç°æœ‰æœåŠ¡æŒ‰åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—,å†…éƒ¨ç³»ç»Ÿç»“æ„æ”¹ä¸ºå„ä¸ªæ¨¡å—ä¹‹é—´é€šä¿¡çš„æ–¹å¼ï¼Œå‡å°‘å†—ä½™ä»£ç ï¼Œè§£è€¦å„ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ æ¨¡å—åˆ’åˆ†ç»è¿‡å¯¹ç³»ç»ŸåŠŸèƒ½çš„æ¢³ç†ï¼Œä¸€å…±åˆ’åˆ†ä¸ºäº†å¦‚ä¸‹5ä¸ªäº’ç›¸è§£è€¦çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å¤§è‡´åŠŸèƒ½å¦‚ä¸‹ æ ¡éªŒåŠæ•°æ®è½¬åŒ–æ¨¡å— ç³»ç»Ÿä¸­æ‰€æœ‰éœ€è¦è¿›è¡Œæ•°æ®æ ¡éªŒçš„æ“ä½œï¼ŒåŒ…æ‹¬å‚æ•°æ ¡éªŒï¼Œè¿”å›å€¼æ ¡éªŒï¼Œä»¥åŠéœ€è¦è¿›è¡Œæ•°æ®è½¬æ¢çš„æœåŠ¡ï¼ŒåŒ…æ‹¬16è¿›åˆ¶è½¬10è¿›åˆ¶ï¼Œç è¡¨è½¬æ¢ç­‰ï¼Œç”±æ­¤æ¨¡å—å¯¹å¤–æä¾› åŠ è§£å¯†æ¨¡å— ç³»ç»Ÿä¸­æ‰€æœ‰éœ€è¦è¿›è¡ŒåŠ è§£å¯†çš„æ“ä½œï¼Œç”±æ­¤æ¨¡å—å¯¹å¤–æä¾› å­˜å‚¨æ¨¡å— ç³»ç»Ÿä¸­æ‰€æœ‰éœ€è¦è¿›è¡Œå­˜å‚¨çš„æ“ä½œå…¨éƒ¨ç”±æ­¤æ¨¡å—æä¾›ï¼ŒåŒ…æ‹¬ç¼“å­˜ï¼Œdbç­‰ï¼ŒåŒæ—¶å†…ç½®ç¼“å­˜åŒæ­¥ç­–ç•¥ï¼Œè·¯ç”±ç­–ç•¥ï¼Œé™çº§ç­–ç•¥ï¼Œé™æµç­–ç•¥ç­‰ LeafIDç”Ÿæˆæ¨¡å— ç³»ç»Ÿå†…æ‰€æœ‰leafIDçš„æ¥æºï¼Œå†…éƒ¨åŒ…å«é¢„æ‹‰å–ï¼Œå†…å­˜é˜Ÿåˆ—ä¼˜åŒ–ï¼Œç†”æ–­é™çº§ç­‰ç­–ç•¥ ç›‘æ§æ¨¡å— è´Ÿè´£ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†æå¹¶å‘Šè­¦ æ¨¡å—é€šä¿¡æ–¹å¼ç›®å‰é‡‡å–çš„ç­–ç•¥æ˜¯ï¼Œæ¯ä¸ªæ¨¡å—å„å¯¹å¤–æš´éœ²ä¸€ä¸ªæ¥å£ï¼Œå†ç”±å†…éƒ¨å®ç°ç±»å»å¯¹å„ä¸ªæ¨¡å—è¿›è¡Œæ“ä½œï¼Œå…¶ä¸­ç›‘æ§æ¨¡å—é‡‡ç”¨AOPçš„æ–¹å¼ï¼Œæ•è·å…¶ä»–æ‰€æœ‰æ¨¡å—çš„è¿”å›å€¼åŠæŠ›å‡ºçš„å¼‚å¸¸ã€‚ å­˜å‚¨æ¨¡å—è¯¦ç»†è®¾è®¡åœ¨æ‰€æœ‰æ¨¡å—ä¸­ï¼Œå­˜å‚¨æ¨¡å—æ˜¯é€»è¾‘æœ€å¤æ‚çš„ä¸€å—ï¼Œç»†åˆ†çš„è¯å¯ä»¥åˆ†ä¸ºç¼“å­˜æ¨¡å—å’Œdbæ¨¡å—ã€‚ ç¼“å­˜æ¨¡å—ç¼“å­˜æ¨¡å—ä½œä¸ºé«˜å¯ç”¨æœ€é‡è¦çš„ä¸€ç¯ï¼Œå› æ­¤ç›¸å½“é‡è¦ï¼Œæ•…è€Œé‡‡å–äº†ä»¥ä¸‹ç­–ç•¥ï¼Œå°½å¯èƒ½ä¿è¯ç¼“å­˜æœåŠ¡çš„ç¨³å®š å¼‚åœ°åŒä¸­å¿ƒéƒ¨ç½² å½“ä¸€ä¸ªè¯·æ±‚åˆ°ç¼“å­˜æ¨¡å—æ—¶ä¼šåˆ¤æ–­åœ°åŒºä¿¡æ¯ï¼Œè°ƒç”¨ä¸åŒçš„ç¼“å­˜é›†ç¾¤ ç†”æ–­é™çº§ é‡‡å–redisã€tairåŒç¼“å­˜äº’ä¸ºå¤‡ä»½çš„æ–¹æ¡ˆ,é»˜è®¤ç”±redisæä¾›æœåŠ¡ï¼Œä¸€æ—¦rediså‡ºç°å¼‚å¸¸ï¼Œè‡ªåŠ¨é™çº§åˆ°tair ç¼“å­˜ç»“æ„ä¼˜åŒ–(ä¸»è¦é’ˆå¯¹redis) å°†stringç±»å‹è°ƒæ•´ä¸ºhashç±»å‹ï¼Œå°†keyçš„æ•°é‡çº§ç”±äº¿é™è‡³ç™¾ä¸‡ï¼Œé™ä½å­˜å‚¨å†…å­˜å ç”¨ dbæ¨¡å—dbä¸»è¦ç”¨äºä¿è¯æ•°æ®å¯é ï¼Œå› æ­¤é‡ç‚¹åœ¨äºä¸èƒ½æœ‰ä»»ä½•è„æ•°æ®è½åº“ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜è¦ä¿è¯dbçš„é«˜å¯ç”¨ï¼Œä¸èƒ½è¢«çªå¢æµé‡æ‰“å®ï¼Œå› æ­¤dbæ¨¡å—å·¥ä½œå¦‚ä¸‹ï¼š é™æµ ä½¿ç”¨å…¬å¸å†…éƒ¨é™æµæ¡†æ¶å¯¹å†™æ¥å£è¿›è¡Œé™æµ åˆ†å¸ƒå¼é” è½åº“æ“ä½œå…¶å®æ˜¯ä¸€ç±»compareAndSetçš„æ“ä½œï¼Œå¯¹äºä¸€æ¡æ•°æ®ä¼šé¦–å…ˆæŸ¥è¯¢dbä¸­æœ‰æ²¡æœ‰ï¼Œæ²¡æœ‰å†è½åº“ä½†æ˜¯åœ¨å¹¶å‘é‡æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™åŒä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå¾€æ•°æ®åº“ä¸­æ’å…¥åŒä¸€æ¡è®°å½•çš„é—®é¢˜,å¯¹äºè¿™ä¸ªé—®é¢˜æˆ‘ä»¬çš„è§£å†³æ–¹å¼æ˜¯ä¸ºæ¯ä¸ªå†™å…¥æ“ä½œæ·»åŠ ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œè¿‡æœŸæ—¶é—´ä¸º1sï¼Œå½“å†™åŒä¸€æ¡æ•°æ®æ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è·å–åˆ°é”ï¼Œæœªè·å–åˆ°é”çš„çº¿ç¨‹åˆ™ç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ï¼Œç„¶åæŸ¥è¯¢è¿”å› leafIDæ¨¡å—è¯¦ç»†è®¾è®¡ ç»´æŠ¤çº¿ç¨‹æ± é¢„æ‹‰å–æ•°æ®åˆ°db,æ•°æ®é»˜è®¤ä»dbä¸­è·å– å½“dbä¸­è·å–æ•°æ®å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨é™çº§åˆ°è¿œç¨‹è°ƒç”¨ è·å–åˆ°çš„æ•°æ®å…ˆå…¨éƒ¨ç¼“å­˜åˆ°å†…å­˜é˜Ÿåˆ—ä¸­ï¼Œæ‰€æœ‰å¤–éƒ¨è°ƒç”¨éƒ½ä»é˜Ÿåˆ—ä¸­å–å€¼]]></content>
      <categories>
        <category>å·¥ä½œ</category>
      </categories>
      <tags>
        <tag>ç¾å›¢ç‚¹è¯„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JDKå®ç°çš„åŠ¨æ€ä»£ç†æºç åˆ†æ]]></title>
    <url>%2F2018%2F04%2F26%2FProxy%2F</url>
    <content type="text"><![CDATA[å¯¹äºæ‡‚çš„å«ä¹‰ï¼Œåº”å½“æ˜¯åœ¨çœ‹å®Œä¹‹åèƒ½å¤Ÿè‡ªå·±å®ç°å‡ºæ¥ Springä½¿ç”¨çš„åŠ¨æ€ä»£ç†ä¸€å…±æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åŸºäºJdkçš„proxyç±»çš„åªæ”¯æŒæ¥å£å±‚é¢çš„ä»£ç†ï¼Œå¦ä¸€ç§æ˜¯åŸºäºcglibèƒ½æ”¯æŒå®ç°ç±»çš„ä»£ç†æœ¬æ–‡åªè®¨è®ºåŸºäºjDKçš„ä»£ç† é—®é¢˜ jdkçš„åŠ¨æ€ä»£ç†æ˜¯å¦‚ä½•å®ç°çš„ jdkçš„åŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆåªæ”¯æŒæ¥å£ä»£ç† ä½¿ç”¨æ–¹å¼TestProxy testProxy = (TestProxy) Proxy.newProxyInstance(TestProxy.class.getClassLoader(), new Class[]{TestProxy.class}, new InvocationHandler() { @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { System.out.println(&quot;invoke method:&quot;+method.getName()+&quot; args:&quot;+args); return null; } }); testProxy.sayBye(); TestProxy.java public interface TestProxy { void sayHi(); void sayBye(); } é€šå¸¸è°ƒç”¨åœºæ™¯å°±æ˜¯ä½¿ç”¨Proxyç±»çš„newProxyInstanceæ–¹æ³•ï¼Œå…ˆæ¥çœ‹çœ‹æ–¹æ³•ç­¾å public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) å‚æ•°æœ‰3ä¸ªï¼Œå«ä¹‰å¦‚ä¸‹: loader:ç±»åŠ è½½å™¨ï¼Œç”¨äºå°†ç”Ÿæˆçš„classæ–‡ä»¶åŠ è½½è¿›å†…å­˜(æ–¹æ³•åŒº) interfaces:ä»£ç†ç±»è¦å®ç°çš„æ¥å£,åªæ”¯æŒæ¥å£ï¼Œä¸æ”¯æŒå®ç°ç±» h:InvocationHandleræœ€ç»ˆæ‰€æœ‰æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šèµ°åˆ°å®ƒçš„invokeæ–¹æ³• å®ç°å®ç°å…¶å®å¾ˆç®€å•ï¼Œæ ¸å¿ƒé€»è¾‘ç”¨ä¸€å¥è¯å°±å¯ä»¥æ¦‚æ‹¬ï¼šä½¿ç”¨ProxyGenerator.generateProxyClassç”ŸæˆäºŒè¿›åˆ¶classæ–‡ä»¶ï¼Œç„¶åç”¨ç±»åŠ è½½å™¨åŠ è½½è¿›å†…å­˜ï¼Œæœ€åä½¿ç”¨æ„é€ å™¨æ„é€ å®ä¾‹(ps:å½“å‰å…·ä½“å®ç°æ˜¯æ²¡æœ‰è¿™ä¹ˆç®€å•çš„ï¼Œå…·ä½“å®ç°è¿˜åŒ…æ‹¬ä¸€äº›å®‰å…¨æ€§æ ¡éªŒï¼Œä»¥åŠæé«˜æ•ˆç‡ä½¿ç”¨çš„äºŒçº§ç¼“å­˜ç­–ç•¥è¿™äº›,ä½†æ˜¯è¿™ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„é‡ç‚¹ï¼Œå› æ­¤æš‚ä¸è¯¦ç»†æè¿°) å…¶ä¸­é‡ç‚¹å½“ç„¶å°±æ˜¯ç”Ÿæˆçš„ä»£ç†ç±»å•¦ï¼Œæˆ‘ä»¬åœ¨åŸæ¥çš„ä»£ç åŠ å…¥ä¸‹é¢è¿™ä¸ªä¸€è¡Œä»£ç ï¼Œå°†ç”Ÿæˆçš„classæ–‡ä»¶ä¿å­˜ä¸‹æ¥ System.getProperties().put(&quot;sun.misc.ProxyGenerator.saveGeneratedFiles&quot;,&quot;true&quot;); ç”Ÿæˆçš„classæ–‡ä»¶å¦‚ä¸‹ï¼š $Proxy0.class package com.sun.proxy; import java.lang.reflect.InvocationHandler; import java.lang.reflect.Method; import java.lang.reflect.Proxy; import java.lang.reflect.UndeclaredThrowableException; public final class $Proxy0 extends Proxy implements TestProxy { private static Method m1; private static Method m3; private static Method m4; private static Method m0; private static Method m2; public $Proxy0(InvocationHandler var1) throws { super(var1); } public final boolean equals(Object var1) throws { try { return ((Boolean)super.h.invoke(this, m1, new Object[]{var1})).booleanValue(); } catch (RuntimeException | Error var3) { throw var3; } catch (Throwable var4) { throw new UndeclaredThrowableException(var4); } } public final void sayBye() throws { try { super.h.invoke(this, m3, (Object[])null); } catch (RuntimeException | Error var2) { throw var2; } catch (Throwable var3) { throw new UndeclaredThrowableException(var3); } } public final void sayHi() throws { try { super.h.invoke(this, m4, (Object[])null); } catch (RuntimeException | Error var2) { throw var2; } catch (Throwable var3) { throw new UndeclaredThrowableException(var3); } } public final int hashCode() throws { try { return ((Integer)super.h.invoke(this, m0, (Object[])null)).intValue(); } catch (RuntimeException | Error var2) { throw var2; } catch (Throwable var3) { throw new UndeclaredThrowableException(var3); } } public final String toString() throws { try { return (String)super.h.invoke(this, m2, (Object[])null); } catch (RuntimeException | Error var2) { throw var2; } catch (Throwable var3) { throw new UndeclaredThrowableException(var3); } } static { try { m1 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;equals&quot;, Class.forName(&quot;java.lang.Object&quot;)); m3 = Class.forName(&quot;TestProxy&quot;).getMethod(&quot;sayBye&quot;); m4 = Class.forName(&quot;TestProxy&quot;).getMethod(&quot;sayHi&quot;); m0 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;hashCode&quot;); m2 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;toString&quot;); } catch (NoSuchMethodException var2) { throw new NoSuchMethodError(var2.getMessage()); } catch (ClassNotFoundException var3) { throw new NoClassDefFoundError(var3.getMessage()); } } } å¯ä»¥çœ‹åˆ°é™¤äº†TestProxyçš„ä¸¤ä¸ªæ–¹æ³•sayHiï¼ŒsayByä¹‹å¤–è¿˜æœ‰hashcode,toString,equals è¿™ä¸‰ä¸ªObjectç±»è‡ªå¸¦çš„æ–¹æ³•è‡³äºä¸ºä»€ä¹ˆéè¦æœ‰è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œæˆ‘æš‚æ—¶ä¹Ÿæ²¡å¼„æ˜ç™½â€¦.. ä¸ç®¡è¿™ä¸ªå¥‡æ€ªçš„é€»è¾‘ï¼Œæˆ‘ä»¬æ¥çœ‹sayHiå’ŒsayBy çš„å…·ä½“å®ç°ï¼Œå‘ç°è°ƒç”¨è¿‡ç¨‹å…¶å®æ˜¯å…ˆç”¨åå°„æ‹¿åˆ°TestProxyçš„methodç„¶åè°ƒç”¨ä¹‹å‰ä¼ å…¥çš„InvocationHandlerå®ä¾‹çš„invokeæ–¹æ³•ï¼Œå°†å¯¹åº”çš„methodå’Œparamsä¼ å…¥,ç„¶åç”±å®ä¾‹å†…éƒ¨çš„é€»è¾‘å»å¤„ç† ç»“è®ºQ: jdkçš„åŠ¨æ€ä»£ç†æ˜¯å¦‚ä½•å®ç°çš„A: è¯»å–ä¼ å…¥çš„interfaceçš„methodä¿¡æ¯ï¼Œç”Ÿæˆå®ç°å¯¹åº”æ–¹æ³•çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åå…·ä½“å®ç°å°±æ˜¯è°ƒç”¨ä¼ å…¥çš„InvocationHandlerçš„invokeæ–¹æ³• Q: jdkçš„åŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆåªæ”¯æŒæ¥å£ä»£ç†A: ç”±ç”Ÿæˆçš„ç±»ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œä»£ç†ç±»æ˜¯ç»§æ‰¿äº†Proxyç±»ç„¶åå®ç°ä»£ç†æ¥å£çš„ï¼Œç”±äºjavaçš„å•ç»§æ‰¿ç­–ç•¥,æ‰€ä»¥æ²¡åŠæ³•ç»§ç»­ç»§æ‰¿å®ç°ç±» ä¸€äº›æ€è€ƒ ä¸ºä»€ä¹ˆç”Ÿæˆçš„ä»£ç†ç±»è¦ç»§æ‰¿Proxyç±»? ä¸ºä»€ä¹ˆinvokeæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå‚æ•°æ˜¯proxyè¿™ä¸ªå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  è‹¥æ˜¯è¦å¯¹ç±»è¿›è¡Œä»£ç†,é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåšï¼Ÿä»£ç†ç±»çš„å®ç°åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ]]></content>
      <categories>
        <category>JDK</category>
      </categories>
      <tags>
        <tag>æ—¥å¸¸å­¦ä¹ </tag>
        <tag>æºç </tag>
        <tag>proxy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€äº›æƒ³æ³•]]></title>
    <url>%2F2018%2F01%2F03%2F%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95%2F</url>
    <content type="text"><![CDATA[æˆ‘æƒ³è¦çš„æ— éæ˜¯çœ‹å¾—è§çš„æœªæ¥å’Œåˆ°å¾—äº†çš„è¿œæ–¹ è¿‡å»ç‹¬èº«ä¸€äººï¼Œæ‡µæ‡‚æ— çŸ¥ï¼Œå¾—è¿‡ä¸”è¿‡ ç°åœ¨è™½ç„¶è¿˜æ˜¯ä¸€æ¡å’¸é±¼ï¼Œè¿˜æ˜¯é‚£ä¹ˆæ— èƒ½ï¼Œä½†æ˜¯æ‹¥æœ‰äº†ä½ ï¼Œå¥½åƒæ˜ç™½äº†å¾ˆå¤šäº‹æƒ… æœªæ¥æˆä¸ºè‡ªå·±ä¸€ç›´æƒ³æˆä¸ºçš„é‚£ä¸ªäººï¼Œä¸å†å½“ä¸€æ¡ä»¤äººæ¶å¿ƒçš„å’¸é±¼ æ€»ç»“äººç”Ÿè·¯é•¿ï¼Œé£æ™¯å¾ˆå¤šï¼Œå€¼å¾—æˆ‘ä»¬ä»˜å‡ºæ‰€æœ‰çš„åŠªåŠ›å»åˆ°æ›´è¿œçš„åœ°æ–¹ï¼Œçœ‹åˆ°æ›´å¥½çš„é£æ™¯ å½“ç„¶ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œä¸è®ºæ—…é€”è‰°è¾›ä¸å¦ï¼Œé£æ™¯åŠ¨äººè¿˜æ˜¯ä»¤äººå¤±æœ›ï¼Œèº«è¾¹å§‹ç»ˆæœ‰ä½  â€” kep äº2018å¹´1æœˆ3æ—¥æ™š èƒ¡è¨€ä¹±è¯­]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å’¸é±¼ä¹‹å®¶ä»Šå¤©æ­£å¼æˆç«‹å•¦]]></title>
    <url>%2F2017%2F11%2F11%2Fhello-world%2F</url>
    <content type="text"><![CDATA[â€œåŒ11ï¼Œåˆ«äººåœ¨å‰æ‰‹ï¼Œæˆ‘åœ¨ç ä»£ç â€ å‰è¨€åœ¨æ¢äº†å‡ ä¸ªå¤§ä¼—åŒ–çš„åšå®¢ä¹‹åç»ˆäºæƒ³è¦è‡ªå·±æ¥æ­ä¸€ä¸ªåšå®¢ç¯å¢ƒäº†ã€‚ å½“ç„¶ä½œä¸ºä¸€ä¸ªåªä¼šhtmlï¼Œcssï¼ŒJavaScriptç­‰å•è¯æ‹¼å†™çš„äºº å†™å‰ç«¯æ˜¯ä¸ä¼šå†™çš„ï¼Œåªèƒ½å‹‰å¼ºé ç€copyå¤§ä½¬çš„ä»£ç æ‰èƒ½å‹‰å¼ºæœ‰ä¸ªèƒ½çœ‹çš„ç•Œé¢è¿™ä¸ªæ ·å­ äºæ˜¯å‘¨æœ«èŠ±äº†ä¸€å¤©æ—¶é—´æ‰¾äº†ä¸€å †å¤§ä½¬ä»¬æ¨¡æ¿ï¼Œæœ€ç»ˆé€‰æ‹©äº†ç”¨è¿™ä¸ªçœ‹è¿™é‡Œ æ¯•ç«Ÿåæ­£è‡ªå·±ä¸ä¼šå†™ï¼Œç”¨å“ªä¸ªéƒ½æ˜¯ä¸€æ ·çš„ æ­£æ–‡ä»¥åæ‰“ç®—åœ¨è¿™é‡Œå†™ä¸€å†™å¹³æ—¶è‡ªå·±å­¦åˆ°çš„æ–°å§¿åŠ¿ï¼Œç”Ÿæ´»ä¸­çš„ä¸€äº›çæƒ³ç­‰ç­‰ æ¬¢è¿å„ä½åŸºä½¬å‰æ¥å›´è§‚ â€”â€” kep äº 2017å¹´ 11.11]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>éšæƒ³</tag>
      </tags>
  </entry>
</search>
